YUI.add("common-utils-onboarding",function(e){var t,n,r,i=e.mail.ui.FolderUtils,s=e.common.Utils.getSegmentData("webMail").currSegScore,o;o={setRestartBuckets:function(){return(new Promise(function(t){e.contacts.utils.areContactsLoaded()?t():e.once("contacts:api:loaded",t)})).then(function(){var s=0,o=i.get(i.getInboxFid()).total||0,u=i.get(i.getInboxFid()).unread||0,a=[100,500,1e3,5e3,1e4];e.contacts.utils.areContactsLoaded()&&(s=e.contacts.utils.getTotalContacts()),t=[10,50,100,500,1e3].filter(function(e){return s<e})[0]||"gt_1000",n=a.filter(function(e){return o<e})[0]||"gt_10000",r=a.filter(function(e){return u<e})[0]||"gt_10000"})},statRestartEligibility:function(){o.getRestartBuckets().then(function(){e.fire("util:ymstats",{name:"restart_eligible",tags:{contactsBucket:t,inboxCountBucket:n,unreadInboxCountBucket:r,segment:s}})})},getRestartBuckets:function(){return(new Promise(function(e){typeof t=="undefined"?e(o.setRestartBuckets()):e()})).then(function(){return{contactsBucket:t,inboxCountBucket:n,unreadInboxCountBucket:r}})}},e.namespace("common.Utils").Onboarding=o},"1.0.0",{requires:["common-utils","contacts-api","contacts-api-utils","mail-ui-folder-utils"]});
