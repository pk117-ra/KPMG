"use strict";YUI.add("tictac-base-batch-transport",function(a){function b(b){var c=j(b).split("\r\n"),d={};return a.Array.each(c,function(a){var b=j(a),c=b.indexOf(":"),e=b.substring(0,c),f=b.substring(c+1);d[j(e)]=j(f)}),d}function c(c,d){var e,f,g,h,k,l=d?j(d):"",m="\r?\n?[-]*"+l+"[-]*\r?\n?",n={};return f=new RegExp(m,"igm"),g=c.split(f),a.Array.each(g,function(a){""!==a&&"--"!==a&&"\r\n"!==a&&(e=a.indexOf("\r\n\r\n"),h=b(a.substr(0,e)),k=j(a.substr(e+1)),-1!==h["Content-Type"].indexOf("application/json")&&(k=i.parseJSON(k)),n[h["Content-RequestId"]]={header:h,body:k})}),n}function d(a){var b,d;return 200===a.status&&(d=a.getResponseHeader("Content-Type").split("boundary=")[1],b=c(a.responseText,d)),b}function e(b,c,f,g){var j=[NeoConfig.launch_protocol,location.hostname,"/ws/v3/batch","?appid="+h,"&wssid="+k.getWssid(),"&windowid="+NeoConfig.windowId,"&r="+(new Date).getTime(),"&ymreqid="+a.common.net.Session.genReqID()].join("");return g&&(j+=g),f=f||{},a.io(j,{method:"POST",data:a.JSON.stringify(b),headers:a.mix({Accept:"application/json, multipart/form-data","Content-Type":"application/json"},f),timeout:m,on:{success:function(a,b){var e=d(b);c.success(a,b,e)},failure:function(d,f){var g,h,j,m=i.parseJSON(f.responseText),n=a.Object.getValue(m,["error","code"]);return-1!==a.Array.indexOf([107,"EC-4003"],n)?(j=a.Object.getValue(m,["error","details","wssid"]),j||(g=m.error.detail.url,h=g.match(l),j=h.length>1?h[1]:k.getWssid()),NeoConfig.wssid=j,k.setWssid(j),b.requests[1]&&"GetAttachment"===b.requests[1].id&&(b.requests[1].uri=b.requests[1].uri.replace(l,"&wssid="+j)),void e(b,c)):-1!==a.Array.indexOf([108,"EC-4008"],n)?(a.once("net:reloginSuccessful",function(){e(b,c)}),void a.common.net.Error.simpleRelogin()):void(c.fail&&c.fail(d,f))},progress:function(a,b){var e=d(b);c.progress(a,b,e)}}})}var f=a.Tictac,g=a.common&&a.common.Utils,h=g&&g.settings&&g.settings.value("appid","YahooMailNeo")||"YahooMailNeo",i=f.base.utils,j=a.Lang.trim,k=a.common.net.SessionMgr,l=/[\&|\?]wssid=([^\&\#]+)/,m=25e3;a.namespace("Tictac.base").BatchTransport={send:e}},"1.0.0",{requires:["tictac-base-utils","io","common-net-sessionmgr","mail-common-utils-settings"]});YUI.add("tictac-att-rollups",function(a){a.namespace("Tictac.att.rollups"),a.Tictac.att.rollups.downloadmenu=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+="    ",e={hash:{},inverse:s.noop,fn:s.program(2,g,b),data:b},(d=c.save_to_computer)?d=d.call(a,e):(d=a.save_to_computer,d=typeof d===t?d.apply(a):d),c.save_to_computer||(d=u.call(a,d,e)),(d||0===d)&&(f+=d),f+="    ",e={hash:{},inverse:s.noop,fn:s.program(4,h,b),data:b},(d=c.save_to_dropbox)?d=d.call(a,e):(d=a.save_to_dropbox,d=typeof d===t?d.apply(a):d),c.save_to_dropbox||(d=u.call(a,d,e)),(d||0===d)&&(f+=d),f+="    "}function g(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="download_all"><a href="#">Save all to my computer</a></li>    '}function h(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="save_dropbox_all"><a href="#">Save all to Dropbox</a></li>    '}function i(a,b){var d,e,f="";return f+="    ",e={hash:{},inverse:s.noop,fn:s.program(7,j,b),data:b},(d=c.save_to_computer)?d=d.call(a,e):(d=a.save_to_computer,d=typeof d===t?d.apply(a):d),c.save_to_computer||(d=u.call(a,d,e)),(d||0===d)&&(f+=d),f+="    ",e={hash:{},inverse:s.noop,fn:s.program(9,k,b),data:b},(d=c.save_to_dropbox)?d=d.call(a,e):(d=a.save_to_dropbox,d=typeof d===t?d.apply(a):d),c.save_to_dropbox||(d=u.call(a,d,e)),(d||0===d)&&(f+=d),f+="    "}function j(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="download"><a href="#">Save to my computer</a></li>    '}function k(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="save_dropbox"><a href="#">Save to Dropbox</a></li>    '}function l(a,b){var d,e,f="";return f+="    ",e={hash:{},inverse:s.noop,fn:s.program(12,m,b),data:b},(d=c.menuItems)?d=d.call(a,e):(d=a.menuItems,d=typeof d===t?d.apply(a):d),c.menuItems||(d=u.call(a,d,e)),(d||0===d)&&(f+=d),f+="    "}function m(a,b){var d,e="";return e+='    <li class="tictac-att-attachment-menu-action" data-action="',(d=c.actionAll)?d=d.call(a,{hash:{},data:b}):(d=a.actionAll,d=typeof d===t?d.apply(a):d),e+=v(d)+'"><a href="#">',(d=c.strMenuAll)?d=d.call(a,{hash:{},data:b}):(d=a.strMenuAll,d=typeof d===t?d.apply(a):d),e+=v(d)+"</a></li>    "}function n(a,b){var d,e,f="";return f+="    ",e={hash:{},inverse:s.noop,fn:s.program(15,o,b),data:b},(d=c.menuItems)?d=d.call(a,e):(d=a.menuItems,d=typeof d===t?d.apply(a):d),c.menuItems||(d=u.call(a,d,e)),(d||0===d)&&(f+=d),f+="    "}function o(a,b){var d,e="";return e+='    <li class="tictac-att-attachment-menu-action" data-action="',(d=c.action)?d=d.call(a,{hash:{},data:b}):(d=a.action,d=typeof d===t?d.apply(a):d),e+=v(d)+'"><a href="#">',(d=c.strMenu)?d=d.call(a,{hash:{},data:b}):(d=a.strMenu,d=typeof d===t?d.apply(a):d),e+=v(d)+"</a></li>    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var p,q,r="",s=this,t="function",u=c.blockHelperMissing,v=this.escapeExpression;return r+='<ul class="tictac-att-attachment-menu-fileaction">    ',q={hash:{},inverse:s.noop,fn:s.program(1,f,e),data:e},(p=c.multiple_files)?p=p.call(b,q):(p=b.multiple_files,p=typeof p===t?p.apply(b):p),c.multiple_files||(p=u.call(b,p,q)),(p||0===p)&&(r+=p),r+="    ",q={hash:{},inverse:s.program(6,i,e),fn:s.noop,data:e},(p=c.multiple_files)?p=p.call(b,q):(p=b.multiple_files,p=typeof p===t?p.apply(b):p),c.multiple_files||(p=u.call(b,p,q)),(p||0===p)&&(r+=p),r+="            ",q={hash:{},inverse:s.noop,fn:s.program(11,l,e),data:e},(p=c.multiple_files)?p=p.call(b,q):(p=b.multiple_files,p=typeof p===t?p.apply(b):p),c.multiple_files||(p=u.call(b,p,q)),(p||0===p)&&(r+=p),r+="    ",q={hash:{},inverse:s.program(14,n,e),fn:s.noop,data:e},(p=c.multiple_files)?p=p.call(b,q):(p=b.multiple_files,p=typeof p===t?p.apply(b):p),c.multiple_files||(p=u.call(b,p,q)),(p||0===p)&&(r+=p),r+="</ul>"}),a.Tictac.att.rollups.fileattachment=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d;return(d=c.error_class)?d=d.call(a,{hash:{},data:b}):(d=a.error_class,d=typeof d===p?d.apply(a):d),q(d)}function g(a,b){return"att-removable"}function h(a,b){var d,e="";return e+='<div class="tictac-att-thumb-error-state" title="',(d=c.error_message)?d=d.call(a,{hash:{},data:b}):(d=a.error_message,d=typeof d===p?d.apply(a):d),e+=q(d)+'"></div>'}function i(a,b){return"tictac-att-viewer tictac-att-other-view"}function j(a,b){return'<a tabindex="-1" role="button" aria-label="Download" href="#" data-action="save-att" class="tictac-att-show-dd-icon">Download<i class="icon icon-chevron-down tictac-att-thumb-save-options" tabindex="-1" role="menu" aria-label="More save options"></i></a>    '}function k(a,b){return'<a href="#" aria-label="Remove selected" tabindex="-1" class="tictac-att-remove" data-action="remove">Remove</a>'}function l(a,b){return'        <a href="#" tabindex="-1" data-action="view-att" class="tictac-att-viewer" title="Click to view attachment in slideshow" aria-hidden="true">View</a>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n,o="",p="function",q=this.escapeExpression,r=this,s=c.blockHelperMissing;return o+='<li tabindex="-1" role="presentation" class="tictac-att-other ',n={hash:{},inverse:r.noop,fn:r.program(1,f,e),data:e},(m=c.has_error)?m=m.call(b,n):(m=b.has_error,m=typeof m===p?m.apply(b):m),c.has_error||(m=s.call(b,m,n)),(m||0===m)&&(o+=m),o+=" ",n={hash:{},inverse:r.noop,fn:r.program(3,g,e),data:e},(m=c.has_remove)?m=m.call(b,n):(m=b.has_remove,m=typeof m===p?m.apply(b):m),c.has_remove||(m=s.call(b,m,n)),(m||0===m)&&(o+=m),o+=" ",n={hash:{},inverse:r.noop,fn:r.program(3,g,e),data:e},(m=c.has_cancel)?m=m.call(b,n):(m=b.has_cancel,m=typeof m===p?m.apply(b):m),c.has_cancel||(m=s.call(b,m,n)),(m||0===m)&&(o+=m),o+='" data-id="',(m=c.aid)?m=m.call(b,{hash:{},data:e}):(m=b.aid,m=typeof m===p?m.apply(b):m),o+=q(m)+'" data-type="',(m=c.filetype)?m=m.call(b,{hash:{},data:e}):(m=b.filetype,m=typeof m===p?m.apply(b):m),o+=q(m)+'" title="',(m=c.filename)?m=m.call(b,{hash:{},data:e}):(m=b.filename,m=typeof m===p?m.apply(b):m),o+=q(m)+" (",(m=c.filesize)?m=m.call(b,{hash:{},data:e}):(m=b.filesize,m=typeof m===p?m.apply(b):m),o+=q(m)+')">',n={hash:{},inverse:r.noop,fn:r.program(5,h,e),data:e},(m=c.has_error)?m=m.call(b,n):(m=b.has_error,m=typeof m===p?m.apply(b):m),c.has_error||(m=s.call(b,m,n)),(m||0===m)&&(o+=m),o+='<div class="tictac-att-other-filename ',n={hash:{},inverse:r.noop,fn:r.program(7,i,e),data:e},(m=c.has_view)?m=m.call(b,n):(m=b.has_view,m=typeof m===p?m.apply(b):m),c.has_view||(m=s.call(b,m,n)),(m||0===m)&&(o+=m),o+='"><div class="tictac-filename-without-type">',(m=c.filename_without_extension)?m=m.call(b,{hash:{},data:e}):(m=b.filename_without_extension,m=typeof m===p?m.apply(b):m),o+=q(m)+"</div><div>",(m=c.file_extension)?m=m.call(b,{hash:{},data:e}):(m=b.file_extension,m=typeof m===p?m.apply(b):m),o+=q(m)+'</div></div><div class="tictac-att-other-save-btn">    ',n={hash:{},inverse:r.noop,fn:r.program(9,j,e),data:e},(m=c.has_save_options)?m=m.call(b,n):(m=b.has_save_options,m=typeof m===p?m.apply(b):m),c.has_save_options||(m=s.call(b,m,n)),(m||0===m)&&(o+=m),n={hash:{},inverse:r.noop,fn:r.program(11,k,e),data:e},(m=c.has_remove)?m=m.call(b,n):(m=b.has_remove,m=typeof m===p?m.apply(b):m),c.has_remove||(m=s.call(b,m,n)),(m||0===m)&&(o+=m),o+="    ",n={hash:{},inverse:r.noop,fn:r.program(13,l,e),data:e},(m=c.has_view)?m=m.call(b,n):(m=b.has_view,m=typeof m===p?m.apply(b):m),c.has_view||(m=s.call(b,m,n)),(m||0===m)&&(o+=m),o+='</div><a href="#" role="button" aria-label="Remove selected" tabindex="-1" class="tictac-att-cancel-file-uploading tictac-att-remove hidden" data-action="remove"></a></li>'}),a.Tictac.att.rollups.attachment=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"has-thumb"}function g(a,b){var d;return(d=c.error_class)?d=d.call(a,{hash:{},data:b}):(d=a.error_class,d=typeof d===o?d.apply(a):d),p(d)}function h(a,b){return"att-removable"}function i(a,b){return'style="background-image: url(https://s.yimg.com/tq/att/150126155129/img/default-at.png);" '}function j(a,b){return'    <div class="tictac-att-photo-overlay">        <a tabindex="-1" role="button" aria-label="Download" href="#" data-action="save-att" class="tictac-att-show-dd-icon">Download<i class="icon icon-chevron-down tictac-att-thumb-save-options" tabindex="-1" role="menu" aria-label="More save options"></i></a>    </div>    '}function k(a,b){var d,e="";return e+='        <div class="tictac-att-thumb-error-state" title="',(d=c.error_message)?d=d.call(a,{hash:{},data:b}):(d=a.error_message,d=typeof d===o?d.apply(a):d),e+=p(d)+'"></div>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m,n="",o="function",p=this.escapeExpression,q=this,r=c.blockHelperMissing;return n+='<li tabindex="-1" aria-selected="false" role="presentation" class="tictac-att-viewer tictac-att-thumb ',m={hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e},(l=c.has_thumbnail)?l=l.call(b,m):(l=b.has_thumbnail,l=typeof l===o?l.apply(b):l),c.has_thumbnail||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+=" ",m={hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e},(l=c.has_error)?l=l.call(b,m):(l=b.has_error,l=typeof l===o?l.apply(b):l),c.has_error||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+=" ",m={hash:{},inverse:q.noop,fn:q.program(5,h,e),data:e},(l=c.has_remove)?l=l.call(b,m):(l=b.has_remove,l=typeof l===o?l.apply(b):l),c.has_remove||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+=" ",m={hash:{},inverse:q.noop,fn:q.program(5,h,e),data:e},(l=c.has_cancel)?l=l.call(b,m):(l=b.has_cancel,l=typeof l===o?l.apply(b):l),c.has_cancel||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='" ',m={hash:{},inverse:q.noop,fn:q.program(7,i,e),data:e},(l=c.has_thumbnail)?l=l.call(b,m):(l=b.has_thumbnail,l=typeof l===o?l.apply(b):l),c.has_thumbnail||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+=' data-id="',(l=c.aid)?l=l.call(b,{hash:{},data:e}):(l=b.aid,l=typeof l===o?l.apply(b):l),n+=p(l)+'" data-type="',(l=c.filetype)?l=l.call(b,{hash:{},data:e}):(l=b.filetype,l=typeof l===o?l.apply(b):l),n+=p(l)+'" title="',(l=c.filename)?l=l.call(b,{hash:{},data:e}):(l=b.filename,l=typeof l===o?l.apply(b):l),n+=p(l)+" (",(l=c.filesize)?l=l.call(b,{hash:{},data:e}):(l=b.filesize,l=typeof l===o?l.apply(b):l),n+=p(l)+')" aria-label="',(l=c.filename)?l=l.call(b,{hash:{},data:e}):(l=b.filename,l=typeof l===o?l.apply(b):l),n+=p(l)+'">    ',m={hash:{},inverse:q.noop,fn:q.program(9,j,e),data:e},(l=c.has_save_options)?l=l.call(b,m):(l=b.has_save_options,l=typeof l===o?l.apply(b):l),c.has_save_options||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+="    ",m={hash:{},inverse:q.noop,fn:q.program(11,k,e),data:e},(l=c.has_error)?l=l.call(b,m):(l=b.has_error,l=typeof l===o?l.apply(b):l),c.has_error||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='        <div class="tictac-att-hover-remove tictac-att-remove" data-action="remove" role="button" aria-label="Remove selected" tabindex="-1"></div></li>'}),a.Tictac.att.rollups.slideshow_infinite=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"bidi"}function g(a,b){return'            <span class="tictac-att-ss-topbar-divider">|</span>            <span class="linkSpan tictac-att-ss-topbar-download-single">                Download            </span>            <span class="tictac-att-ss-topbar-download icon icon-chevron-down" title="Save to">            </span>            <span class="tictac-att-ss-topbar-scanning">Scanning an attachment...</span>            <span class="tictac-att-ss-topbar-error">An error occurred while downloading.</span>            '}function h(a,b){var d,e="";return e+="    ",d=c.if.call(a,a.isDoc,{hash:{},inverse:u.program(8,j,b),fn:u.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e}function i(a,b){var d,e="";return e+='    <li class="tictac-att-ss-document" data-id="',(d=c.aid)?d=d.call(a,{hash:{},data:b}):(d=a.aid,d=typeof d===s?d.apply(a):d),e+=t(d)+'" style="">    </li>    '}function j(a,b){var d,e="";return e+='    <li class="tictac-att-ss-image" data-id="',(d=c.aid)?d=d.call(a,{hash:{},data:b}):(d=a.aid,d=typeof d===s?d.apply(a):d),e+=t(d)+'" style="">        </span>    </li>    '}function k(a,b){return"hidden"}function l(a,b){return"Next"}function m(a,b){return"Previous"}function n(a,b){return"has-thumb"}function o(a,b){var d,e="";return e+="style=\"background-image: url('",(d=c.thumbnailurl)?d=d.call(a,{hash:{},data:b}):(d=a.thumbnailurl,d=typeof d===s?d.apply(a):d),e+=t(d)+"')\" "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var p,q,r="",s="function",t=this.escapeExpression,u=this,v=c.blockHelperMissing;return r+=' <div class="tictac-att-slideshow ',q={hash:{},inverse:u.noop,fn:u.program(1,f,e),data:e},(p=c.isRTL)?p=p.call(b,q):(p=b.isRTL,p=typeof p===s?p.apply(b):p),c.isRTL||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='">    <div class="tictac-att-ss-topbar cf">        <div class="tictac-att-ss-topbar-left">            <span class="tictac-att-ss-topbar-filename"></span>                                    ',q={hash:{},inverse:u.program(3,g,e),fn:u.noop,data:e},(p=c.disableDownload)?p=p.call(b,q):(p=b.disableDownload,p=typeof p===s?p.apply(b):p),c.disableDownload||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='            <div class="tictac-att-ss-docview-toolbar">                <span class="tictac-att-ss-docview-zoom-out tictac-att-ss-ctrl-group linkSpan" title="Zoom Out"></span>                <span class="tictac-att-ss-docview-zoom-in linkSpan" title="Zoom In"></span>                <span class="tictac-att-ss-docview-page-current"></span>            </div>        </div>        <div class="tictac-att-ss-topbar-right">            <span class="tictac-att-ss-close linkSpan" title="Close"></span>        </div>    </div>    <ul class="tictac-att-slideshow-thumbs">        ',q={hash:{},inverse:u.noop,fn:u.program(5,h,e),data:e},(p=c.attachments)?p=p.call(b,q):(p=b.attachments,p=typeof p===s?p.apply(b):p),c.attachments||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='    </ul>    <div class="tictac-att-ss-state">        <span class="tictac-att-ss-state-loading">        </span>        <span class="tictac-att-ss-state-loading-message">',(p=c.message)?p=p.call(b,{hash:{},data:e}):(p=b.message,p=typeof p===s?p.apply(b):p),r+=t(p)+'</span>        <div class="tictac-att-ss-state-error">            <span class="tictac-att-ss-state-error-msg">Sorry, we are unable to display this attachment.</span>            <span class="tictac-att-ss-state-error-retry">Try again.</span>        </div>    </div>    <div class="tictac-att-ss-controls ',q={hash:{},inverse:u.noop,fn:u.program(10,k,e),data:e},(p=c.is_single)?p=p.call(b,q):(p=b.is_single,p=typeof p===s?p.apply(b):p),c.is_single||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='">        <span class="tictac-att-ss-controls-prev" title="',q={hash:{},inverse:u.noop,fn:u.program(12,l,e),data:e},(p=c.isRTL)?p=p.call(b,q):(p=b.isRTL,p=typeof p===s?p.apply(b):p),c.isRTL||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),q={hash:{},inverse:u.program(14,m,e),fn:u.noop,data:e},(p=c.isRTL)?p=p.call(b,q):(p=b.isRTL,p=typeof p===s?p.apply(b):p),c.isRTL||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='">            <span class="tictac-att-ss-controls-prev-icon">                <span></span>            </span>        </span>        <span class="tictac-att-ss-controls-next" title="',q={hash:{},inverse:u.noop,fn:u.program(14,m,e),data:e},(p=c.isRTL)?p=p.call(b,q):(p=b.isRTL,p=typeof p===s?p.apply(b):p),c.isRTL||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),q={hash:{},inverse:u.program(12,l,e),fn:u.noop,data:e},(p=c.isRTL)?p=p.call(b,q):(p=b.isRTL,p=typeof p===s?p.apply(b):p),c.isRTL||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='">            <span class="tictac-att-ss-controls-next-icon">                <span></span>            </span>        </span>    </div>    <div class="tictac-att-ss-footer ',q={hash:{},inverse:u.noop,fn:u.program(10,k,e),data:e},(p=c.is_hidden)?p=p.call(b,q):(p=b.is_hidden,p=typeof p===s?p.apply(b):p),c.is_hidden||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='">        <div class="tictac-att-ss-photo ',q={hash:{},inverse:u.noop,fn:u.program(16,n,e),data:e},(p=c.has_thumbnail)?p=p.call(b,q):(p=b.has_thumbnail,p=typeof p===s?p.apply(b):p),c.has_thumbnail||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='" ',q={hash:{},inverse:u.noop,fn:u.program(18,o,e),data:e},(p=c.has_thumbnail)?p=p.call(b,q):(p=b.has_thumbnail,p=typeof p===s?p.apply(b):p),c.has_thumbnail||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='>        </div>        <div class="tictac-att-ss-from-folder-date">            <div class="tictac-att-ss-from">                <p>',(p=c.fromName)?p=p.call(b,{hash:{},data:e}):(p=b.fromName,p=typeof p===s?p.apply(b):p),r+=t(p)+'</p>            </div>            <div class="tictac-att-ss-folderdate second-line">                <p>',(p=c.folderDate)?p=p.call(b,{hash:{},data:e}):(p=b.folderDate,p=typeof p===s?p.apply(b):p),r+=t(p)+'</p>            </div>        </div>        <div class="tictac-att-ss-subject-snippet">            <div class="tictac-att-ss-subject">                <p>',(p=c.subject)?p=p.call(b,{hash:{},data:e}):(p=b.subject,p=typeof p===s?p.apply(b):p),r+=t(p)+'</p>            </div>            <div class="tictac-att-ss-snippet second-line">                <p>',(p=c.snippet)?p=p.call(b,{hash:{},data:e}):(p=b.snippet,p=typeof p===s?p.apply(b):p),r+=t(p)+"</p>            </div>        </div>    </div></div>"}),a.Tictac.att.rollups.dragdrop=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<div id='uploader-droparea' class='tictac-att-compose-droparea'><div>Drag and drop attachments here</div></div>"}),a.Tictac.att.rollups.error=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'<a href="#" class="tictac-att-error-dismiss">Dismiss</a>'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i=this.escapeExpression,j=this;return h+='<span class="',(g=c.error_class)?g=g.call(b,{hash:{},data:e}):(g=b.error_class,g="function"==typeof g?g.apply(b):g),h+=i(g)+'">',(g=c.error_message)?g=g.call(b,{hash:{},data:e}):(g=b.error_message,g="function"==typeof g?g.apply(b):g),h+=i(g)+" ",g=c.if.call(b,b.show_dismiss,{hash:{},inverse:j.noop,fn:j.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="</span>"}),a.Tictac.att.rollups.slideshow=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"bidi"}function g(a,b){return'            <span class="tictac-att-ss-topbar-download tictac-att-ss-download-icon linkSpan" title="Save to">            </span>            <span class="tictac-att-ss-topbar-scanning">Scanning an attachment...</span>            <span class="tictac-att-ss-topbar-error">An error occurred while downloading.</span>            '}function h(a,b){var d,e="";return e+="    ",d=c.if.call(a,a.isDoc,{hash:{},inverse:u.program(8,j,b),fn:u.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e}function i(a,b){var d,e="";return e+='    <li class="tictac-att-ss-document" data-id="',(d=c.aid)?d=d.call(a,{hash:{},data:b}):(d=a.aid,d=typeof d===s?d.apply(a):d),e+=t(d)+'" style="">    </li>    '}function j(a,b){var d,e="";return e+='    <li class="tictac-att-ss-image" data-id="',(d=c.aid)?d=d.call(a,{hash:{},data:b}):(d=a.aid,d=typeof d===s?d.apply(a):d),e+=t(d)+'" style="">        </span>    </li>    '}function k(a,b){return"hidden"}function l(a,b){return"Next"}function m(a,b){return"Previous"}function n(a,b){return"has-thumb"}function o(a,b){var d,e="";return e+="style=\"background-image: url('",(d=c.thumbnailurl)?d=d.call(a,{hash:{},data:b}):(d=a.thumbnailurl,d=typeof d===s?d.apply(a):d),e+=t(d)+"')\" "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var p,q,r="",s="function",t=this.escapeExpression,u=this,v=c.blockHelperMissing;return r+=' <div class="tictac-att-slideshow ',q={hash:{},inverse:u.noop,fn:u.program(1,f,e),data:e},(p=c.isRTL)?p=p.call(b,q):(p=b.isRTL,p=typeof p===s?p.apply(b):p),c.isRTL||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='">    <div class="tictac-att-ss-topbar cf">        <div class="tictac-att-ss-topbar-left">            <span class="tictac-att-ss-topbar-filename"></span>                                    ',q={hash:{},inverse:u.program(3,g,e),fn:u.noop,data:e},(p=c.disableDownload)?p=p.call(b,q):(p=b.disableDownload,p=typeof p===s?p.apply(b):p),c.disableDownload||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='            <div class="tictac-att-ss-docview-toolbar">                <span class="tictac-att-ss-docview-zoom-out tictac-att-ss-ctrl-group linkSpan" title="Zoom Out"></span>                <span class="tictac-att-ss-docview-zoom-in linkSpan" title="Zoom In"></span>                <span class="tictac-att-ss-docview-page-prev tictac-att-ss-ctrl-group linkSpan" title="Previous"></span>                <span class="tictac-att-ss-docview-page-current"></span>                <span class="tictac-att-ss-docview-page-next linkSpan" title="Next"></span>            </div>        </div>        <div class="tictac-att-ss-topbar-right">            <span class="tictac-att-ss-close linkSpan" title="Close"></span>        </div>    </div>    <ul class="tictac-att-slideshow-thumbs">        ',q={hash:{},inverse:u.noop,fn:u.program(5,h,e),data:e},(p=c.attachments)?p=p.call(b,q):(p=b.attachments,p=typeof p===s?p.apply(b):p),c.attachments||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='    </ul>    <div class="tictac-att-ss-state">        <span class="tictac-att-ss-state-loading">        </span>        <span class="tictac-att-ss-state-loading-message">',(p=c.message)?p=p.call(b,{hash:{},data:e}):(p=b.message,p=typeof p===s?p.apply(b):p),r+=t(p)+'</span>        <div class="tictac-att-ss-state-error">            <span class="tictac-att-ss-state-error-msg">Sorry, we are unable to display this attachment.</span>            <span class="tictac-att-ss-state-error-retry">Try again.</span>        </div>    </div>    <div class="tictac-att-ss-controls ',q={hash:{},inverse:u.noop,fn:u.program(10,k,e),data:e},(p=c.is_single)?p=p.call(b,q):(p=b.is_single,p=typeof p===s?p.apply(b):p),c.is_single||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='">        <span class="tictac-att-ss-controls-prev" title="',q={hash:{},inverse:u.noop,fn:u.program(12,l,e),data:e},(p=c.isRTL)?p=p.call(b,q):(p=b.isRTL,p=typeof p===s?p.apply(b):p),c.isRTL||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),q={hash:{},inverse:u.program(14,m,e),fn:u.noop,data:e},(p=c.isRTL)?p=p.call(b,q):(p=b.isRTL,p=typeof p===s?p.apply(b):p),c.isRTL||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='">            <span class="tictac-att-ss-controls-prev-icon">                <span></span>            </span>        </span>        <span class="tictac-att-ss-controls-next" title="',q={hash:{},inverse:u.noop,fn:u.program(14,m,e),data:e},(p=c.isRTL)?p=p.call(b,q):(p=b.isRTL,p=typeof p===s?p.apply(b):p),c.isRTL||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),q={hash:{},inverse:u.program(12,l,e),fn:u.noop,data:e},(p=c.isRTL)?p=p.call(b,q):(p=b.isRTL,p=typeof p===s?p.apply(b):p),c.isRTL||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='">            <span class="tictac-att-ss-controls-next-icon">                <span></span>            </span>        </span>    </div>    <div class="tictac-att-ss-footer ',q={hash:{},inverse:u.noop,fn:u.program(10,k,e),data:e},(p=c.is_hidden)?p=p.call(b,q):(p=b.is_hidden,p=typeof p===s?p.apply(b):p),c.is_hidden||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='">        <div class="tictac-att-ss-photo ',q={hash:{},inverse:u.noop,fn:u.program(16,n,e),data:e},(p=c.has_thumbnail)?p=p.call(b,q):(p=b.has_thumbnail,p=typeof p===s?p.apply(b):p),c.has_thumbnail||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='" ',q={hash:{},inverse:u.noop,fn:u.program(18,o,e),data:e},(p=c.has_thumbnail)?p=p.call(b,q):(p=b.has_thumbnail,p=typeof p===s?p.apply(b):p),c.has_thumbnail||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='>        </div>        <div class="tictac-att-ss-from-folder-date">            <div class="tictac-att-ss-from">                <p>',(p=c.fromName)?p=p.call(b,{hash:{},data:e}):(p=b.fromName,p=typeof p===s?p.apply(b):p),r+=t(p)+'</p>            </div>            <div class="tictac-att-ss-folderdate second-line">                <p>',(p=c.folderDate)?p=p.call(b,{hash:{},data:e}):(p=b.folderDate,p=typeof p===s?p.apply(b):p),r+=t(p)+'</p>            </div>        </div>        <div class="tictac-att-ss-subject-snippet">            <div class="tictac-att-ss-subject">                <p>',(p=c.subject)?p=p.call(b,{hash:{},data:e}):(p=b.subject,p=typeof p===s?p.apply(b):p),r+=t(p)+'</p>            </div>            <div class="tictac-att-ss-snippet second-line">                <p>',(p=c.snippet)?p=p.call(b,{hash:{},data:e}):(p=b.snippet,p=typeof p===s?p.apply(b):p),r+=t(p)+"</p>            </div>        </div>    </div></div>"}),a.Tictac.att.rollups.slideshowattachment=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="    ",d=c.if.call(a,a.isDoc,{hash:{},inverse:m.program(4,h,b),fn:m.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e}function g(a,b){var d,e="";return e+='    <li class="tictac-att-ss-document" data-id="',(d=c.aid)?d=d.call(a,{hash:{},data:b}):(d=a.aid,d=typeof d===k?d.apply(a):d),e+=l(d)+'" style="">    </li>    '}function h(a,b){var d,e="";return e+='    <li class="tictac-att-ss-image" data-id="',(d=c.aid)?d=d.call(a,{hash:{},data:b}):(d=a.aid,d=typeof d===k?d.apply(a):d),e+=l(d)+'" style="">        </span>    </li>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="function",l=this.escapeExpression,m=this,n=c.blockHelperMissing;return j={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(i=c.attachments)?i=i.call(b,j):(i=b.attachments,i=typeof i===k?i.apply(b):i),c.attachments||(i=n.call(b,i,j)),i||0===i?i:""}),a.Tictac.att.rollups.slideshowmenu=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="download:single">        <a href="#">Save to my computer</a></li>    '}function g(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="dropbox:single">        <a href="#">Save to Dropbox</a></li>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k=this,l=c.blockHelperMissing;return j+='<ul class="tictac-att-attachment-menu-fileaction">    ',i={hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e},(h=c.save_to_computer)?h=h.call(b,i):(h=b.save_to_computer,h="function"==typeof h?h.apply(b):h),c.save_to_computer||(h=l.call(b,h,i)),(h||0===h)&&(j+=h),j+="    ",i={hash:{},inverse:k.noop,fn:k.program(3,g,e),data:e},(h=c.save_to_dropbox)?h=h.call(b,i):(h=b.save_to_dropbox,h="function"==typeof h?h.apply(b):h),c.save_to_dropbox||(h=l.call(b,h,i)),(h||0===h)&&(j+=h),j+="</ul>"}),a.Tictac.att.rollups.overlay=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='    <li class="tictac-att-filemeta disabled" data-action="none">      <a href="#">        <span class="',(d=c.error_class)?d=d.call(a,{hash:{},data:b}):(d=a.error_class,d=typeof d===r?d.apply(a):d),e+=s(d)+'">',(d=c.error_message)?d=d.call(a,{hash:{},data:b}):(d=a.error_message,d=typeof d===r?d.apply(a):d),e+=s(d)+"</span>      </a>    </li>    "}function g(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="remove"><a href="#">Cancel</a></li>    '}function h(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="view"><a href="#">View</a></li>    '}function i(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="download"><a href="#">Save to my computer</a></li>    '}function j(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="save_dropbox"><a href="#">Save to Dropbox</a></li>    '}function k(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="save_flickr"><a href="#">Save to Flickr</a></li>    '}function l(a,b){var d,e="";return e+='    <li class="tictac-att-attachment-menu-action"        data-action="edit"><a href="#">',(d=c.str_tictac_att_edit_file)?d=d.call(a,{hash:{},data:b}):(d=a.str_tictac_att_edit_file,d=typeof d===r?d.apply(a):d),e+=s(d)+"</a></li>    "}function m(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="remove"><a href="#">Remove</a></li>    '}function n(a,b){return'    <li class="tictac-att-attachment-menu-action"        data-action="retry"><a href="#">Retry</a></li>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var o,p,q="",r="function",s=this.escapeExpression,t=this,u=c.blockHelperMissing;return q+='<div class="tictac-att-attachment-menu">  <ul class="tictac-att-attachment-menu-filemeta">    ',p={hash:{},inverse:t.noop,fn:t.program(1,f,e),data:e},(o=c.has_error)?o=o.call(b,p):(o=b.has_error,o=typeof o===r?o.apply(b):o),c.has_error||(o=u.call(b,o,p)),(o||0===o)&&(q+=o),q+='    <li class="tictac-att-filemeta disabled" data-action="none">      <a href="#">        <span>&lrm;',(o=c.filename)?o=o.call(b,{hash:{},data:e}):(o=b.filename,o=typeof o===r?o.apply(b):o),q+=s(o)+" (",(o=c.filesize)?o=o.call(b,{hash:{},data:e}):(o=b.filesize,o=typeof o===r?o.apply(b):o),(o||0===o)&&(q+=o),q+=')</span>      </a>    </li>  </ul>  <ul class="tictac-att-attachment-menu-fileaction">    ',p={hash:{},inverse:t.noop,fn:t.program(3,g,e),data:e},(o=c.has_cancel)?o=o.call(b,p):(o=b.has_cancel,o=typeof o===r?o.apply(b):o),c.has_cancel||(o=u.call(b,o,p)),(o||0===o)&&(q+=o),q+="    ",p={hash:{},inverse:t.noop,fn:t.program(5,h,e),data:e},(o=c.has_view)?o=o.call(b,p):(o=b.has_view,o=typeof o===r?o.apply(b):o),c.has_view||(o=u.call(b,o,p)),(o||0===o)&&(q+=o),q+="    ",p={hash:{},inverse:t.noop,fn:t.program(7,i,e),data:e},(o=c.save_to_computer)?o=o.call(b,p):(o=b.save_to_computer,o=typeof o===r?o.apply(b):o),c.save_to_computer||(o=u.call(b,o,p)),(o||0===o)&&(q+=o),q+="    ",p={hash:{},inverse:t.noop,fn:t.program(9,j,e),data:e},(o=c.save_to_dropbox)?o=o.call(b,p):(o=b.save_to_dropbox,o=typeof o===r?o.apply(b):o),c.save_to_dropbox||(o=u.call(b,o,p)),(o||0===o)&&(q+=o),q+="    ",p={hash:{},inverse:t.noop,fn:t.program(11,k,e),data:e},(o=c.save_to_flickr)?o=o.call(b,p):(o=b.save_to_flickr,o=typeof o===r?o.apply(b):o),c.save_to_flickr||(o=u.call(b,o,p)),(o||0===o)&&(q+=o),q+="    ",p={hash:{},inverse:t.noop,fn:t.program(13,l,e),data:e},(o=c.has_edit)?o=o.call(b,p):(o=b.has_edit,o=typeof o===r?o.apply(b):o),c.has_edit||(o=u.call(b,o,p)),(o||0===o)&&(q+=o),q+="    ",p={hash:{},inverse:t.noop,fn:t.program(15,m,e),data:e},(o=c.has_remove)?o=o.call(b,p):(o=b.has_remove,o=typeof o===r?o.apply(b):o),c.has_remove||(o=u.call(b,o,p)),(o||0===o)&&(q+=o),q+="    ",p={hash:{},inverse:t.noop,fn:t.program(17,n,e),data:e},(o=c.has_retry)?o=o.call(b,p):(o=b.has_retry,o=typeof o===r?o.apply(b):o),c.has_retry||(o=u.call(b,o,p)),(o||0===o)&&(q+=o),q+="  </ul></div>"}),a.Tictac.att.rollups.docview=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h=this.escapeExpression;return g+='<div class="tictac-att-ss-docview-wrapper" style="position: relative; width: 600px; height: 600px; float: left; border: 1px solid #efefef">    <div id="tictac-att-ss-docview-doc-',(f=c.docid)?f=f.call(b,{hash:{},data:e}):(f=b.docid,f="function"==typeof f?f.apply(b):f),g+=h(f)+'" style="width: 600px; height: 600px;"></div></div>'}),a.Tictac.att.rollups.attachment_preview=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"has-thumb"}function g(a,b){var d;return(d=c.error_class)?d=d.call(a,{hash:{},data:b}):(d=a.error_class,d=typeof d===n?d.apply(a):d),o(d)}function h(a,b){return"att-removable"}function i(a,b){return'    <div class="tictac-att-photo-overlay">            <a tabindex="-1" role="button" aria-label="Download" href="#" data-action="save-att" class="tictac-att-show-dd-icon"><span class="download-txt">Download</span><i class="icon icon-chevron-down tictac-att-thumb-save-options" tabindex="-1" role="menu" aria-label="More save options"></i></a>        </div>    '}function j(a,b){var d,e=""
;return e+='        <div class="tictac-att-thumb-error-state" title="',(d=c.error_message)?d=d.call(a,{hash:{},data:b}):(d=a.error_message,d=typeof d===n?d.apply(a):d),e+=o(d)+'"></div>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l,m="",n="function",o=this.escapeExpression,p=this,q=c.blockHelperMissing;return m+='<li tabindex="-1" aria-selected="false" role="presentation" class="tictac-att-viewer tictac-att-thumb ',l={hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e},(k=c.has_thumbnail)?k=k.call(b,l):(k=b.has_thumbnail,k=typeof k===n?k.apply(b):k),c.has_thumbnail||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+=" doc-preview-att ",l={hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e},(k=c.has_error)?k=k.call(b,l):(k=b.has_error,k=typeof k===n?k.apply(b):k),c.has_error||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+=" ",l={hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e},(k=c.has_remove)?k=k.call(b,l):(k=b.has_remove,k=typeof k===n?k.apply(b):k),c.has_remove||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+=" ",l={hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e},(k=c.has_cancel)?k=k.call(b,l):(k=b.has_cancel,k=typeof k===n?k.apply(b):k),c.has_cancel||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+='" data-id="',(k=c.aid)?k=k.call(b,{hash:{},data:e}):(k=b.aid,k=typeof k===n?k.apply(b):k),m+=o(k)+'" data-type="',(k=c.filetype)?k=k.call(b,{hash:{},data:e}):(k=b.filetype,k=typeof k===n?k.apply(b):k),m+=o(k)+'" title="',(k=c.filename)?k=k.call(b,{hash:{},data:e}):(k=b.filename,k=typeof k===n?k.apply(b):k),m+=o(k)+" (",(k=c.filesize)?k=k.call(b,{hash:{},data:e}):(k=b.filesize,k=typeof k===n?k.apply(b):k),m+=o(k)+')" aria-label="',(k=c.filename)?k=k.call(b,{hash:{},data:e}):(k=b.filename,k=typeof k===n?k.apply(b):k),m+=o(k)+'">    <div class="',(k=c.file_icon_class)?k=k.call(b,{hash:{},data:e}):(k=b.file_icon_class,k=typeof k===n?k.apply(b):k),m+=o(k)+'">        <span class="disable-txt">No<br>Preview</span>    </div>    ',l={hash:{},inverse:p.noop,fn:p.program(7,i,e),data:e},(k=c.has_save_options)?k=k.call(b,l):(k=b.has_save_options,k=typeof k===n?k.apply(b):k),c.has_save_options||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+="    ",l={hash:{},inverse:p.noop,fn:p.program(9,j,e),data:e},(k=c.has_error)?k=k.call(b,l):(k=b.has_error,k=typeof k===n?k.apply(b):k),c.has_error||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+='        <div class="tictac-att-hover-remove tictac-att-remove" data-action="remove" role="button" aria-label="Remove selected" tabindex="-1"></div>    <div class="filename">        <span class="basename-cover"><span class="basename">',(k=c.filename_without_extension)?k=k.call(b,{hash:{},data:e}):(k=b.filename_without_extension,k=typeof k===n?k.apply(b):k),m+=o(k)+'</span></span>        <span class="fileextn">',(k=c.file_extension)?k=k.call(b,{hash:{},data:e}):(k=b.file_extension,k=typeof k===n?k.apply(b):k),m+=o(k)+"</span>    </div></li>"}),a.Tictac.att.rollups.tray=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"hidden"}function g(a,b){return"bidi"}function h(a,b){return"att-collapsed"}function i(a,b){return"att-compose"}function j(a,b){var d,e,g="";return g+='          <li role="presentation" tabindex="0" aria-label="',(d=c.tray_count)?d=d.call(a,{hash:{},data:b}):(d=a.tray_count,d=typeof d===N?d.apply(a):d),g+=P(d)+'" class="tictac-att-header-count ',e={hash:{},inverse:M.noop,fn:M.program(1,f,b),data:b},(d=c.is_single)?d=d.call(a,e):(d=a.is_single,d=typeof d===N?d.apply(a):d),c.is_single||(d=O.call(a,d,e)),(d||0===d)&&(g+=d),e={hash:{},inverse:M.noop,fn:M.program(10,k,b),data:b},(d=c.is_spam)?d=d.call(a,e):(d=a.is_spam,d=typeof d===N?d.apply(a):d),c.is_spam||(d=O.call(a,d,e)),(d||0===d)&&(g+=d),g+='">',(d=c.tray_count)?d=d.call(a,{hash:{},data:b}):(d=a.tray_count,d=typeof d===N?d.apply(a):d),g+=P(d)+"</li>        ",e={hash:{},inverse:M.noop,fn:M.program(12,l,b),data:b},(d=c.is_spam)?d=d.call(a,e):(d=a.is_spam,d=typeof d===N?d.apply(a):d),c.is_spam||(d=O.call(a,d,e)),(d||0===d)&&(g+=d),g+="        ",d=c.unless.call(a,a.is_spam,{hash:{},inverse:M.noop,fn:M.program(14,m,b),data:b}),(d||0===d)&&(g+=d),g+="    "}function k(a,b){return" hidden"}function l(a,b){return'            <li class="tictac-att-header-error-disable-download" role="presentation">                <div class="icon-alert icon tictact-att-icon-alert"></div>                Attachments in this email may contain harmful content and cannot be downloaded.            </li>            <li class="tictac-att-header-error-disable-download tictac-att-spam-learn-more" role="presentation">                <a role="button" aria-lable="Learn more" tabindex="0" title="Learn more" href="#">                    Learn more                </a>            </li>        '}function m(a,b){var d,e,f="";return f+="            ",e={hash:{},inverse:M.noop,fn:M.program(15,n,b),data:b},(d=c.has_viewable)?d=d.call(a,e):(d=a.has_viewable,d=typeof d===N?d.apply(a):d),c.has_viewable||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+="                        ",d=c.unless.call(a,a.is_single,{hash:{},inverse:M.noop,fn:M.program(18,p,b),data:b}),(d||0===d)&&(f+=d),f+="        "}function n(a,b){var d,e="";return e+="                ",d=c.unless.call(a,a.is_single,{hash:{},inverse:M.noop,fn:M.program(16,o,b),data:b}),(d||0===d)&&(e+=d),e+="            "}function o(a,b){return'                    <li class="tictac-att-header-view"><a href="#" aria-hidden="true" title="Click to view all attachments in slideshow">View all</a></li>                '}function p(a,b){return'                <li class="tictac-att-header-save-comp" role="presentation"><a tabindex="-1" href="#" role="presentation"><span role="button" tabindex="0" aria-label="Download all" class="tictac-att-header-save-message">Download all</span><i tabindex="0" role="menu" aria-label="More saving option" class="icon icon-chevron-down"></i></a></li>            '}function q(a,b){var d,e="";return e+='        <li class="tictac-att-header-count">',(d=c.tray_count)?d=d.call(a,{hash:{},data:b}):(d=a.tray_count,d=typeof d===N?d.apply(a):d),e+=P(d)+'</li>        <li class="tictac-att-header-size" data-hidden="true" data-display="error">',(d=c.tray_size)?d=d.call(a,{hash:{},data:b}):(d=a.tray_size,d=typeof d===N?d.apply(a):d),(d||0===d)&&(e+=d),e+='</li>        <li class="tictac-att-header-remove-all" data-display="error"><a role="button" aria-lable="Remove all" tabindex="0" title="Remove all" href="#">Remove all</a></li>    '}function r(a,b){return" disable"}function s(a,b){var d,e,f="";return f+="        ",e={hash:{},inverse:M.noop,fn:M.program(25,t,b),data:b},(d=c.att_thumbnails)?d=d.call(a,e):(d=a.att_thumbnails,d=typeof d===N?d.apply(a):d),c.att_thumbnails||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+="      "}function t(a,b){var d,e,f="";return f+='            <li tabindex="-1" aria-selected="false" role="presentation" class="tictac-att-viewer tictac-att-thumb ',e={hash:{},inverse:M.noop,fn:M.program(26,u,b),data:b},(d=c.has_thumbnail)?d=d.call(a,e):(d=a.has_thumbnail,d=typeof d===N?d.apply(a):d),c.has_thumbnail||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+=" doc-preview-att ",e={hash:{},inverse:M.noop,fn:M.program(28,v,b),data:b},(d=c.has_error)?d=d.call(a,e):(d=a.has_error,d=typeof d===N?d.apply(a):d),c.has_error||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+=" ",e={hash:{},inverse:M.noop,fn:M.program(30,w,b),data:b},(d=c.has_remove)?d=d.call(a,e):(d=a.has_remove,d=typeof d===N?d.apply(a):d),c.has_remove||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+=" ",e={hash:{},inverse:M.noop,fn:M.program(30,w,b),data:b},(d=c.has_cancel)?d=d.call(a,e):(d=a.has_cancel,d=typeof d===N?d.apply(a):d),c.has_cancel||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+='" data-id="',(d=c.aid)?d=d.call(a,{hash:{},data:b}):(d=a.aid,d=typeof d===N?d.apply(a):d),f+=P(d)+'" data-type="',(d=c.filetype)?d=d.call(a,{hash:{},data:b}):(d=a.filetype,d=typeof d===N?d.apply(a):d),f+=P(d)+'" title="',(d=c.filename)?d=d.call(a,{hash:{},data:b}):(d=a.filename,d=typeof d===N?d.apply(a):d),f+=P(d)+" (",(d=c.filesize)?d=d.call(a,{hash:{},data:b}):(d=a.filesize,d=typeof d===N?d.apply(a):d),f+=P(d)+')" aria-label="',(d=c.filename)?d=d.call(a,{hash:{},data:b}):(d=a.filename,d=typeof d===N?d.apply(a):d),f+=P(d)+'">    <div class="',(d=c.file_icon_class)?d=d.call(a,{hash:{},data:b}):(d=a.file_icon_class,d=typeof d===N?d.apply(a):d),f+=P(d)+'">        <span class="disable-txt">No<br>Preview</span>    </div>    ',e={hash:{},inverse:M.noop,fn:M.program(32,x,b),data:b},(d=c.has_save_options)?d=d.call(a,e):(d=a.has_save_options,d=typeof d===N?d.apply(a):d),c.has_save_options||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+="    ",e={hash:{},inverse:M.noop,fn:M.program(34,y,b),data:b},(d=c.has_error)?d=d.call(a,e):(d=a.has_error,d=typeof d===N?d.apply(a):d),c.has_error||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+='        <div class="tictac-att-hover-remove tictac-att-remove" data-action="remove" role="button" aria-label="Remove selected" tabindex="-1"></div>    <div class="filename">        <span class="basename-cover"><span class="basename">',(d=c.filename_without_extension)?d=d.call(a,{hash:{},data:b}):(d=a.filename_without_extension,d=typeof d===N?d.apply(a):d),f+=P(d)+'</span></span>        <span class="fileextn">',(d=c.file_extension)?d=d.call(a,{hash:{},data:b}):(d=a.file_extension,d=typeof d===N?d.apply(a):d),f+=P(d)+"</span>    </div></li>        "}function u(a,b){return"has-thumb"}function v(a,b){var d;return(d=c.error_class)?d=d.call(a,{hash:{},data:b}):(d=a.error_class,d=typeof d===N?d.apply(a):d),P(d)}function w(a,b){return"att-removable"}function x(a,b){return'    <div class="tictac-att-photo-overlay">            <a tabindex="-1" role="button" aria-label="Download" href="#" data-action="save-att" class="tictac-att-show-dd-icon"><span class="download-txt">Download</span><i class="icon icon-chevron-down tictac-att-thumb-save-options" tabindex="-1" role="menu" aria-label="More save options"></i></a>        </div>    '}function y(a,b){var d,e="";return e+='        <div class="tictac-att-thumb-error-state" title="',(d=c.error_message)?d=d.call(a,{hash:{},data:b}):(d=a.error_message,d=typeof d===N?d.apply(a):d),e+=P(d)+'"></div>    '}function z(a,b){var d,e,f="";return f+="        ",e={hash:{},inverse:M.noop,fn:M.program(37,A,b),data:b},(d=c.att_thumbnails)?d=d.call(a,e):(d=a.att_thumbnails,d=typeof d===N?d.apply(a):d),c.att_thumbnails||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+="      "}function A(a,b){var d,e,f="";return f+='            <li tabindex="-1" aria-selected="false" role="presentation" class="tictac-att-viewer tictac-att-thumb ',e={hash:{},inverse:M.noop,fn:M.program(26,u,b),data:b},(d=c.has_thumbnail)?d=d.call(a,e):(d=a.has_thumbnail,d=typeof d===N?d.apply(a):d),c.has_thumbnail||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+=" ",e={hash:{},inverse:M.noop,fn:M.program(28,v,b),data:b},(d=c.has_error)?d=d.call(a,e):(d=a.has_error,d=typeof d===N?d.apply(a):d),c.has_error||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+=" ",e={hash:{},inverse:M.noop,fn:M.program(30,w,b),data:b},(d=c.has_remove)?d=d.call(a,e):(d=a.has_remove,d=typeof d===N?d.apply(a):d),c.has_remove||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+=" ",e={hash:{},inverse:M.noop,fn:M.program(30,w,b),data:b},(d=c.has_cancel)?d=d.call(a,e):(d=a.has_cancel,d=typeof d===N?d.apply(a):d),c.has_cancel||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+='" ',e={hash:{},inverse:M.noop,fn:M.program(38,B,b),data:b},(d=c.has_thumbnail)?d=d.call(a,e):(d=a.has_thumbnail,d=typeof d===N?d.apply(a):d),c.has_thumbnail||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+=' data-id="',(d=c.aid)?d=d.call(a,{hash:{},data:b}):(d=a.aid,d=typeof d===N?d.apply(a):d),f+=P(d)+'" data-type="',(d=c.filetype)?d=d.call(a,{hash:{},data:b}):(d=a.filetype,d=typeof d===N?d.apply(a):d),f+=P(d)+'" title="',(d=c.filename)?d=d.call(a,{hash:{},data:b}):(d=a.filename,d=typeof d===N?d.apply(a):d),f+=P(d)+" (",(d=c.filesize)?d=d.call(a,{hash:{},data:b}):(d=a.filesize,d=typeof d===N?d.apply(a):d),f+=P(d)+')" aria-label="',(d=c.filename)?d=d.call(a,{hash:{},data:b}):(d=a.filename,d=typeof d===N?d.apply(a):d),f+=P(d)+'">    ',e={hash:{},inverse:M.noop,fn:M.program(40,C,b),data:b},(d=c.has_save_options)?d=d.call(a,e):(d=a.has_save_options,d=typeof d===N?d.apply(a):d),c.has_save_options||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+="    ",e={hash:{},inverse:M.noop,fn:M.program(34,y,b),data:b},(d=c.has_error)?d=d.call(a,e):(d=a.has_error,d=typeof d===N?d.apply(a):d),c.has_error||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+='        <div class="tictac-att-hover-remove tictac-att-remove" data-action="remove" role="button" aria-label="Remove selected" tabindex="-1"></div></li>        '}function B(a,b){return'style="background-image: url(https://s.yimg.com/tq/att/150126155129/img/default-at.png);" '}function C(a,b){return'    <div class="tictac-att-photo-overlay">        <a tabindex="-1" role="button" aria-label="Download" href="#" data-action="save-att" class="tictac-att-show-dd-icon">Download<i class="icon icon-chevron-down tictac-att-thumb-save-options" tabindex="-1" role="menu" aria-label="More save options"></i></a>    </div>    '}function D(a,b){var d,e,f="";return f+='        <li tabindex="-1" role="presentation" class="tictac-att-other ',e={hash:{},inverse:M.noop,fn:M.program(28,v,b),data:b},(d=c.has_error)?d=d.call(a,e):(d=a.has_error,d=typeof d===N?d.apply(a):d),c.has_error||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+=" ",e={hash:{},inverse:M.noop,fn:M.program(30,w,b),data:b},(d=c.has_remove)?d=d.call(a,e):(d=a.has_remove,d=typeof d===N?d.apply(a):d),c.has_remove||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+=" ",e={hash:{},inverse:M.noop,fn:M.program(30,w,b),data:b},(d=c.has_cancel)?d=d.call(a,e):(d=a.has_cancel,d=typeof d===N?d.apply(a):d),c.has_cancel||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+='" data-id="',(d=c.aid)?d=d.call(a,{hash:{},data:b}):(d=a.aid,d=typeof d===N?d.apply(a):d),f+=P(d)+'" data-type="',(d=c.filetype)?d=d.call(a,{hash:{},data:b}):(d=a.filetype,d=typeof d===N?d.apply(a):d),f+=P(d)+'" title="',(d=c.filename)?d=d.call(a,{hash:{},data:b}):(d=a.filename,d=typeof d===N?d.apply(a):d),f+=P(d)+" (",(d=c.filesize)?d=d.call(a,{hash:{},data:b}):(d=a.filesize,d=typeof d===N?d.apply(a):d),f+=P(d)+')">',e={hash:{},inverse:M.noop,fn:M.program(43,E,b),data:b},(d=c.has_error)?d=d.call(a,e):(d=a.has_error,d=typeof d===N?d.apply(a):d),c.has_error||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+='<div class="tictac-att-other-filename ',e={hash:{},inverse:M.noop,fn:M.program(45,F,b),data:b},(d=c.has_view)?d=d.call(a,e):(d=a.has_view,d=typeof d===N?d.apply(a):d),c.has_view||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+='"><div class="tictac-filename-without-type">',(d=c.filename_without_extension)?d=d.call(a,{hash:{},data:b}):(d=a.filename_without_extension,d=typeof d===N?d.apply(a):d),f+=P(d)+"</div><div>",(d=c.file_extension)?d=d.call(a,{hash:{},data:b}):(d=a.file_extension,d=typeof d===N?d.apply(a):d),f+=P(d)+'</div></div><div class="tictac-att-other-save-btn">    ',e={hash:{},inverse:M.noop,fn:M.program(47,G,b),data:b},(d=c.has_save_options)?d=d.call(a,e):(d=a.has_save_options,d=typeof d===N?d.apply(a):d),c.has_save_options||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),e={hash:{},inverse:M.noop,fn:M.program(49,H,b),data:b},(d=c.has_remove)?d=d.call(a,e):(d=a.has_remove,d=typeof d===N?d.apply(a):d),c.has_remove||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+="    ",e={hash:{},inverse:M.noop,fn:M.program(51,I,b),data:b},(d=c.has_view)?d=d.call(a,e):(d=a.has_view,d=typeof d===N?d.apply(a):d),c.has_view||(d=O.call(a,d,e)),(d||0===d)&&(f+=d),f+='</div><a href="#" role="button" aria-label="Remove selected" tabindex="-1" class="tictac-att-cancel-file-uploading tictac-att-remove hidden" data-action="remove"></a></li>      '}function E(a,b){var d,e="";return e+='<div class="tictac-att-thumb-error-state" title="',(d=c.error_message)?d=d.call(a,{hash:{},data:b}):(d=a.error_message,d=typeof d===N?d.apply(a):d),e+=P(d)+'"></div>'}function F(a,b){return"tictac-att-viewer tictac-att-other-view"}function G(a,b){return'<a tabindex="-1" role="button" aria-label="Download" href="#" data-action="save-att" class="tictac-att-show-dd-icon">Download<i class="icon icon-chevron-down tictac-att-thumb-save-options" tabindex="-1" role="menu" aria-label="More save options"></i></a>    '}function H(a,b){return'<a href="#" aria-label="Remove selected" tabindex="-1" class="tictac-att-remove" data-action="remove">Remove</a>'}function I(a,b){return'        <a href="#" tabindex="-1" data-action="view-att" class="tictac-att-viewer" title="Click to view attachment in slideshow" aria-hidden="true">View</a>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var J,K,L="",M=this,N="function",O=c.blockHelperMissing,P=this.escapeExpression;return L+='<div class="tictac-att white ',K={hash:{},inverse:M.program(1,f,e),fn:M.noop,data:e},(J=c.show_tray)?J=J.call(b,K):(J=b.show_tray,J=typeof J===N?J.apply(b):J),c.show_tray||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+=" ",K={hash:{},inverse:M.noop,fn:M.program(3,g,e),data:e},(J=c.isRTL)?J=J.call(b,K):(J=b.isRTL,J=typeof J===N?J.apply(b):J),c.isRTL||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+=" ",K={hash:{},inverse:M.noop,fn:M.program(5,h,e),data:e},(J=c.is_collapsed)?J=J.call(b,K):(J=b.is_collapsed,J=typeof J===N?J.apply(b):J),c.is_collapsed||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+=" ",K={hash:{},inverse:M.noop,fn:M.program(1,f,e),data:e},(J=c.is_hidden)?J=J.call(b,K):(J=b.is_hidden,J=typeof J===N?J.apply(b):J),c.is_hidden||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+=" ",K={hash:{},inverse:M.noop,fn:M.program(7,i,e),data:e},(J=c.is_compose)?J=J.call(b,K):(J=b.is_compose,J=typeof J===N?J.apply(b):J),c.is_compose||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+='">  <ul class="tictac-att-header cf" role="presentation">    <li class="tictac-att-header-spinner" role="presentation"></li>    <li class="tictac-att-header-error" role="presentation"></li>    ',K={hash:{},inverse:M.noop,fn:M.program(9,j,e),data:e},(J=c.is_read)?J=J.call(b,K):(J=b.is_read,J=typeof J===N?J.apply(b):J),c.is_read||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+="    ",K={hash:{},inverse:M.noop,fn:M.program(20,q,e),data:e},(J=c.is_compose)?J=J.call(b,K):(J=b.is_compose,J=typeof J===N?J.apply(b):J),c.is_compose||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+='  </ul>  <div class="tictac-att-thumb-cover">    <div class="tictac-att-scroll-left"><div></div></div>    <div class="tictac-att-scroll-right"><div></div></div>    <ul class="tictac-att-thumb-flow cf',K={hash:{},inverse:M.noop,fn:M.program(22,r,e),data:e},(J=c.is_spam)?J=J.call(b,K):(J=b.is_spam,J=typeof J===N?J.apply(b):J),c.is_spam||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+='" role="menu">      ',K={hash:{},inverse:M.noop,fn:M.program(24,s,e),data:e},(J=c.hasDocPreview)?J=J.call(b,K):(J=b.hasDocPreview,J=typeof J===N?J.apply(b):J),c.hasDocPreview||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+="      ",K={hash:{},inverse:M.program(36,z,e),fn:M.noop,data:e},(J=c.hasDocPreview)?J=J.call(b,K):(J=b.hasDocPreview,J=typeof J===N?J.apply(b):J),c.hasDocPreview||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+='    </ul>  </div>  <div class="tictac-att-files-cover"><ul class="tictac-att-thumb-flow" role="menu">      ',K={hash:{},inverse:M.noop,fn:M.program(42,D,e),data:e},(J=c.files)?J=J.call(b,K):(J=b.files,J=typeof J===N?J.apply(b):J),c.files||(J=O.call(b,J,K)),(J||0===J)&&(L+=J),L+="    </ul>    </div></div>"})},"1.0.0",{requires:["handlebars-base"]});YUI.add("tictac-att-strings",function(a){a.namespace("Tictac.att").strings={str_att_download_spam_learn_more_alert_text:"Attachments in emails marked as Spam may contain harmful content. To download attachments in this email, please move the email out of the Spam folder.",str_att_download_spam_learn_more_alert_title:"Attachments cannot be downloaded",str_generating_message:"Generating preview...",str_jump_page_hint:"Enter page number",str_tictac_att_attachment_plural:"{{num}} Attachments",str_tictac_att_attachments:"Attachments",str_tictac_att_attachment_singular:"1 Attachment",str_tictac_att_compose_generic_error:"An error occurred while uploading this file.",str_tictac_att_compose_generic_warning:"A warning occurred while uploading this file.",str_tictac_att_compose_header_size:"{{size}} of {{max_size}}",str_tictac_att_compose_named_virus_cleaned:"Norton AntiVirus found and cleaned a virus [{{virus_name}}]. This file can be sent.",str_tictac_att_compose_named_virus_not_cleaned:"Norton AntiVirus found a virus [{{virus_name}}] that could not be cleaned. This file will not be sent.",str_tictac_att_compose_no_send_plural:"{{num}} errors occurred while uploading.",str_tictac_att_compose_no_send_singular:"An error occurred while uploading.",str_tictac_att_compose_password_protected:"Norton AntiVirus was unable to scan this file. This file may be password protected. It will be sent.",str_tictac_att_compose_virus_cleaned:"Norton AntiVirus found and cleaned a virus. This file can be sent.",str_tictac_att_compose_virus_not_cleaned:"Norton AntiVirus found a virus that could not be cleaned. This file will not be sent.",str_tictac_att_compose_warning_plural:"{{num}} warnings occurred while uploading.",str_tictac_att_compose_warning_singular:"A warning occurred while uploading.",str_tictac_att_download_password_protection:"Norton AntiVirus was unable to scan this file. This file may be password protected. It was downloaded.",str_tictac_att_download_retry_network_error:"A network error occurred during download. Please check your connection and try again.",str_tictac_att_download_server_error:"A problem occurred while downloading your attachment. Please try again.",str_tictac_att_download_virus_detected_cleaned:"Norton AntiVirus detected and cleaned a virus. This file was downloaded.",str_tictac_att_download_virus_error:"We detected a virus with your attachment. It cannot be downloaded.",str_tictac_att_download_virus_named_detected_cleaned:"Norton AntiVirus detected and cleaned a virus [{{virus_name}}]. This file was downloaded.",str_tictac_att_download_virus_named_not_downloadable:"Norton AntiVirus detected a virus [{{virus_name}}]. This file was not downloaded.",str_tictac_att_download_virus_not_downloadable:"Norton AntiVirus detected a virus. This file was not downloaded.",str_tictac_att_download_virus_scan_incomplete:"An error occurred during virus scanning. Please try again.",str_tictac_att_file_download_fail_plural:"{{num}} errors occurred while downloading.",str_tictac_att_file_download_fail_singular:"An error occurred while downloading.",str_tictac_att_file_download_success_plural:"{{num}} files were downloaded.",str_tictac_att_file_download_success_singular:"A file was downloaded.",str_tictac_att_file_remove_all:"Remove all",str_tictac_att_header_save_all:"Download all",str_tictac_att_header_save_all_to_computer:"Save all to my computer",str_tictac_att_header_save_single:"Download attachment",str_tictac_att_norton_no_trans:"Norton AntiVirus",str_tictac_att_password_error:"Sorry, we are unable to display password-protected documents.",str_tictac_att_preview_session_expired:"Sorry, document preview session has expired.",str_tictac_att_scanning_attachments:"Scanning attachments...",str_tictac_att_size_bytes:"{{size}}B",str_tictac_att_size_gb:"{{size}}GB",str_tictac_att_size_kb:"{{size}}KB",str_tictac_att_size_mb:"{{size}}MB",str_tictac_att_slideshow_count:"{{pos}} of {{total}}",str_tictac_att_spinner_savingToCloud_plural:"Saving to Dropbox...",str_tictac_att_spinner_savingToCloud_singular:"Saving to Dropbox...",str_tictac_att_spinner_scanning_plural:"Scanning {{num}} attachments...",str_tictac_att_spinner_scanning_singular:"Scanning an attachment...",str_tictac_att_spinner_uploading_plural:"Adding attachments...",str_tictac_att_spinner_uploading_singular:"Adding an attachment...",str_tictac_att_state_error:"Sorry, we are unable to display this attachment.",last:null}},"1.0.0");YUI.add("tictac-att-slider",function(a){"use strict";function b(b){var c,d=this,e="marginLeft",f="tictac-att-overflow-left",g="tictac-att-overflow-right",h="tictac-att-scroll-left",i=a.Tictac.base.utils.transitionEndEventName();d._events=[],d.sliderConfig={container:null,node:null,scrollMargin:0,imgWidth:72,imgMargin:10,slideCount:3,clickTime:250,slideTime:150};for(c in b)b.hasOwnProperty(c)&&(d.sliderConfig[c]=b[c]);a.Tictac.base.isRTL&&(e="marginRight",f="tictac-att-overflow-right",g="tictac-att-overflow-left",h="tictac-att-scroll-right"),d.checkOverflow=function(a){var b,c,h,i,j=d.sliderConfig.container,k=d.sliderConfig.node,l=d.sliderConfig.scrollMargin;if(k.getDOMNode()){if(h=k.get("clientWidth"),b=j.get("clientWidth"),i=Math.round(parseInt(k.getStyle(e),10)),c=-1*(h-b+d.sliderConfig.scrollMargin),!a&&c>0&&i<l)return k.setStyle(e,l),d.checkOverflow(!0);if(!a&&i<c&&h+l>b)return k.setStyle(e,c),d.checkOverflow(!0);i<d.sliderConfig.scrollMargin?j.addClass(f):j.removeClass(f),h+2*d.sliderConfig.scrollMargin>b&&i>c?j.addClass(g):j.removeClass(g)}},function(){function a(a){var b,c,h,i=-1;return"left"===a&&(i=1),b=d.sliderConfig.slideCount*(d.sliderConfig.imgWidth+d.sliderConfig.imgMargin),c=parseInt(g.getStyle(e),10)+b*i,h=-1*(g.get("clientWidth")-f.get("clientWidth")+d.sliderConfig.scrollMargin),c>d.sliderConfig.scrollMargin?c=d.sliderConfig.scrollMargin:c<h&&(c=h),c!==h&&c!==d.sliderConfig.scrollMargin||(m=!1,l=!1),c}function b(){d.checkOverflow(),i&&j.removeEventListener(i,b),m||g.removeClass("scrolling")}function c(){m&&window.setTimeout(c,d.sliderConfig.slideTime-50),i&&j.addEventListener(i,b),d.sliderConfig.node.setStyle(e,a(k)),i||window.setTimeout(d.checkOverflow,0)}var f=d.sliderConfig.container,g=d.sliderConfig.node,j=g.getDOMNode(),k="right",l=!1,m=!1,n=f.all(".tictac-att-scroll-left, .tictac-att-scroll-right");d._events.push(n.on("mousedown",function(a){var b=a.target;k=b.hasClass(h)||b.ancestor("div").hasClass(h)?"left":"right",l=!0,m=!1,window.setTimeout(function(){l&&(g.addClass("scrolling"),m=!0,window.setTimeout(c,d.sliderConfig.slideTime-50))},200)}),n.on("mouseup",function(){l=!1,m?(g.removeClass("scrolling"),m=!1):(i&&j.addEventListener(i,b),d.sliderConfig.node.setStyle(e,a(k)),i||window.setTimeout(d.checkOverflow,0))}))}(),d.checkOverflow(),d.update=function(a){var b;for(b in a)a.hasOwnProperty(b)&&(d.sliderConfig[b]=a[b])},d.destroy=function(){a.Array.each(d._events,function(a){a.detach()})}}a.namespace("Tictac.att").Slider=b},"1.0.0",{requires:["tictac-base","tictac-base-utils"]});YUI.add("tictac-att-attachment-menu",function(a){"use strict";function b(){b.superclass.constructor.apply(this,arguments)}function c(a){return"."+d+b.NAME+(a?"-"+a:"")}var d="tictac-att-";b.NAME="attachment-menu",b.ATTRS={attachments:{validator:a.Lang.isObject,value:null}},a.extend(b,a.Widget,{bindUI:function(){function b(a){i=!0,f.fadeMenuTimeout&&(clearTimeout(f.fadeMenuTimeout),f.fadeMenuTimeout=null),f.hoverInTimeout&&clearTimeout(f.hoverInTimeout),f.hoverInTimeout=setTimeout(function(){i&&f._show(a)},500)}function d(a){i=!1,f.fadeMenuTimeout=setTimeout(function(){f.hide(a),f.fadeMenuTimeout=null},500)}function e(a){f.hide(a)}var f=this,g=f.get("contentBox"),h=g&&g.ancestor("#msg-preview",!0),i=!1;g&&(g.delegate&&g.delegate("hover",b,d,".tictac-att-thumb",f),f.evtHandles.push(a.delegate("mouseenter",b,a.one("body"),c(),f)),f.evtHandles.push(a.delegate("mouseleave",d,a.one("body"),c(),f)),h&&h.on("scroll",e))},destructor:function(){var b=this,c=b.get("contentBox");c&&c.detach&&(c.detach("hover",b._show,b),c.detach("hover",b.hide,b)),a.Array.each(b.evtHandles,function(a){a.detach()})},hide:function(a){var b=this,c=a.relatedTarget;b._menu&&b._menu.node&&!b._menu.node.contains(c)&&b._uiRemoveMenu()},initializer:function(){this.evtHandles=[]},isVisible:function(){return this._isVisible||!1},allowSimClick:function(){this._menu.node._node.click()},_getAttachmentObject:function(a){var b=this.get("attachments"),c=null;return b&&b.get&&(c=b.get(a)),c},_getMenuContent:function(b){var c="";return b&&b.getFileName&&(c=a.Tictac.att.rollups.overlay(b.getObject())),c},_show:function(a){var b,c,d,e=a.currentTarget,f=this;e&&e.test("li")&&(b=e.getAttribute("data-id"),(c=f._getAttachmentObject(b))&&(d=f._getMenuContent(c),f._attachmentObj=c,f._node=e,f._uiShowMenu(e,d),e.addClass("att-active"),f._activeNode=e))},_uiRemoveMenu:function(){var b=this,c=a.common.ui.MenuHelper;b._menu&&b._menu.node&&(b._menu.context.unplug(c),b._menu.node.remove(),b._menu.context=b._menu.node=null,b._activeNode&&b._activeNode.removeClass("att-active"))},_uiShowMenu:function(b,c){var d=this,e=a.common.ui.MenuHelper;b&&c&&(d._uiRemoveMenu(),d._menu={},d._menu.context=b,d._menu.node=a.Node.create(c),a.one("body").append(d._menu.node),e.create(b,{menu:d._menu.node},function(){d._menu.node.on("menuSelected",function(a){d.fire("item-selected",{action:a.dataAction,attachment:d._attachmentObj,node:d._activeNode})})}))},_menu:null}),a.namespace("Tictac.att").AttachmentMenu=b},"1.0.0",{requires:["common-ui-menu-helper","event-hover","node-base","widget"]});YUI.add("tictac-att-attachmentview",function(a){"use strict";var b={showError:function(b,c){var d,e=this;d=a.Tictac.att.attError(b,c&&c>1?{num:c}:null),e.notify(d.message,{fmt:d.cssClass,autoDismiss:!1})},hideError:function(a){return this._showError(!1),void 0===a||(a.halt(),!1)},notify:function(b,c){var d=this,e=d._getErrorNode(),f=a.Tictac.att.rollups.error,g=e.getData("noticeId");c=c||{},c.fmt=c.fmt||"has-info",c.autoDismiss=!a.Object.owns(c,"autoDismiss")||c.autoDismiss,a.Tictac.base.utils.log("Download notify: "+b),e.setContent(f({error_message:b,error_class:c.fmt,show_dismiss:!c.autoDismiss})),g=(g||1)+1,e.setData("noticeId",g),d._stopSpinning(),d._showError(!0),c.autoDismiss&&a.later(4e3,d,function(a){e.getData("noticeId")===g&&a===b&&d.hideError()},b)},_getSpinnerMsg:function(b,c){var d,e=a.Tictac.att.strings;return d=1===c[b]?"_singular":"_plural",a.Tictac.base.utils.subs(e["str_tictac_att_spinner_"+b+d],"num",c[b])},_updateSpinner:function(){var b,c,d=this,e=d._getArray();b=a.Array.reduce(e,{savingToCloud:0,uploading:0,scanning:0},function(b,c){return a.each(b,function(a,d){c.get(d)&&(b[d]=a+1)}),b}),a.some(["savingToCloud","uploading","scanning"],function(a){return!!b[a]&&(d.hideError(),d._startSpinning(),c=d._getSpinnerMsg(a,b),d._spinner.setContent(c),d._spinner.setAttribute("aria-label",c),d._spinner.setAttribute("tabindex",-1),d._spinner.focus(),!0)})||(d._spinner.setContent(""),d._spinner.removeAttribute("aria-label"),d._spinner.removeAttribute("tabindex"),d._stopSpinning(!0))},_updateStatus:function(b,c,d){var e=this,f=e._getCollection();a.Array.each(b,function(a){var b=f.get(a);f&&b.set(c,d)}),e._updateSpinner()},setStatus:function(a,b){this._updateStatus(a,b,!0)},clearStatus:function(a,b){this._updateStatus(a,b,!1)}};a.namespace("Tictac.att").AttachmentView=b});YUI.add("tictac-att-filter",function(a){"use strict";function b(a,c,d){switch(a){case"xlsx":case"excel":case"msexcel":case"x-dos_ms_excel":case"x-excel":case"x-ms-excel":case"x-msexcel":case"x-xls":case"vnd.ms-excel":case"vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"vnd.openxmlformats-officedocument.spreadsheetml.template":case"vnd.ms-excel.sheet.macroEnabled.12":case"vnd.ms-excel.template.macroEnabled.12":return"xls";case"pptx":case"vnd.ms-powerpoint":case"vnd.openxmlformats-officedocument.presentationml.presentation":case"vnd.openxmlformats-officedocument.presentationml.template":case"vnd.openxmlformats-officedocument.presentationml.slideshow":return"ppt";case"docx":case"dot":case"microsoft_word":case"mswor2c sc2":case"msword":case"rtf":case"vnd.framemaker":case"vnd.ms-word":case"vnd.msword":case"winword":case"word":case"x-dot":case"x-fm":case"x-framemaker":case"x-maker":case"x-msw6":case"x-msword":case"x-rtf":case"x-soffice":case"text/richtext":case"text/rtf":case"text/vnd.graphviz":case"zz-winassoc-dot":case"vnd.openxmlformats-officedocument.wordprocessingml.document":case"vnd.ms-word.document.macroEnabled.12":case"text/plain":case"application/text":case"rfc822":case"plain":case"text":return"doc";case"x-zip-compressed":case"x-compressed":case"zip":return"zip";case"pdf":case"acrobat":case"x-pdf":case"vnd.pdf":case"text/pdf":case"text/x-pdf":return"pdf";default:return d?c||"file":b(c,c,!0)}return"file"}function c(a,c){var d,e=a.split(".");return e.length>1&&(d=e[e.length-1]),b(c,d)}function d(b){var c,d={zip:["thumbnail-fileicon-zip","icon-compressed"],pdf:["thumbnail-fileicon-pdf","icon-pdf"],ppt:["thumbnail-fileicon-ppt","icon-ppt"],doc:["thumbnail-fileicon-doc","icon-doc"],xls:["thumbnail-fileicon-xls","icon-spreadsheet"],mp3:["thumbnail-fileicon-mp3","icon-music","disable-preview"],attachment:["thumbnail-fileicon-attachment","icon-attachment-big","disable-preview"],noImage:["tictac-att-icon-theme","icon-theme"]};return a.common.Utils.features.enabled("zipPreviewr")||d.zip.push("disable-preview"),c=d[b]||d.attachment,c.push("icon","thumbnail-attach-icon","thumbnail-file-icon"),c.join(" ")}function e(){return a.UA.chrome>=15||a.UA.gecko>=6||a.UA.safari>0||a.UA.ie>=9}var f={};(function(){return!!e()})()&&(f=a.Array.hash(["pdf","xls","doc","ppt"])),a.namespace("Tictac.att").filter={map:b,getFileTypeIcon:d,attachment:function(b,d){var e=this,g={};if(e.filter(b)){if(g.disposition=b.disposition,g.size=b.size,g.filename=b.filename,g.pid=b.partId,g.type=b.type,g.tnefId=b.tnefId,g.downloadable=!0,g.documentId=b.documentId,g.getAttachmentUrl=b.downloadUrl,g.downloadAllUrl=b.downloadAllUrl,g.getAttachmentUrlV3=b.downloadUrlV3||b.downloadUrl,g.textExtractionUrl=b.textExtractionUrl,g.mimetype=b.type+"/"+b.subtype,a.Tictac.base.utils.getVal(a,"Tictac.dropbox")&&(g.shareable=!0),g.filetype=c(b.filename,b.subtype),b.hasOwnProperty("thumbnailurl")&&null!==b.thumbnailurl&&"image"===b.type?(g.thumbnail=b.thumbnailurl,a.common.Utils.features.enabled("changeSizeInV3Thumbnail")&&g.thumbnail&&g.thumbnail.match(/ws\/v3/)?g.fullsize=a.common.Utils.replaceQueryString(g.thumbnail,{size:null,w:null,h:null}):g.fullsize=g.thumbnail+"&w=3000&h=3000",g.viewable=!0):a.common.Utils.features.enabled("docPreview")&&(g.viewable=!0,g.isDoc=!0),g.filetype in f&&(g.viewable=!0,g.isDoc=!0),d)for(var h in d)d.hasOwnProperty(h)&&(g[h]=d[h]);return g}},attachments:function(b,c){var d,e=this,f=[];return a.each(b,function(a){(d=e.attachment(a,c))&&f.push(d)}),f},isInlineImage:function(a){var b="inline"===a.disposition||!!a.referencedInline,c="image"===a.type;return b&&c},filter:function(a){return a.disposition="image"===a.type&&!0===a.referencedInline?"inline":a.disposition,"image"!==a.type||"image"===a.type&&!0===a.referencedInline&&a.size>=10240||"image"===a.type&&!a.referencedInline?a:void 0}}},"1.0.0",{requires:["cookie","mail-common-utils-features","common-utils"]});YUI.add("tictac-att-attachments",function(a){"use strict";function b(){this.data={},this.count=0}function c(a){var b=this;b.data={},b.update(a),b.data.aid||(b.data.aid=d()),c.superclass.constructor.apply(b,arguments)}var d=function(){var a=0;return function(){return++a}}();b.prototype={add:function(a){return this.data[a.getId()]=a,this.count++,this},remove:function(a){return!!this.data.hasOwnProperty(a)&&(delete this.data[a],this.count--,!0)},get:function(a){return!!this.data.hasOwnProperty(a)&&this.data[a]},getArray:function(a,b){var c=[];for(var d in this.data)this.data.hasOwnProperty(d)&&(b?c.push(this.data[d]):c.push(this.data[d].getObject(a)));return c},getFileArray:function(){var a,b=[];for(var c in this.data)if(this.data.hasOwnProperty(c)){if(a=this.data[c].getObject(),!a.viewable){b.push(a);continue}a.fullsize||b.push(a),a.downloadInfo=this.data[c].getObject({simple:!0})}return b},getImageArray:function(a){return this.getViewableArray(a,!0)},getPreviewableArray:function(a){return this.getViewableArray(a,!1)},getViewableArray:function(b,c){var d,e=[],f=0,g=0;for(var h in this.data)if(this.data.hasOwnProperty(h)){if(d=this.data[h].getObject(),a.Tictac.att.filter.isInlineImage(d))continue;if(!d.viewable)continue;if(c&&!d.fullsize)continue;d.downloadInfo=this.data[h].getObject({simple:!0}),e.push(d),void 0!==b&&b===this.data[h].getId()&&(f=g),g++}return void 0!==b?{attachments:e,position:f}:e},getSize:function(){var a,b=this,c=0;for(a in b.data)b.data.hasOwnProperty(a)&&(c+=b.data[a].getSize());return c},getCount:function(){return this.count}};var e=["jpg","jpeg","gif","png","bmp","tiff","tif","jif","jfif","jp2","jpx","j2k","j2c","pcd"];c.NAME="attachment",c.ATTRS={cancelable:{validator:a.Lang.isBoolean,value:!1},downloadable:{validator:a.Lang.isBoolean,value:!1},dropbox:{validator:a.Lang.isBoolean,value:!1},shareable:{validator:a.Lang.isBoolean,value:!1},editable:{validator:a.Lang.isBoolean,value:!1},removable:{validator:a.Lang.isBoolean,value:!1},inSpam:{validator:a.Lang.isBoolean,value:!1},retryable:{validator:a.Lang.isBoolean,value:!1},viewable:{validator:a.Lang.isBoolean,value:!1,getter:function(a){return a||!!this.get("thumbnail")}},scanning:{validator:a.Lang.isBoolean,value:!1},uploading:{validator:a.Lang.isBoolean,value:!1},savingToCloud:{validator:a.Lang.isBoolean,value:!1},filetype:{validator:a.Lang.isString,value:""},thumbnail:{validator:a.Lang.isString,value:""},error:{validator:a.Lang.isObject,value:null}},a.extend(c,a.Base,{getId:function(){return this.data.aid},setId:function(a){var b=this;return b.data.aid=a,b},update:function(a){var b,c=this;for(b in a)a.hasOwnProperty(b)&&(c.data[b]=a[b]);return c},getFileName:function(){var a=this;return a.data.hasOwnProperty("filename")?a.data.filename:""},getFilenameWithoutExtension:function(){var a=this;if(a.data.hasOwnProperty("filename")){var b=a.data.filename;return b.substr(0,b.lastIndexOf("."))||b}return""},getFileExtension:function(){var a=this;if(a.data.hasOwnProperty("filename")){var b=a.data.filename,c=b.lastIndexOf(".");return c>=0?b.substr(c):""}return""},getFileIconClass:function(){var b=this;return a.common.Utils.features.enabled("docPreview")&&!b.isImage()?a.Tictac.att.filter.getFileTypeIcon(b.get("filetype")):!a.common.Utils.features.enabled("docPreview")||b.get("thumbnail")&&!b.isInSpam()?"":a.Tictac.att.filter.getFileTypeIcon("noImage")},isCancelable:function(){return this.get("cancelable")},isDownloadable:function(){return this.get("downloadable")&&!this.get("inSpam")},isDropbox:function(){return this.get("dropbox")},isShareable:function(){return this.get("shareable")&&!this.get("inSpam")},isEditable:function(){return this.get("editable")},isRemovable:function(){return this.get("removable")},isRetryable:function(){return this.get("retryable")},isViewable:function(){return this.get("viewable")&&!this.get("inSpam")},isInSpam:function(){return this.get("inSpam")},isImage:function(){var b,c,d=this,f=d.get("filetype");return"image"===f||(b=d.getFileName().toLowerCase(),c=b.substring(b.lastIndexOf(".")+1),a.Array.indexOf(e,c)>-1)},hasError:function(){var a=this.get("error");return!(!a||!a.message)},getNode:function(){var b=this,c=".tictac-att-thumb-flow ";return c+=".tictac-att-thumb",c+='[data-id="'+b.getId()+'"]',b._node||(b._node=a.one(c)),b._node||(c=".tictac-att-thumb-flow ",c+=".tictac-att-other",c+='[data-id="'+b.getId()+'"]',b._node=a.one(c)),b._node},updateProperty:function(a,b){var c=this;a&&("error"===a&&null===b&&(b={}),c.set(a,b),c._renderItem())},_renderItem:function(){var b,c,d=this,e=d.getNode(),f=d.get("error"),g=a.common.Utils.features.enabled("docPreview"),h=d.get("thumbnail"),i=h||d.isImage()?a.Tictac.att.rollups.attachment:a.Tictac.att.rollups.fileattachment;if(g&&e)return void(f&&f.cssClass?e.addClass("has-error"):e.removeClass("has-error"));e&&(b=a.Node.create(i(d.getObject())),e.get("parentNode").insert(b,e),e.remove(),d._node=null,h&&!d.isInSpam()&&(c=new Image,c.onload=function(){b.setStyle("backgroundImage",'url("'+h+'")')},c.src=h))},getObject:function(b){var c,d=this,e=d.get("error"),f=d.hasError(),g=d.isDropbox();return b&&b.simple?(c={mid:d.data.mid,fid:d.data.fid,pid:d.data.pid,aid:d.data.aid,downloadUrlV3:d.data.getAttachmentUrlV3,downloadAllUrl:d.data.downloadAllUrl},void 0!==d.data.tnefId&&(c.tnefid=""+d.data.tnefId),c):(c=d.data,c.filename=a.Tictac.base.utils.deentitize(c.filename),c.filetype=d.get("filetype"),c.thumbnail=d.get("thumbnail"),d.get("thumbnail")?(c.has_thumbnail=!0,c.filetype="image",c.overlay=!1):c.overlay=!0,c.filetype&&(c.has_filetype=!0),c.filesize=a.Tictac.att.AttachmentTray.getPrettySize(d.getSize()),c.simplefilesize=a.Tictac.att.AttachmentTray.getPrettySize(d.getSize(),!0),c.has_cancel=d.isCancelable(),c.has_view=d.isViewable(),c.has_edit=d.isEditable(),c.has_remove=d.isRemovable(),c.has_retry=d.isRetryable(),c.save_to_computer=d.isDownloadable(),c.save_to_dropbox=d.isShareable(),c.filename_without_extension=a.Tictac.base.utils.deentitize(d.getFilenameWithoutExtension()),c.file_extension=d.getFileExtension().substr(0,5),c.has_save_options=d.isDownloadable()||d.isShareable()||!f&&!d.isInSpam(),c.has_error=f,c.is_dropbox=g,c.file_icon_class=d.getFileIconClass(),f?(c.error_message=e.message,c.error_class=e.cssClass,a.merge(c,e.menuSettings)):c)},getSize:function(){var a=this;return a.data.hasOwnProperty("size")?a.data.size:0}}),a.namespace("Tictac.att").Collection=b,a.namespace("Tictac.att").Attachment=c},"1.0.0",{requires:["base","tictac-att-attachment-tray","tictac-base-utils","tictac-att-filter"]});YUI.add("tictac-att-attachment-tray",function(a){"use strict";function b(){b.superclass.constructor.apply(this,arguments)}var c=a.Tictac.base.isRTL;b.NAME="attachment-tray",b.ATTRS={attachments:{validator:a.Lang.isObject,value:null},slideDuration:{value:.25},thumbSize:{value:150},thumbMargin:{value:10},defaultHeight:{value:"136px"},count:{value:0},imageCount:{value:0},size:{value:0},isRead:{value:!1},isCompose:{value:!1},hidden:{value:!1},isSpam:{value:!0},composeMaxSize:{value:26214400},composeMaxCount:{value:50},instanceId:{value:"tray"}},b.getPrettySize=function(b,c){var d=a.Tictac.base.utils.getPrettySize(b,c);return a.Tictac.base.utils.subs(a.Tictac.att.strings[d.label],"size",d.value)},a.extend(b,a.Widget,{renderUI:function(){var b,c=this,d=c.get("contentBox"),e=a.common.Utils.features.enabled("docPreview"),f=e?c.get("attachments").getPreviewableArray():c.get("attachments").getImageArray(),g=c.get("isSpam");d.append(a.Tictac.att.rollups.tray(c._getBaseMarkup())),f.length&&!g&&(b=d.all(".tictac-att-thumb-cover ul.tictac-att-thumb-flow li"),a.each(f,function(a,c){var d=new Image;d.onload=function(){b.item(c).setStyle("backgroundImage",'url("'+a.thumbnail+'")')},d.src=a.thumbnail})),c._tray=d.one(".tictac-att"),c._spinner=c._tray.one(".tictac-att-header-spinner"),c._resizeThumbList(),e&&c._fixFilenameOverflow()},bindUI:function(){var b,c,d,e,f=this,g=f.get("boundingBox"),h=a.Tictac.att.rollups,i=f.get("isSpam"),j=a.common.ui.MenuHelper,k=a.Node.create('<div class="tictac-att-attachment-menu optionMenu"></div>'),l=a.Node.create('<div class="tictac-att-attachment-menu optionMenu"></div>'),m=function(a){return"click"===a.type||"keydown"===a.type&&13===a.keyCode},n=function(a,b){a.setAttribute("tabindex",b),a.all("a").setAttribute("tabindex",b),a.one("i.icon-chevron-down ").setAttribute("tabindex",b)};a.one("body").append(k),a.one("body").append(l),f._menuNodeSaveTo=k,f._menuNodeSaveAllTo=l,f._events=f._events||[],f._events.push(g.delegate(["click","keydown"],function(a){var c=a.currentTarget.ancestor(".tictac-att-thumb")||a.currentTarget.ancestor(".tictac-att-other")||a.currentTarget.ancestor(".tictac-att").one(".tictac-att-other")||a.currentTarget.ancestor(".tictac-att").one(".tictac-att-thumb"),e=c.getData("id"),g=f.get("attachments").get(e);if(m(a))return d=g.getObject(),d.menuItems=f._getRegisteredSaveMenus(g),k.setHTML(h.downloadmenu(d)),j.create(a.currentTarget,{menu:k},function(){b=k.on("menuSelected",function(a){f.fire("menu-item-selected",{action:a.dataAction,attachment:g,node:c})})}),a.halt(),!1},".tictac-att-thumb-save-options")),f._events.push(g.delegate(["click","keydown"],function(a){var b=a.currentTarget.ancestor(".tictac-att-thumb")||a.currentTarget.ancestor(".tictac-att-other")||a.currentTarget.ancestor(".tictac-att").one(".tictac-att-other")||a.currentTarget.ancestor(".tictac-att").one(".tictac-att-thumb"),c=b.getData("id"),d=f.get("attachments").get(c);m(a)&&(f.fire("menu-item-selected",{action:"download",attachment:d,node:b}),a.halt())},'a[data-action="save-att"]')),f._events.push(g.delegate(["click","keydown"],function(b){function d(){var d=e.getVal(a,"Tictac.dropbox.controller");l.setHTML(h.downloadmenu({save_to_computer:!0,save_to_dropbox:!!d,multiple_files:!0,menuItems:f._getRegisteredSaveMenus(f.get("attachments").getArray())})),j.create(b.currentTarget,{menu:l},function(){c=l.on("menuSelected",function(a){f.fire(a.dataAction)})})}var e=a.Tictac.base.utils;if(m(b))return b.target.hasClass("icon-chevron-down")?e.hasTictacModule("tictac-dropbox")?a.use("tictac-dropbox-controller",function(){d()}):d():f.fire("download_all"),b.halt(),!1},".tictac-att-header-save-comp")),f._events.push(g.delegate(["click","keydown"],function(a){if(m(a)){a.halt();var b=a.currentTarget.getData("action"),c=a.currentTarget.ancestor(".tictac-att-thumb")||a.currentTarget.ancestor(".tictac-att-other"),d=c.getData("id"),e=f.get("attachments").get(d);return f.fire("menu-item-selected",{action:b,attachment:e,node:c}),!1}},".tictac-att-remove",f)),f._events.push(g.delegate("click",f._removeAll,".tictac-att-header-remove-all",f)),f._events.push(g.delegate("click",f._blockSpamLearnMore,".tictac-att-spam-learn-more",f)),f._events.push(g.delegate("click",f._viewAll,".tictac-att-header-view",f)),f._events.push(g.delegate("click",f.hideError,".tictac-att-error-dismiss",f)),f._events.push(a.on("windowresize",function(){f._uiUpdateTray()})),f._events.push(g.delegate("click",function(){f.fire("norton")},".tictac-att-norton-logo")),f._events.push(g.delegate(["focus","blur"],function(a){var b=a.target,c=b.ancestor(".tictac-att-photo-overlay"),d=b.ancestor("li"),e=d.hasClass("att-removable")?d.one(".tictac-att-hover-remove.tictac-att-remove"):null,f="blur"===a.type;if(c){if(f&&b.menu&&"none"!==b.menu.getMenuNode().getStyle("display"))return;c.setStyle("height",f?"0":"2rem")}e&&(e.setStyle("height",f?"0":"15px"),e.setStyle("width",f?"0":"15px"))},".tictac-att-photo-overlay .tictac-att-show-dd-icon,.tictac-att-photo-overlay .tiact-att-thumb-save-options")),f._events.push(g.delegate(["focus","blur"],function(a){var b=a.target,c=b.ancestor("li"),d=c.one(".tictac-att-photo-overlay"),e="blur"===a.type;d&&d.setStyle("height",e?"0":"2rem"),b.setStyle("height","0"),b.setStyle("width","0")},".tictac-att-hover-remove.tictac-att-remove")),f._events.push(g.delegate("keydown",function(a){var b,c=a.currentTarget,d=a.keyCode,e=!1,f=c.ancestor("div");38!==d&&40!==d||(a.halt(),e=38===d,b=e?c.previous(".tictac-att-thumb-flow li"):c.next(".tictac-att-thumb-flow li"),b||(!e&&f.hasClass("tictac-att-thumb-cover")?b=f.next(".tictac-att-files-cover").one("ul li"):e&&f.hasClass("tictac-att-files-cover")&&(b=f.previous(".tictac-att-thumb-cover").one("ul li:last-child"))),b&&(n(c,-1),c.hasClass("att-removable")&&c.one(".tictac-att-remove").setAttribute("tabindex",-1),n(b,0),b.hasClass("att-removable")&&b.one(".tictac-att-remove").setAttribute("tabindex",0),b.focus()))},".tictac-att-thumb-flow li")),(e=f._tray.one(".tictac-att-thumb-cover .tictac-att-thumb-flow li")||f._tray.one(".tictac-att-files-cover .tictac-att-thumb-flow li"))&&!i&&n(e,0)},syncUI:function(){var b=this,c=b._tray.one(".tictac-att-thumb-cover"),d=c.one(".tictac-att-thumb-flow");b._slider=new a.Tictac.att.Slider({container:c,node:d,scrollMargin:0,imgWidth:150,imgMargin:10,slideCount:3}),b._slider.checkOverflow()},destructor:function(){var b=this;b._attachmentMenu&&b._attachmentMenu.destroy(),b._slider&&b._slider.destroy(),b._menuNodeSaveTo&&b._menuNodeSaveTo.remove(!0),b._menuNodeSaveAllTo&&b._menuNodeSaveAllTo.remove(!0),a.Array.each(b._events,function(a){a.detach()})},initializer:function(){var a=this;a.set("count",a.get("attachments").getCount()),a.set("viewableCount",a.get("attachments").getViewableArray().length),a.set("imageCount",a.get("attachments").getImageArray().length),a.set("size",a.get("attachments").getSize())},hide:function(){var a=this;a.get("boundingBox").addClass("hidden"),a.set("hidden",!0),a._uiUpdateTray()},show:function(a){var b=this,c=b.get("boundingBox");c.removeClass("hidden"),b.set("hidden",!1),a&&c.scrollIntoView()},_getRegisteredSaveMenus:function(b){b.length||(b=[b]);var c=[],d=a.Tictac.att.saveMenu;return a.each(d,function(d){var e,f,g,h=b.length;if(d.types){for(e=0;e<h;e++)if(b[e].get&&b[e].get("filetype")?(f=b[e].get("filetype"),g=g=b[e].data?b[e].data.type:b[e].type):b[e].filetype&&(f=b[e].filetype,g=b[e].type),-1!==a.Array.indexOf(d.types,f)||-1!==a.Array.indexOf(d.types,g))return void c.push(d)}else c.push(d)}),c},addAttachment:function(b){var c,d=this,e=d.get("attachments"),f=a.Tictac.att.rollups,g=b.getObject();e.add(b),b.isImage()?(c=d._tray.one(".tictac-att-thumb-cover .tictac-att-thumb-flow"),g.has_thumbnail=!0,d.set("imageCount",d.get("imageCount")+1)):c=d._tray.one(".tictac-att-files-cover .tictac-att-thumb-flow"),c&&c.append(f.attachment(g)),d._uiUpdateTray()},removeAttachment:function(a){var b,c=this,d=c.get("attachments");b=c._tray.one('.tictac-att-thumb-flow li[data-id="'+a+'"]'),d.get(a).isImage()&&c.set("imageCount",c.get("imageCount")-1),b.remove(),d.remove(a),c._uiUpdateTray()},_resizeThumbList:function(){var b,c=this;if(b=c._tray.one(".tictac-att-thumb-flow")){if(a.common.Utils.features.enabled("composev3"))return void b.addClass("composeV3");b.setStyle("width",(c.get("thumbSize")+c.get("thumbMargin"))*c.get("imageCount")+"px")}c._slider&&c._slider.checkOverflow()},_fixFilenameOverflow:function(){var b,c,d,e=this,f=e._tray.all(".tictac-att-thumb-cover ul.tictac-att-thumb-flow li");a.each(f,function(a){b=a.get("region").width,c=a.one(".basename").get("region").width,d=a.one(".fileextn").get("region").width,c+d>=b&&(a.one(".basename-cover").setStyle("width",b-d),a.one(".basename").setStyle("width",b-d+5))})},_getComposeSizeString:function(){var b=this,c=a.Tictac.base.utils,d=a.Tictac.att.strings.str_tictac_att_compose_header_size,e=a.Tictac.att.AttachmentTray,f=e.getPrettySize(b.get("size")),g=e.getPrettySize(b.get("composeMaxSize"));return c.subs(d,{size:f,max_size:g})},_getCountString:function(){var b=this.get("attachments"),c=b.getFileArray().length+b.getImageArray().length,d=a.Tictac.att.strings,e=a.Tictac.base.utils;return 1===c?d.str_tictac_att_attachment_singular:e.subs(d.str_tictac_att_attachment_plural,"num",c)},_getViewableCountString:function(){var b=this.get("viewableCount"),c=a.Tictac.att.strings,d=a.Tictac.base.utils;return 1===b?c.str_tictac_att_attachment_singular:d.subs(c.str_tictac_att_attachment_plural,"num",b)},_isRead:function(){return!!this.get("isRead")},_isSpam:function(){return!!this.get("isSpam")},_isCompose:function(){return!!this.get("isCompose")},_getBaseMarkup:function(){var b=this,d=a.Tictac.att.AttachmentTray,e=b.get("attachments"),f=b._isSpam(),g=a.common.Utils.features.enabled("docPreview"),h=g?e.getPreviewableArray().length:e.getFileArray().length+e.getImageArray().length;return{tray_count:b._getCountString(),tray_size:d.getPrettySize(b.get("size")),is_spam:f,hasDocPreview:g,is_read:b._isRead(),is_compose:b._isCompose(),is_hidden:b.get("hidden"),isRTL:c,att_thumbnails:g?e.getPreviewableArray():e.getImageArray(),files:g?[]:e.getFileArray(),is_single:1===h,show_tray:!b._isRead()||h>0,has_viewable:e.getViewableArray().length>0,viewable_count:b._getViewableCountString()}},_uiUpdateTray:function(){var b,c,d,e=this,f=a.Tictac.att.strings,g=a.Tictac.att.AttachmentTray,h=e.get("attachments"),i=h.getCount(),j=e._tray.one(".tictac-att-header-remove-all a"),k=1===i?"":f.str_tictac_att_file_remove_all,l=e._tray.one(".tictac-att-header-count");e.set("count",i),e.set("size",h.getSize()),1===i?(j&&j.addClass("hidden"),l.addClass("hidden")):(l.removeClass("hidden"),j&&(j.removeClass("hidden"),j.setHTML(k)),l.setHTML(e._getCountString())),e._resizeThumbList(),b=e._tray.all(".tictac-att-header-size"),b&&(e._isCompose()?b.setContent(e._getComposeSizeString()):b.setContent(g.getPrettySize(e.get("size")))),c=e._tray.one(".tictac-att-header-att"),c&&c.setContent(e._getCountString()),(d=e._tray.one(".tictac-att-header-save-message"))&&d.setHTML(1===e.get("count")?f.str_tictac_att_header_save_single:f.str_tictac_att_header_save_all)},_removeAll:function(a){return this.fire("removeall"),a.halt(),!1},_blockSpamLearnMore:function(b){return a.use("common-ui-dialog-helper",function(a){var b={hd:a.Tictac.att.strings.str_att_download_spam_learn_more_alert_title,bd:a.Tictac.att.strings.str_att_download_spam_learn_more_alert_text,suppressRestoreFocus:!0},c=function(){};a.common.ui.DialogHelper.alert(b,{ok:{handler:c}})}),b.halt(),!1},_viewAll:function(a){return a.halt(),!1},_getErrorNode:function(){return this._tray.one(".tictac-att-header-error")},_showError:function(a){a?this._tray.addClass("att-error"):this._tray.removeClass("att-error")},_startSpinning:function(){this._tray.addClass("att-spinner")},_stopSpinning:function(a){this._tray.removeClass("att-spinner"),a&&this._uiUpdateTray()},_getArray:function(){return this.get("attachments").getArray(null,!0)},_getCollection:function(){return this.get("attachments")}}),a.mix(b.prototype,a.Tictac.att.AttachmentView),a.namespace("Tictac.att").AttachmentTray=b},"1.0.0",{requires:["widget","event-hover","handlebars-base","tictac-att-rollups","tictac-att-strings","tictac-base-utils","tictac-att-attachments","tictac-att-slider","tictac-att-attachment-menu","tictac-base-mailpreferences","tictac-att-attachmentview","mail-common-utils-features"]});YUI.add("tictac-att-attachment-error",function(a){"use strict";function b(a){var b={};return"download:virus_not_downloadable"===a&&(b={save_to_computer:!1,save_to_dropbox:!1,has_save_options:!1}),b}function c(a){var b="has-error";switch(a){case"tray:download_cleaned":case"tray:compose_warning":case"download:virus_detected_cleaned":case"download:password_protection":case"compose:virus_cleaned":case"compose:password_protection":case"compose:generic_warning":b="has-warning";break;case"tray:download_error":case"tray:compose_error":case"download:virus_not_downloadable":case"download:virus_scan_incomplete":case"download:retry_network_error":case"compose:virus_not_cleaned":case"compose:generic_error":b="has-error"}return b}function d(b,c){var d,e=a.Tictac.att.strings;switch(b){case"tray:download_cleaned":d=c&&c.num?"str_tictac_att_file_download_success_plural":"str_tictac_att_file_download_success_singular";break;case"tray:compose_error":d=c&&c.num&&1!==c.num?"str_tictac_att_compose_no_send_plural":"str_tictac_att_compose_no_send_singular";break;case"tray:compose_warning":d=c&&c.num&&1!==c.num?"str_tictac_att_compose_warning_plural":"str_tictac_att_compose_warning_singular";break;case"tray:download_error":d=c&&c.num&&1!==c.num?"str_tictac_att_file_download_fail_plural":"str_tictac_att_file_download_fail_singular";break;case"download:virus_not_downloadable":d=c&&c.virus_name?"str_tictac_att_download_virus_named_not_downloadable":"str_tictac_att_download_virus_not_downloadable";break;case"download:virus_scan_incomplete":d="str_tictac_att_download_virus_scan_incomplete";break;case"download:retry_network_error":d="str_tictac_att_download_retry_network_error";break;case"download:password_protection":d="str_tictac_att_download_password_protection";break;case"download:virus_detected_cleaned":d=c&&c.virus_name?"str_tictac_att_download_virus_named_detected_cleaned":"str_tictac_att_download_virus_detected_cleaned";break;case"compose:virus_cleaned":d=c&&c.virus_name?"str_tictac_att_compose_named_virus_cleaned":"str_tictac_att_compose_virus_cleaned";break;case"compose:virus_not_cleaned":d=c&&c.virus_name?"str_tictac_att_compose_named_virus_not_cleaned":"str_tictac_att_compose_virus_not_cleaned";break;case"compose:password_protection":d="str_tictac_att_compose_password_protected";break;case"compose:generic_error":d="str_tictac_att_compose_generic_error";break;case"compose:generic_warning":d="str_tictac_att_compose_generic_warning";break;default:d="str_tictac_att_file_download_fail_singular"}return e[d]?a.Tictac.base.utils.subs(e[d],c):null}a.namespace("Tictac.att").attError=function(a,e){return{message:d(a,e),cssClass:c(a),menuSettings:b(a)}}},"1.0.0",{requires:["tictac-base-utils","tictac-att-strings"]});YUI.add("tictac-att-downloader",function(a){"use strict";function b(b){return a.Array.map(b,function(a){return a.aid})}function c(a,b){var c,d=!1,e=!1;switch(a){case"download_av_internal_error":case"download_av_server_down":case"download_av_error":c="download:retry_network_error",d=!0;break;case"download_has_virus":case"download_has_virus_cant_clean":c="download:virus_not_downloadable",d=!0;break;case"download_not_scannable":c="download:password_protection",e=!0;break;case"download_cleaned":c="download:virus_detected_cleaned",e=!0;break;case"download_av_no_virus":break;default:d=!0,c="download:retry_network_error"}return{failed:d||e,error:d,warning:e,code:c,extras:{virus_name:b}}}function d(){var b=new Date,c=a.Tictac.att.strings.str_tictac_att_attachments;return c+="_"+b.getFullYear(),c+=b.getMonth()+1,c+=b.getDate()}function e(b,c,d){var e,f=d&&1===d.fullscan;return f&&(b+="&fullscan=1"),b=a.Tictac.base.mailIO.addReqId(b),e=document.createElement("iframe"),e.id="tictac-attachment-downloader",e.style.display="none",e.src=b,a.one("body").append(e),setTimeout(function(){e&&e.remove&&e.remove()},r),e}function f(b,c){function d(b,c){var f=b.downloadUrl.replace(/^https?:\/\/[\s\S]*yahoo\.com/,"")+"&giveurl=1";g+=1,a.io(f,{on:{success:function(c,d){var f,h;-1!==d.getResponseHeader("Content-Type").indexOf("application/json")?(f=a.Tictac.base.utils.parseJSON(d.responseText),h=f&&f.downloadUrl?f.downloadUrl:d.responseText):h=d.responseText,h?b.secureDownload={url:h}:(j=!0,b.secureDownload={error:c,res:d}),g-=1,e()},failure:function(a,f){if(g-=1,!c)return void d(b,!0);b.secureDownload={error:a,res:f},j=!0,e()}}})}function e(){for(var a=b.attachments;g<f&&h<a.length;)h+=1,d(a[h-1]);0===g&&h>=a.length&&c(j?"failed":"success",b)}var f=2,g=0,h=0,i=b.attachments,j=!1;s(i.length>0,"populateSecureDownloadURLs expected at least 1 att"),e()}function g(b,h,i,j,k){function l(c,d){var e,f,j,k;try{e=a.JSON.parse(d.response||d.responseText)}catch(b){return h("failed",{}),o.stat("download_error_json"),window.yui.fire("stat:feature_fail",{feature_group:"READ_ATTACH",message:"ATTACH_DOWNLOAD_FAILURE",visible:"yes",api:"GET_URL_JSON_PARSE"}),void a.fire("util:ymstats",{name:"download-tray-v2-fail",type:"fail_to_parse_vs_response"})}if(e&&e.error){if("Client.ClientRedirect.SessionIdReissue"===e.error.code&&!i)return f=e.error.detail.url,j=f.match(/[\&|\?]wssid=([^\&\#]+)/),k=j.length>1?j[1]:NeoConfig.wssid,NeoConfig.wssid=k,void g(b,h,!0);window.yui.fire("stat:webservice_fail",{feature_group:"READ_ATTACH",message:e.error.code,visible:"yes",api:"VirusScanAttachments"}),a.fire("util:ymstats",{name:"download-tray-v2-fail",type:e.error.code})}else a.fire("util:ymstats",{name:"download-tray-v2-fail",type:e.error.code}),window.yui.fire("stat:webservice_fail",{feature_group:"READ_ATTACH",message:"SERVER_ERROR_GENERAL",visible:"yes",api:"VirusScanAttachments"});o.stat("download_error_general",{status:e.error.code+": "+e.error.message}),h("failed",{})}function m(d,g){var i,l,m=a.JSON.parse(g.response||g.responseText).result,n=new Date,p={};l={errors:0,warnings:0},m.hasOwnProperty("downloadArchiveUrl")?i=m.downloadArchiveUrl:m.hasOwnProperty("attachInfoResult")&&m.attachInfoResult.length>0&&m.attachInfoResult[0].hasOwnProperty("downloadUrl")&&(i=m.attachInfoResult[0].downloadUrl),m&&m.attachInfoResult&&(p=a.Array.map(m.attachInfoResult,function(d,e){var f=c(d.errorString,d.virusFound?d.virusFound[0]:null);return f.error?(o.stat("download_success_error",{status:d.errorString}),window.yui.fire("stat:webservice_fail",{feature_group:"READ_ATTACH",message:f.code,visible:"yes",api:"VirusScanAttachments"})):(o.stat("download_success_success",{type:d.attachmentType+"/"+d.attachmentSubtype,size:Math.round(d.fileSize/1024/1024*10)/10}),window.yui.fire("stat:feature_complete",{feature_group:"READ_ATTACH",message:"ATTACH_DOWNLOAD_SUCCESS"})),f.warning&&o.stat("download_success_warning",{status:d.errorString}),f.error?l.errors++:f.warning&&l.warnings++,a.merge(f,{aid:b[e].aid,fileName:d.fileName,downloadUrl:d.downloadUrl||""})}),a.mix(l,{attachments:p})),j&&i?(e(i,b.length,k),h("success",l),a.fire("util:ymstats",{name:"download-tray-v2-pre-success"}),o.stat("download_success",{count:m.attachInfoResult.length},{unit:"ms",datum:n-t}),l.warnings>0&&o.stat("download_success_warnings",{count:m.attachInfoResult.length,status:l.warnings}),l.errors>0&&o.stat("download_success_errors",{count:m.attachInfoResult.length,status:l.errors})):(o.stat("download_success_nourl"),f(l,h))}var n,p=k&&k.appid,r=[window.location.protocol+"//",window.location.host,"/ws/mail/v2.0/jsonrpc?","appid="+(p||q||"YahooMailNeo"),"&m=VirusScanAttachments","&wssid="+NeoConfig.wssid,"&windowid="+NeoConfig.windowId,"&r="+(new Date).getTime()].join(""),s={method:"VirusScanAttachments",params:[{downloadInfo:b,archiveName:d(),archive:b.length>1}]},t=new Date;if(j=!!a.Lang.isUndefined(j)||j,k)for(n in k)k.hasOwnProperty(n)&&"appid"!==n&&(r+="&"+n+"="+k[n]);a.Tictac.base.mailIO.send(r,{data:a.JSON.stringify(s),method:"POST",headers:{"Content-Type":"application/json"},on:{success:m,failure:l}}),window.yui.fire("stat:feature_invoke",{feature_group:"READ_ATTACH",message:"ATTACH_DOWNLOAD"})}function h(b){var c,d,e=a.JSON.parse(atob(b.data.replace(/_/g,"/").replace(/-/g,"+"))),f=e.error,g=a.Tictac.att.strings;c="EC-4001"===f.code&&f.validationErrors&&f.validationErrors.join("").indexOf("virus")>=0,d=c?g.str_tictac_att_download_virus_error:g.str_tictac_att_download_server_error,a.common.ui.NotificationV2.notify(d,{type:"error",close:!0,customClass:"single-inline"}),a.fire("util:ymstats",{name:"download-tray-v3-fail",type:c?"virus":"fetch"}),o.stat("download_success_error",{status:c?"virus found":"fetch failed"})}function i(){var a=window.location.hostname;return"dev"===NeoConfig.mailEnv||"mail.yahoo.com"===a?"mg.mail.yahoo.com":a}function j(b){var c,d,f,g=a.common.Utils.guid(),j=a.common.Utils.features.enabled("getSimpleBody"),k=j&&b.length>1?b[0].downloadAllUrl:b[0].downloadUrlV3,l=i(),m="https://"+l+window.NeoConfig.scriptBase+"/iframemsg?id="+g+"&origin="+window.location.hostname;d=window.setTimeout(function(){a.fire("util:ymstats",{name:"download-tray-v3-success"}),o.stat("download_success_success",{type:"unknown",size:0}),c&&c.detach()},r),c=a.on("iframe-message",function(a){g===a.id&&(clearTimeout(d),h(a),c&&c.detach())}),k?(f=a.common.Utils.mergeQueryString(k,{error:m}),e(f)):(clearTimeout(d),o.stat("download_success_error",{status:"url-not-found"}),a.fire("util:ymstats",{name:"download-tray-v3-fail",type:"url-not-found"}))}function k(b,c,d,e){var f,g=b.get("attachments"),h=a.Tictac.att.attError;return"failed"===d?b.showError("tray:download_error",c.length):e.errors?b.showError("tray:download_error",e.errors):e.warnings&&b.showError("tray:download_cleaned",e.warnings),e.attachments?(a.Array.each(e.attachments,function(a){if(!g.get)return!0;f=g.get(a.aid),a.failed&&a.code?f.updateProperty("error",h(a.code,a.extras)):f.hasError()&&f.updateProperty("error",{})}),!0):(a.Array.each(c,function(a){if(!g.get)return!1;f=g.get(a.aid),f.updateProperty("error",h("download:retry_network_error"))}),!1)}function l(c,d,e){var f=b(d),h=a.common.Utils.features.enabled("UseDownloadUrlfrmGDM"),i=a.common.Utils.features.enabled("getSimpleBody");a.fire("util:ymstats",{name:"download-tray-start"}),h&&1===d.length||i&&d.length>=1?(a.fire("util:ymstats",{name:"download-tray-v3-start"}),j(d)):(a.fire("util:ymstats",{name:"download-tray-v2-start"}),c.setStatus(f,"scanning"),g(d,function(a,b){c.clearStatus(f,"scanning"),k(c,d,a,b),e&&e()}))}function m(a,c,d,e,f){var h=b(c);a&&a.setStatus(h,"scanning"),g(c,function(b,e){if(!a)return void d(b,e);a.clearStatus(h,"scanning"),f||void 0===f?k(a,c,b,e)?d&&d(b,e):a.showError("tray:download_error",c.length):d&&d(b,e)},!1,!1,e)}function n(a){a&&a.stat&&(o=a)}var o,p=a.common&&a.common.Utils,q=p&&p.settings&&p.settings.value("appid","YahooMailNeo")||"YahooMailNeo",r=1e4,s=a.Tictac.base.utils.verify;a.namespace("Tictac.att").downloader={download:l,getURLs:m,setStats:n,downloadAttachments:g}},"1.0.0",{requires:["array-extras","io","tictac-base-mail-io","node","tictac-att-strings","tictac-att-attachment-error","tictac-base-utils","mail-common-utils-settings","querystring-stringify-simple"]});YUI.add("comms-ui-envelope",function(B){var F=24,M=100,J=1000/F,G="progress-envelope",K=G+"-",C=["01","01","02","03","04","05","06","07","08","09","10","11","11","12","13","14","15","16","17","18","19","20","21","22","22","23","24","25","26","27","28","29","30","31","31","32","33","34","35","36","37","38","39","40","40","41","42","43","44","45","46","47","48","01","01","01","01","01","01"],A=0,H=C.length-1,L=K+C[A],D=F*M,I=0,E;E=function(N){var O=this;O.init();O.envelopeEl=B.Node.create('<div class="'+G+" "+O.prevClass+'"></div>');N.append(O.envelopeEl);};E.prototype={init:function(){var N=this;N.prevClass=L;N.frameIndex=A;N.isAnimating=false;N.framesAnimated=0;},start:function(){var O=this,N;if(O.isAnimating){return;}O.timer=B.later(J,null,function(){O.frameIndex++;if(O.frameIndex>H){O.frameIndex=A;}N=K+C[O.frameIndex];O.envelopeEl.replaceClass(O.prevClass,N);O.prevClass=N;O.framesAnimated++;if(O.framesAnimated%D===0){O.stop();}},{},true);O.isAnimating=true;},stop:function(){var N=this;if(N.timer){N.timer.cancel();N.envelopeEl.replaceClass(N.prevClass,L);N.init();}},destroy:function(){var N=this;N.stop();N.envelopeEl.remove(true);}};B.namespace("comms.ui");B.comms.ui.Envelope=E;B.namespace("mail.ui");B.mail.ui.Envelope=E;},"1.0.0",{requires:["env-indicator_css"]});"use strict";YUI.add("tictac-base-mailutils",function(a){var b={"att.net":!0,"bellsouth.net":!0,"attworld.com":!0,"sky.com":!0,"frontiernet.net":!0,"frontier.com":!0,"myfrontiermail.com":!0,"citilink.net":!0,"newnorth.net":!0,"epix.net":!0,"gvni.com":!0,"frontiernet.com":!0,"ctaz.com":!0,"ctaz.net":!0,"citilink.com":!0,"evansinet.com":!0,"globalvalleynetworks.com":!0,"xtra.co.nz":!0,"mymts.in":!0,"ameritech.net":!0,"btinternet.com":!0,"btopenworld.com":!0,"demobroadband.com":!0,"ovi.com":!0,"flash.net":!0,"nl.rogers.com":!0,"nvbell.net":!0,"pacbell.net":!0,"prodigy.net":!0,"rogers.com":!0,"sbcglobal.net":!0,"snet.net":!0,"swbell.net":!0,"talk21.com":!0,"verizon.net":!0,"wans.net":!0,"ymail.com":!0,"rocketmail.com":!0,"yahoo-inc.com":!0},c={ad:!0,ae:!0,af:!0,ag:!0,ai:!0,al:!0,am:!0,an:!0,ao:!0,aq:!0,ar:!0,as:!0,at:!0,au:!0,aw:!0,az:!0,ba:!0,bb:!0,bd:!0,be:!0,bf:!0,bg:!0,bh:!0,bi:!0,bj:!0,bm:!0,bn:!0,bo:!0,br:!0,bs:!0,bt:!0,bv:!0,bw:!0,by:!0,bz:!0,ca:!0,cc:!0,cf:!0,cg:!0,ch:!0,ci:!0,ck:!0,cl:!0,cm:!0,cn:!0,co:!0,cr:!0,cs:!0,cu:!0,cv:!0,cx:!0,cy:!0,cz:!0,de:!0,dj:!0,dk:!0,dm:!0,do:!0,dz:!0,ec:!0,ee:!0,eg:!0,eh:!0,es:!0,et:!0,fi:!0,fj:!0,fk:!0,fm:!0,fo:!0,fr:!0,fx:!0,ga:!0,gb:!0,gd:!0,ge:!0,gh:!0,gi:!0,gl:!0,gp:!0,gq:!0,gf:!0,gm:!0,gn:!0,gr:!0,gt:!0,gu:!0,gw:!0,gy:!0,hk:!0,hm:!0,hn:!0,hr:!0,ht:!0,hu:!0,id:!0,ie:!0,il:!0,in:!0,io:!0,iq:!0,ir:!0,is:!0,it:!0,jm:!0,jo:!0,jp:!0,ke:!0,kg:!0,kh:!0,ki:!0,km:!0,kn:!0,kp:!0,kr:!0,kw:!0,ky:!0,kz:!0,la:!0,lb:!0,lc:!0,li:!0,lk:!0,lr:!0,ls:!0,lt:!0,lu:!0,lv:!0,ly:!0,ma:!0,mc:!0,md:!0,mg:!0,mh:!0,ml:!0,mm:!0,mn:!0,mo:!0,mp:!0,mq:!0,mr:!0,ms:!0,mt:!0,mu:!0,mv:!0,mw:!0,mx:!0,my:!0,mz:!0,na:!0,nc:!0,ne:!0,nf:!0,ng:!0,ni:!0,nl:!0,no:!0,np:!0,nr:!0,nt:!0,nu:!0,nz:!0,om:!0,pa:!0,pe:!0,pf:!0,pg:!0,ph:!0,pk:!0,pl:!0,pm:!0,pn:!0,pt:!0,pr:!0,pw:!0,py:!0,qa:!0,re:!0,ro:!0,ru:!0,rw:!0,sa:!0,sb:!0,sc:!0,sd:!0,se:!0,sg:!0,sh:!0,si:!0,sj:!0,sk:!0,sl:!0,sm:!0,sn:!0,so:!0,sr:!0,st:!0,su:!0,sv:!0,sy:!0,sz:!0,tc:!0,td:!0,tf:!0,tg:!0,th:!0,tj:!0,tk:!0,tm:!0,tn:!0,to:!0,tp:!0,tr:!0,tt:!0,tv:!0,tw:!0,tz:!0,ua:!0,ug:!0,uk:!0,um:!0,us:!0,uy:!0,uz:!0,va:!0,vc:!0,ve:!0,vg:!0,vi:!0,vn:!0,vu:!0,wf:!0,ws:!0,ye:!0,yu:!0,za:!0,zm:!0,zr:!0,zw:!0},d={aero:!0,asia:!0,biz:!0,com:!0,edu:!0,gov:!0,info:!0,jobs:!0,mil:!0,mobi:!0,museum:!0,name:!0,net:!0,org:!0,co:!0};a.namespace("Tictac.base").mailutils={openMessage:function(a){var b=a.fid.replace?a.fid.replace("%2F","%5C").replace("%2f","%5c"):a.fid,c={fid:b,msg:{mid:a.mid,fid:b}};a&&a.name&&(c[a.name]=!0),window.yui.fire("openMessage",c)},rotateAds:function(b,c,d){var e={type:"a",name:"VISIBLE",evt:{sp:b,npv:!c,trace:d||"tictac"}};(window.yui||a).fire("darlaEvent",{action:e})},getYahooIdFromEmail:function(a){function e(a){var c,d=!1,f=-1;return!!a&&(!!b[a]||(c=a.split("."),d=c.length>2,d&&-1!==(f=a.indexOf("."))?(a=a.slice(f+1),e(a)):!!b[a]))}var f,g,h;if(h=a.toLowerCase().split("@"),f=h[0],g=h[1],e(g))f=a;else{if(!function(a){if(!a)return!1;var b=a.split(".");return"yahoo"===b[0]&&(!(b.length>3)&&(b.length>2&&c[b[2]]?d[b[1]]:2===b.length&&(d[b[1]]||c[b[1]])))}(g))return;"yahoo.cn"===g&&(f=a)}if(!(f.length<4||f.length>32))return f},isOutlook:function(a){if(a.indexOf("@outlook.")>-1||a.indexOf("@hotmail.com")>-1||a.indexOf("@live.com")>-1||a.indexOf("@msn.com")>-1)return!0},isAOL:function(a){if(a.indexOf("@aol.com")>-1)return!0},isGmail:function(a){if(a.indexOf("@gmail.com")>-1||a.indexOf("@google.com")>-1||a.indexOf("@googlemail.com")>-1)return!0},getFontFamilies:function(){var b=a.Tictac.base.strings,c=[],d=[{value:b.str_rte_font_arial_attr,name:b.str_rte_font_modern},{value:b.str_rte_font_verdana_attr,name:b.str_rte_font_modernwide},{value:b.str_rte_font_times_attr,name:b.str_rte_font_classic},{value:b.str_rte_font_bookman_attr,name:b.str_rte_font_classicwide},{value:b.str_rte_font_courier_attr,name:b.str_rte_font_courier},{value:b.str_rte_font_garamond_attr,name:b.str_rte_font_garamond},{value:b.str_rte_font_lucida_attr,name:b.str_rte_font_lucida}];return window.strings&&window.strings.str_cfg_intl_fonts&&(c=a.JSON.parse(window.strings.str_cfg_intl_fonts)),d.concat(c)},getFontFamiliesByFont:function(){var b=a.Tictac.base.strings,c={};return c[b.str_rte_font_modern]=b.str_rte_font_arial_attr,c[b.str_rte_font_modernwide]=b.str_rte_font_verdana_attr,c[b.str_rte_font_classic]=b.str_rte_font_times_attr,c[b.str_rte_font_classicwide]=b.str_rte_font_bookman_attr,c[b.str_rte_font_courier]=b.str_rte_font_courier_attr,c[b.str_rte_font_garamond]=b.str_rte_font_garamond_attr,c[b.str_rte_font_lucida]=b.str_rte_font_lucida_attr,c},isValidEmailAddress:function(a){return/^[A-Z0-9\.\_\-\+]+@([A-Z0-9\-]+\.)+[A-Z]{2,13}$/i.test(a)}}},"1.0.0",{requires:["tictac-base-strings","json-parse"]});YUI.add("tictac-att-slideshow",function(a){"use strict";function b(a){var c=this;b.superclass.constructor.apply(c,arguments),a.stats&&a.stats.stat&&(c.stats=a.stats),a.fetcher&&(c.fetcher=a.fetcher),c._timeoutObjects=[]}function c(b){var c=this;c.mouseTimeout=null,c.justHidden=!1,c.timeoutObj=null,this.start=function(){c.move(),c.justHidden=!1},this.clean=function(){this.stop(),this.timeoutObj&&this.timeoutObj.cancel()},this.stop=function(){c.mouseTimeout&&c.mouseTimeout.cancel(),c.mouseTimeout=null},this.move=function(d){var e;d&&"mousedown"===d.type&&d.target&&(e=a.one(".tictac-att-ss-docview-page-current input"),"INPUT"!==d.target.get("tagName")&&e&&e.blur()),c.justHidden||(c.justHidden=!1,c.mouseTimeout&&c.mouseTimeout.cancel(),b.onactive(),c.mouseTimeout=a.later(b.timeout,{},c.idled,[],!1))},this.idled=function(){b.onidle(),c.justHidden=!0,c.timeoutObj=a.later(500,{},function(){c.justHidden=!1},[],!1)}}var d,e,f=a.Tictac,g=f.base.isRTL,h=a.UA.ie<=9&&0!==a.UA.ie,i=10===a.UA.ie,j=a.Tictac.att.strings,k=a.Tictac.base.utils.transitionEndEventName();b.NAME="slideshow",b.ATTRS={attachments:{validator:a.Lang.isArray,value:null},position:{validator:a.Lang.isNumber,value:0},delay:{validator:a.Lang.isNumber,value:4e3},imgActive:{validator:a.Lang.isObject,value:{opacity:1}},imgInactive:{validator:a.Lang.isObject,value:{opacity:0}},duration:{validator:a.Lang.isNumber,value:.6},disableDownload:{validator:a.Lang.isBoolean,value:!1},easing:{validator:a.Lang.isString,value:"ease-in-out"},showDropboxLinK:{validator:a.Lang.isBoolean,value:!0}},a.extend(b,a.Widget,{renderUI:function(){var b=this,c=b.get("contentBox"),d=b.get("attachments");c.append(a.Tictac.att.rollups.slideshow_infinite({attachments:d,is_single:1===d.length,isRTL:g,isIE:h,disableDownload:b.get("disableDownload")})),b._slideshow=c.one(".tictac-att-slideshow"),b._spinner=a.one(".tictac-att-ss-topbar-scanning"),b._docviewToolbar=b._slideshow.one(".tictac-att-ss-docview-toolbar"),b._loadingSpinnerNode=b._slideshow.one(".tictac-att-ss-state-loading"),b._loadingSpinner=new a.comms.ui.Envelope(b._loadingSpinnerNode),b._errorNode=b._slideshow.one(".tictac-att-ss-state-error"),b._arrangeAttachments(),b.set("imageNodes",a.all(".tictac-att-ss-image")),b.set("documentNodes",a.all(".tictac-att-ss-doc")),b._hasRendered=!0},bindUI:function(){var b=this,c=b.get("contentBox"),d=a.Node.create('<div class="tictac-att-attachment-menu optionMenu"></div>');a.one("body").append(d),b._menuNodeSaveTo=d,b._events=[],b._events.push(c.one(".tictac-att-ss-footer").on("click",function(){var c=b.get("attachments"),d=b.get("position"),e=c[d],f=e.mid,g=e.fid;b.closeSlideshow(),a.Tictac.base.mailutils.openMessage({mid:f,fid:g})})),b._events.push(c.one(".tictac-att-ss-close").on("click",function(){b.closeSlideshow()})),b._events.push(c.one(".tictac-att-ss-controls-prev").on("click",function(){this.hasClass("att-ss-disabled")||(b.moveLeft(),b.stats.stat("slideshow_prev"))})),b._events.push(c.one(".tictac-att-ss-controls-next").on("click",function(){this.hasClass("att-ss-disabled")||(b.moveRight(),b.stats.stat("slideshow_next"))})),b._events.push(b._errorNode.one(".tictac-att-ss-state-error-retry").on("click",function(){b._loadAttachment(b.get("position"))})),b.get("disableDownload")||(b._events.push(c.delegate("click",b.hideError,".tictac-att-error-dismiss",b)),b._events.push(c.delegate("click",function(){var a=b.get("attachments"),c=b.get("position");b.fire("download:single",{data:a[c],pos:c}),b.stats.stat("slideshow_download_single")},".tictac-att-ss-topbar-download-single")),b._events.push(c.one(".tictac-att-ss-topbar-download").on("click",function(e){function f(){var e=a.Tictac.base.utils.getVal(a,"Tictac.dropbox.controller"),f=c.one(".tictac-att-ss-topbar-download");d.setHTML(a.Tictac.att.rollups.slideshowmenu({save_to_computer:!0,save_to_dropbox:!!e&&b.get("showDropboxLinK")})),a.common.ui.MenuHelper.create(f,{menu:d},function(){d.on("menuSelected",function(a){b.fire(a.dataAction,{data:b.get("attachments")[b.get("position")],pos:b.get("position"),callback:function(){b._setScanning(!1)}})})})}e.currentTarget.menu||(a.Tictac.base.utils.hasTictacModule("tictac-dropbox")?a.use("tictac-dropbox-controller",function(){f()}):f())}))),b._events.push(a.one(document.body).on("keydown",a.bind(function(a){var b=this;if(!b.get("boundingBox").hasClass("hidden"))switch(a.stopPropagation(),a.keyCode){case 37:g?b.moveRight():b.moveLeft();break;case 39:g?b.moveLeft():b.moveRight();break;case 27:return a.halt(),b.closeSlideshow(),!1}},b))),i||(b._events.push(c.on(["mousemove","mousedown","mousewheel","keypress"],b.mouseIdler.move)),b._events.push(c.delegate("hover",b.mouseIdler.stop,b.mouseIdler.start,".tictac-att-ss-controls")))},destructor:function(){var b=this,c=b.mouseIdler;c&&c.clean(),b._events&&a.each(b._events,function(a){a.detach()}),b._menuNodeSaveTo&&b._menuNodeSaveTo.remove(!0),b._timeoutObjects&&a.each(b._timeoutObjects,function(a){a.cancel()}),b.docManager&&b.docManager.cleanup(),b._loadingSpinner&&b._loadingSpinner.destroy(),b._dontListenForBackButton()},initializer:function(){var b=this,d=[],e=[],f=b.get("attachments");a.Array.each(f,function(a){"image"===a.type?d.push(a):e.push(a)}),b.set("attachments",d.concat(e));var g,h,i,j=function(){return a.one(".tictac-att-ss-active div")},k=function(){g=a.one(".tictac-att-slideshow-thumbs"),h=a.one(".tictac-att-ss-controls"),i=j()},l=function(a,b,c){var d=i&&i.ancestor()&&i.ancestor().hasClass("tictac-att-ss-active");g.setStyle("cursor",a),h.setStyle("display",b),(i=d?i:j())&&i.setStyle("overflow",c)};b.mouseIdler=new c({onidle:function(){g||k(),this.onidle=function(){b.useMouseIdler()&&l("none","none","hidden")},this.onidle()},onactive:function(){g||k(),this.onactive=a.throttle(function(){l("auto","block","auto")},250),this.onactive()},timeout:3e3})},useMouseIdler:function(){return!0},_doListenForBackButton:function(){function a(){b._dontListenForBackButton(),b.hide()}var b=this;"function"==typeof window.history.pushState&&(b._doBackButton=a,window.history.pushState(null,""),window.addEventListener("popstate",b._doBackButton,!1))},_dontListenForBackButton:function(){var a=this;a._doBackButton&&(window.removeEventListener("popstate",a._doBackButton,!1),a._doBackButton=null)},_getAttachmentObject:function(a){var b=this.get("attachments"),c=null;return b&&b.get&&(c=b.get(a)),c},_arrangeAttachments:function(){var a,b=this,c=b.get("position"),d=b.get("imgActive"),e=b.get("attachments");b._slideshow.all(".tictac-att-ss-active").removeClass("tictac-att-ss-active"),a=e[c].aid,b._preload(c),b._slideshow.one('li[data-id="'+a+'"]').setStyles(d).addClass("tictac-att-ss-active"),b._uiUpdateStatus()},_transition:function(b){function c(){k&&this.removeEventListener(k,c),this===e.getDOMNode()&&e.removeClass(i),this===d.getDOMNode()&&d.addClass(i)}var d,e,f=this,g=f.get("attachments"),h=f.get("position"),i="tictac-att-ss-active";return b>=0&&b<g.length&&(e=f._slideshow.one('li[data-id="'+g[h].aid+'"]'),d=f._slideshow.one('li[data-id="'+g[b].aid+'"]'),e&&(k&&e.getDOMNode().addEventListener(k,c),e.setStyle("opacity",f.get("imgInactive").opacity),k||window.setTimeout(a.bind(c,e.getDOMNode),0)),d&&(k&&d.getDOMNode().addEventListener(k,c),d.setStyle("opacity",f.get("imgActive").opacity),k||window.setTimeout(a.bind(c,d.getDOMNode),0)),f.set("position",b),!0)},_getAttSize:function(a){var b={};return a&&a.width&&a.height&&(b.maxWidth=a.width+"px",b.maxHeight=a.height+"px"),b},_setScanning:function(a){var b=this._slideshow;b&&(a?b.addClass("att-ss-scanning"):b.removeClass("att-ss-scanning"))},_move:function(a){var b=this,c=b.get("position"),d=!1;return"left"===a?d=b._transition(c-1):"right"===a&&(d=b._transition(c+1)),b._preload(b.get("position")),b._uiUpdateStatus(),d},_loadDoc:function(b,c,d){var e=this,g=a.one(".tictac-att-ss-docview-toolbar"),h=(new Date).getTime();a.use("tictac-att-docman",function(){e.docManager||(e.docManager=new f.att.DocManager({zoomIn:g.one(".tictac-att-ss-docview-zoom-in"),zoomOut:g.one(".tictac-att-ss-docview-zoom-out"),info:g.one(".tictac-att-ss-docview-page-current")},e._slideshow)),e.docManager.show(b,c,d,h)})},_loadAttachment:function(b,c){var d=this,e=d.get("attachments")[b],g=e.aid,h=d._slideshow.one('li[data-id="'+g+'"]'),i=d._slideshow.one(".tictac-att-ss-state-loading-message"),k={};e.hasLoaded||e.isLoading||e.isDoc&&c||(k={load:function(){e.hasLoaded=!0,e.hasError=!1,e.isLoading=!1,d._updateState(e,b),i.setStyle("display","none")},fail:function(a,c,g){e.hasLoaded=!1,e.hasError=!0,e.isLoading=!1,f.att.DocViewer&&g===f.att.DocViewer.PASSWORD_PROTECTED?a.isPasswordProtected=!0:f.att.DocViewer&&g===f.att.DocViewer.PREVIEW_SESSSION_EXPIRED&&(a.isPreviewSessionExpired=!0),d._updateState(e,b),i.setStyle("display","none")},beforeAttShow:function(c){e.isLoading=!0,d._timeoutObjects.push(a.later(300,d,function(){d._updateState(e,b),!0===c&&e.isLoading&&(i.setContent(j.str_generating_message),i.setStyle("display","inline"))},[],!1))}},e.isDoc?d._loadDoc(e,h,k):d._loadImage(e,h,k))},_updateState:function(a,b){var c,d=this;d.get("position")===b&&(a.isLoading?d._showSpinner():d._hideSpinner(),a.hasError&&!a.isLoading?(c=j.str_tictac_att_state_error,c=a.isPasswordProtected?j.str_tictac_att_password_error:c,c=a.isPreviewSessionExpired?j.str_tictac_att_preview_session_expired:c,d._showStateError(c,a.isPasswordProtected)):d._hideStateError(),a.isDoc&&a.hasLoaded?d._showDocToolbar():d._hideDocToolbar())},_showAttachment:function(a,b){var c=this;c._updateState(a,b),c.get("position")===b&&a.isDoc&&a.hasLoaded&&c.docManager.show(a)},_showDocToolbar:function(){this._docviewToolbar.show()},_hideDocToolbar:function(){this._docviewToolbar.hide()},_showSpinner:function(){var a=this._loadingSpinnerNode;a&&(a.show(),this._loadingSpinner.start())},_hideSpinner:function(){var a=this._loadingSpinnerNode;a&&(a.hide(),this._loadingSpinner.stop())},_showStateError:function(a,b){var c=this._errorNode,d=this._errorNode.one(".tictac-att-ss-state-error-retry");c.one(".tictac-att-ss-state-error-msg").set("text",a),c.show(),b?d.hide():d.show()},_hideStateError:function(){this._errorNode.hide()},_loadImage:function(a,b,c){function d(){c.load(),a.width=f.width,a.height=f.height,b.setStyles(g._getAttSize(a)),b.setStyle("backgroundImage","url("+a.fullsize+")")}function e(){c.fail()}var f,g=this;a.fullsize&&(c.beforeAttShow(),f=new Image,f.onload=d,f.onerror=e,f.src=a.fullsize)},_preload:function(b){var c,d=this,e=d.get("attachments"),f=b-2>0?b-2:0,g=b+2+1<e.length?b+2+1:e.length;for(d._loadAttachment(b),c=f;c<g;c++)c!==b&&d._loadAttachment(c,!0);g===e.length&&d.fetcher&&d.fetcher.hasMore()&&d.fetcher.fetch(function(b){var c;d.set("attachments",e.concat(b)),(c=d._slideshow&&d._slideshow.one(".tictac-att-slideshow-thumbs"))&&c.append(a.Tictac.att.rollups.slideshowattachment({attachments:b}))})},moveLeft:function(){return this._move("left")},moveRight:function(){return this._move("right")},show:function(a,b){var c,e,f=this,g=f.get("boundingBox"),h=a;if(g.one("#slideshow-scrollbar-style")||g.appendChild('<style id="slideshow-scrollbar-style">::-webkit-scrollbar-thumb { background: rgba(153, 153, 153, 0.75); }</style>'),b)for(c=f.get("attachments"),e=0;e<c.length;e++)if(c[e].aid===a){h=e;break}void 0!==a?(c=f.get("attachments"),f.set("position",h)):f.set("position",0),f.hasRendered()?f._arrangeAttachments():f.render(),g.removeClass("hidden"),f._doListenForBackButton(),window.yui&&(d=window.yui.mail.ui.Workspace.get("navKeys"),window.yui.mail.ui.Workspace.set("navKeys",null)),document.activeElement.blur()},closeSlideshow:function(){var b,c=this;c.docManager&&(b=c.docManager.viewers,a.each(b,function(a){c.docManager.stat("docview_ss_close",{count:a.countPagesSeen()})})),c._slideshow.all("li[data-id]").setStyle("opacity",""),c.hide()},hide:function(){var a=this,b=this.get("boundingBox"),c=b.one("#slideshow-scrollbar-style");b.addClass("hidden"),c&&c.remove&&c.remove(!0),a.mouseIdler&&a.mouseIdler.stop(),a._hideSpinner(),a.fire("hide"),!NeoConfig.backButtonFull&&a._doBackButton&&window.history.back(),a._dontListenForBackButton(),window.yui&&window.yui.mail.ui.Workspace.set("navKeys",d)},hasRendered:function(){return!!this._hasRendered},_uiUpdateStatus:function(){var b,c,d,e,f=this,g=f._slideshow.one,h=g(".tictac-att-ss-controls-prev"),i=g(".tictac-att-ss-controls-next"),j=g(".tictac-att-ss-topbar-filename"),k=g(".tictac-att-ss-footer"),l=g(".tictac-att-ss-photo"),m=g(".tictac-att-ss-from >p"),n=g(".tictac-att-ss-folderdate >p"),o=g(".tictac-att-ss-snippet >p"),p=g(".tictac-att-ss-subject >p");f._uiUpdateStatus=function(){b=f.get("position"),d=f.get("attachments"),c=d[b],f._showAttachment(c,b),j.setHTML(a.Escape.html(d[b].filename)),c.imageUrl?(l.setStyle("backgroundImage",'url("'+c.imageUrl+'")'),m.setHTML(a.Escape.html(c.fromStr)),e=c.folderStr||yui.mail.ui.common.StringUtils.getSystemFolderName(c.fid,c.fid),c.folderDate=e+" "+c.dateStr,n.setHTML(a.Escape.html(c.folderDate)),o.setHTML(a.Escape.html(c.snippet)),p.setHTML(a.Escape.html(c.subject)),g("ul.tictac-att-slideshow-thumbs").addClass("tictac-att-slideshow-has-footer"),k.removeClass("hidden")):k.addClass("hidden"),0===b?h.addClass("att-ss-disabled"):h.removeClass("att-ss-disabled"),b+1>=d.length?i.addClass("att-ss-disabled"):i.removeClass("att-ss-disabled")},f._uiUpdateStatus()},_getErrorNode:function(){return this._slideshow.one(".tictac-att-ss-topbar-error")},_showError:function(a){a?this._slideshow.addClass("att-ss-error"):this._slideshow.removeClass("att-ss-error")},_startSpinning:function(){this._setScanning(!0)},_stopSpinning:function(){this._setScanning(!1)},_getArray:function(){return e?e.getArray(null,!0):this._getCollection().getArray(null,!0)},_getCollection:function(){var b=this.get("attachments");return e&&e.getViewableArray().length>0&&e.getViewableArray().length===b.length&&b[0].aid===e.getViewableArray()[0].aid?e:(e=new a.Tictac.att.Collection,a.Array.each(b,function(b){e.add(new a.Tictac.att.Attachment(b))}),e)}}),a.mix(b.prototype,a.Tictac.att.AttachmentView),a.namespace("Tictac.att").Slideshow=b},"1.0.0",{requires:["array-extras","event-hover","event-mousewheel","node-base","widget","comms-ui-envelope","common-ui-menu-helper","tictac-att-attachments","tictac-att-attachmentview","tictac-att-rollups","tictac-att-strings","tictac-base","tictac-base-stats","tictac-base-utils","tictac-base-mailutils","yui-throttle","event-custom","escape"]});YUI.add("tictac-atm-strings",function(a){a.namespace("Tictac.atm").strings={str_view_attachments:"This message has attachments",str_view_attachment:"This message has an attachment",last:null}},"1.0.0");