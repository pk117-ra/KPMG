"use strict";YUI.add("tictac-base",function(a){function b(){var b=!0;try{/[\&|\?]dev=1/.test(window.location.href)&&(b=!1)}catch(b){a.Tictac.base.utils.log("tictac-base caught exception setting combo looking for dev=1:",b)}return b}function c(){return a.config.groups.tictacs.base}function d(){var b=a.config.groups.tictacs.base,c=b.split("/"),d=c[c.length-1];return b.replace(d,"zz")+"/combo?"}function e(){var b=a.config.groups.tictacs.base,c=b.split("/");return c[c.length-1]}function f(b,d,e){var f=c(),g=a.config.groups.tictacs.modules,h=g[d||"tictac-base"].path.split("/",3).join("/");return"/"!==b.substring(0,1)&&(h+="/"),e?f+h+b:h+b}function g(a){var b,c,d,e,f=!(NeoConfig.isAMT||NeoConfig.isInternal),g=window.location.search.substring(1).split("&"),h={},i=/[\&|\?]dev=1/.test(window.location.href)?"debug":"min";for(d=0,e=g.length;d<e;d++)c=g[d].split("="),2===c.length&&(f?c[0]!==a+"raw"&&c[0]!==a+"debug"&&c[0]!==a+"perf"||(h[c[0]]=c[1]):h[c[0]]=c[1]);return b=!!h[a+"perf"],i=b?"min":i,h[a+"raw"]?i="raw":h[a+"debug"]?i="debug":h[a+"min"]&&(i="min"),{enablePerf:b,filter:i,urlParams:h}}function h(f,g){g=void 0===g?b():g&&b();var h={combine:g,groups:{tictacs:{combine:g,comboBase:d(),base:c(),root:e(),modules:f}}};window.YUI_config=a.mix(window.YUI_config||{},h,!0,null,0,!0)}function i(f,g,h){h=void 0===h?b():h&&b();var i={combine:h,groups:{}};g.combine=h,g.comboBase=d(),g.base=c(),g.root=e(),i.groups[f]=g,window.YUI_config=a.mix(window.YUI_config||{},i,!0,null,0,!0)}function j(f,g,h){h=void 0===h?b():h&&b();var i={combine:h,groups:{}};g.combine=h,g.comboBase=d(),g.base=c(),g.root=e(),i.groups[f]=g,a.applyConfig(i)}function k(a){return m?a.replace(/\.css$/,"_bidi.css"):a}a.namespace("Tictac.base").loader=function(){};var l=window.NeoConfig&&window.NeoConfig.lang.substring(0,2),m="ar"===l||"he"===l||"ur"===l,n=g("base"),o=f("css/");i("tictacs",{filter:n.filter,modules:{"tictac-base-formatter":{path:f("js/formatter-min.js")},"tictac-base-utils":{path:f("js/utils-min.js"),requires:["tictac-base-formatter","json","tictac-base-strings"]},"tictac-base-stats":{path:f("js/stats-min.js"),requires:["ymma-stats","json-stringify"]},"tictac-base-strings":{path:f("js/strings/lang_"+window.NeoConfig.lang+"-min.js")},"tictac-base-rollups":{path:f("js/tictac-base-rollups_"+window.NeoConfig.lang+"-min.js"),requires:["handlebars-base"]},"tictac-base-mailutils":{path:f("js/mailutils-min.js"),requires:["tictac-base-strings","json-parse"]},"tictac-base-viewutils":{path:f("js/viewutils-min.js"),requires:["tictac-base-rollups","tictac-base-strings","comms-bidi-textentry","comms-intl-bidi","base-view-css"]},"tictac-base-view":{path:f("js/view-min.js"),requires:["node","base-view-css","tictac-base-viewutils","backbone"]},"tictac-base-dialogview":{path:f("js/dialogview-min.js"),requires:["tictac-base-view","tictac-base-viewutils","tictac-base-rollups","tictac-base-strings"]},"tictac-base-model":{path:f("js/model-min.js"),requires:["backbone"]},"tictac-base-mailpreferences":{path:f("js/mailpreferences-min.js"),requires:["mail-persist-meta-data","json","tictac-base-utils"]},"tictac-base-richselect":{path:f("js/richselect-min.js"),requires:["base","node","tictac-base-rollups","tictac-base-viewutils","tictac-richselect-css"]},"tictac-base-richmenu":{path:f("js/richmenu-min.js"),requires:["base","node","tictac-base-rollups","tictac-base-viewutils","tictac-richselect-css"]},"tictac-base-richtexteditor":{path:f("js/richtexteditor-min.js"),requires:["base","node","tictac-base-utils","tictac-base-rollups","tictac-base-richselect","escape","base-bidi","tictac-base-strings","tictac-base-viewutils","tictac-richtexteditor-css","tictac-base-mailutils"]},"tictac-base-batch-transport":{path:f("js/batchtransport-min.js"),requires:["tictac-base-utils","mail-common-utils-settings"]},"tictac-base-mail-io":{path:f("js/mailio-min.js"),requires:["tictac-base-utils","io","common-net-sessionmgr","common-net-error"]},"tictac-base-assist-container":{path:f("js/assistcontainer-min.js"),requires:["node","event-custom"]},"tictac-base-prefetch-store":{path:f("js/prefetchstore-min.js"),requires:["event-custom","node","tictac-base-mail-io"]}}}),i("base_css",{filter:n.filter,modules:{"base-view-css":{type:"css",path:k(o+"view.css")},"tictac-richselect-css":{type:"css",path:k(o+"richselect.css")},"tictac-richtexteditor-css":{type:"css",path:k(o+"rte.css")}}},!0),i("tictacs_lib",{modules:{"base-bidi":{path:f("lib/bidi.js")},underscore:{path:f("lib/underscore.js")},backbone:{path:f("lib/backbone.js"),requires:["underscore"]}}},!0),a.mix(a.Tictac.base,{isRTL:m,getCombo:b,getBase:c,getComboBase:d,getComboRoot:e,getAssetURL:f,getTictacVersion:g,defineModules:h,defineModuleGroup:i,addModuleGroup:j})},"1.0.0",{requires:["node","event"]});require=function r(t,e,a){function n(i,y){if(!e[i]){if(!t[i]){var c="function"==typeof require&&require;if(!y&&c)return c(i,!0);if(o)return o(i,!0);var p=new Error("Cannot find module '"+i+"'");throw p.code="MODULE_NOT_FOUND",p}var A=e[i]={exports:{}};t[i][0].call(A.exports,function(r){var e=t[i][1][r];return n(e||r)},A,A.exports,r,t,e,a)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)n(a[i]);return n}({1:[function(r,t,e){var a=".search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ui-token{border:1px solid #1C89FF;border-radius:3px;box-shadow:0 1px 1px #CDCDCD;-moz-box-sizing:border-box;box-sizing:border-box;color:#1C89FF;cursor:pointer;display:inline-block;line-height:0;max-width:150px;padding:1px 10px;position:relative;zoom:1}.ui-token:not(.ui-token-selected):active .icon-close,.ui-token:not(.ui-token-selected):focus .icon-close,.ui-token:not(.ui-token-selected):hover .icon-close{opacity:1}.ui-token.ui-token-selected{background-color:#D5E8FF;border-color:#1567BF;box-shadow:none;color:#1567BF}.ui-token.ui-token-destroyable{padding-right:28px}.ui-token.ui-token-type-people{max-width:220px}.ui-token.icon{font-family:inherit;font-size:inherit;padding-left:28px}.ui-token.icon::before{font-family:mail;line-height:1;position:absolute;top:50%;margin-top:-6px;left:10px}.ui-token.icon-folder{max-width:150px}.ui-token>*{display:inline-block;line-height:20px;vertical-align:middle}.ui-token .icon-close{font-size:1em;line-height:1;opacity:.4;padding:3px;position:absolute;top:50%;margin-top:-9px;right:7px;-webkit-transition:opacity .2s ease-in-out;-moz-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.ui-token .icon-close:active,.ui-token .icon-close:focus,.ui-token .icon-close:hover{opacity:1}.ui-token-thumbnail{background-position:center;background-repeat:no-repeat;background-size:cover;border-top-left-radius:2px;border-bottom-left-radius:2px;margin:0;padding:0;position:absolute;top:0;bottom:0;left:0;width:22px}.ui-token-thumbnail+*{padding-left:20px}.ui-token-text{-moz-box-sizing:border-box;box-sizing:border-box;display:block;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.typeahead-list>li{overflow:hidden}.typeahead-list>li:hover{background-color:#E5E5E5}.tokenized-typeahead{-moz-box-sizing:border-box;box-sizing:border-box;position:relative}.tokenized-typeahead .typeahead-list li:last-child,.tokenized-typeahead .typeahead-list li:last-child .menu-active-item{background-color:#fff}#Stencil .typeahead-input{margin:0;border:0;box-shadow:none;bottom:0;left:0;width:100%;padding:6px 26px 6px 10px;font-size:1.4rem;display:inline-block;position:relative;height:32px}#Stencil .typeahead-list{border-width:1px;border-width:0;border-style:solid;border-color:#e2e2e6;box-shadow:0 5px 10px rgba(0,0,0,.36);position:absolute;background-color:#fff;left:1px;right:1px;z-index:1;margin-top:0;top:100%}#Stencil .adv-search-container .typeahead-content-box{position:relative}#Stencil .lt .typeahead-input-container{border:0 none}#Stencil .typeahead-input-container{position:relative;overflow:hidden}#Stencil .lt .typeahead-list{border-width:1px 0}#Stencil .adv-search-container .typeahead-content-box{border:0;margin:4px 0}#Stencil .adv-search-container .typeahead-input{padding:6px;font-size:1.3rem;border:1px solid #CCC;border-radius:2px}#Stencil .typeahead-input-usertext{position:relative;margin:0;background-color:transparent}#Stencil .typeahead-input-usertext:-moz-placeholder,#Stencil .typeahead-input-usertext::-moz-placeholder,#Stencil .typeahead-input-usertext::-webkit-input-placeholder{color:silver}#Stencil .typeahead-input-usertext:-ms-input-placeholder{color:silver}#Stencil .typeahead-input-grayhint{position:absolute;top:0;left:0;margin:0;color:silver;-webkit-text-fill-color:silver;background-color:transparent}#Stencil .typeahead-input-grayhint[dir=rtl]{text-align:left!important}#Stencil .tokenized-typeahead-container{border:1px solid #7590F5;background-color:#fff}#Stencil .search-autocomplete .tokenized-typeahead-container{height:32px}.tokensSelected .typeahead-input{color:transparent;text-shadow:0 0 0 #000}.typeahead-token-list{display:inline;float:left;margin:4px 0 4px 4px!important;outline:0}.typeahead-token-list li{display:inline-block;vertical-align:middle}.typeahead-token-list li+li{margin-left:5px}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.search-menu{background-color:rgba(255,255,255,.95);color:#000;box-shadow:0 5px 10px rgba(0,0,0,.36);-moz-box-sizing:border-box;box-sizing:border-box;padding:10px 0;max-height:100%;overflow:auto;overflow-x:hidden;position:relative}.search-menu:hover .highlighted{background-color:rgba(255,255,255,.95)}.search-menu-group{border-bottom:1px solid #D8D8D8;padding-bottom:10px}.search-menu-group:first-child{margin-top:-10px;padding-top:10px}.search-menu-group:last-child{border-bottom:0;padding-bottom:0}.search-menu-group+.search-menu-group,.search-menu-group+.search-menuitem{margin-top:10px}.search-menu-group.search-menu-togglable .search-menuitem{position:relative;padding-left:40px}.search-menu-group.search-menu-togglable .icon{position:absolute;top:4px}.search-menu-group.search-menu-togglable .icon.icon-checkmark{left:16px}.search-menu-group-title{color:#AAA;font-weight:700}.search-menu-group-overflow{max-height:200px;overflow:auto;overflow-x:hidden;position:relative}.search-menu-group-title,.search-menuitem{line-height:2.5rem;padding:0 20px}.search-menuitem{-moz-box-sizing:border-box;box-sizing:border-box;cursor:pointer;max-width:300px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.search-menuitem:focus,.search-menuitem:hover:not([data-disabled]){background-color:rgba(0,0,0,.1)}.search-menuitem.highlighted{background-color:rgba(0,0,0,.15)}.search-menuitem:active{background-color:rgba(0,0,0,.15)}.search-menuitem.selected{font-weight:700}.search-menuitem.selected::before{content:\"\\e018\";font-family:mail;font-size:21px;font-weight:400;margin-top:-.55em;position:absolute;right:-webkit-calc(100% - 36px);right:-moz-calc(100% - 36px);right:calc(100% - 36px);top:50%}.search-menuitem[data-disabled]{color:#999;pointer-events:none}.search-menuitem kbd{float:right;font-family:inherit;margin-left:20px}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ui-onboarding{font-size:12px}.ui-onboarding.convstooltip .modal.tooltips-text{border:1px solid #0078ff;border-radius:3px}.ui-onboarding .modal::after,.ui-onboarding .modal::before{content:'';position:absolute;width:0;height:0;border:8px solid transparent}.ui-onboarding .modal.top-arrow::before{top:-16px;left:20px;border-bottom-color:#0078ff}.ui-onboarding .modal.top-arrow::after{top:-15px;left:20px;border-bottom-color:#fff}.ui-onboarding .modal.bottom-arrow::before{bottom:-16px;left:20px;border-top-color:#0078ff}.ui-onboarding .modal.bottom-arrow::after{bottom:-15px;left:20px;border-top-color:#fff}.ui-onboarding .modal.left-arrow::before{left:-16px;top:20px;border-right-color:#0078ff}.ui-onboarding .modal.left-arrow::after{left:-15px;top:20px;border-right-color:#fff}.ui-onboarding .modal.right-arrow::before{right:-16px;top:20px;border-left-color:#0078ff}.ui-onboarding .modal.right-arrow::after{right:-15px;top:20px;border-left-color:#fff}.ui-onboarding .hd{font-size:16px;font-weight:700;margin-bottom:7px}.ui-onboarding .bd{line-height:16px}.ui-onboarding .modal-bd{margin-top:13px}.ui-onboarding .modal.tooltips-text .modal-ft{padding:11px 20px 17px}.ui-onboarding .modal-ft .onboarding-btn{font-size:12px;line-height:12px;height:25px;padding:0;margin:0;min-width:50px;box-shadow:none}.parens::before{content:'('}.parens::after{content:')'}.label-text{color:#7f7f7f}.button-plain{background:none repeat scroll 0 0 transparent;border:none;margin:0;outline:0;padding:0}#Stencil .custom-select select{background-color:transparent!important}#Stencil .offscreen{position:absolute;left:-9999px}.negate-font-size{font-size:0}";r("./../../../jarvis/node_modules/cssify")(a,void 0,"/var/builds/workspace/49938-v3-package/BUILD_CONTAINER/container/label/DOCKER-LOW/app_root/artifacts/css/main.css"),t.exports=a},{"./../../../jarvis/node_modules/cssify":11}],2:[function(r,t,e){"use strict";var a={str_dateformat_AM_l10n:"AM",str_dateformat_PM_l10n:"PM",str_dayabbr_friday:"Fri",str_dayabbr_monday:"Mon",str_dayabbr_saturday:"Sat",str_dayabbr_sunday:"Sun",str_dayabbr_thursday:"Thu",str_dayabbr_tuesday:"Tue",str_dayabbr_wednesday:"Wed",str_day_friday:"Friday",str_day_monday:"Monday",str_day_saturday:"Saturday",str_day_sunday:"Sunday",str_day_thursday:"Thursday",str_day_tuesday:"Tuesday",str_day_wednesday:"Wednesday",str_folder_allmail:"All Mail",str_folder_drafts:"Drafts",str_folder_inbox:"Inbox",str_folder_sent:"Sent",str_folder_spam:"Spam",str_folder_trash:"Trash",str_monthabbr_april:"Apr",str_monthabbr_august:"Aug",str_monthabbr_december:"Dec",str_monthabbr_february:"Feb",str_monthabbr_january:"Jan",str_monthabbr_july:"Jul",str_monthabbr_june:"Jun",str_monthabbr_march:"Mar",str_monthabbr_may:"May",str_monthabbr_november:"Nov",str_monthabbr_october:"Oct",str_monthabbr_september:"Sep",str_month_april:"April",str_month_august:"August",str_month_december:"December",str_month_february:"February",str_month_january:"January",str_month_july:"July",str_month_june:"June",str_month_march:"March",str_month_may:"May",str_month_november:"November",str_month_october:"October",str_month_september:"September",str_suggestion_other_email_plural:"{{emailAddress}} & {{number}} more emails",str_suggestion_other_email_singular:"{{emailAddress}} & 1 more email",last:null};t.exports=a},{}],3:[function(r,t,e){"use strict";t.exports.leftJoiner=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0847\u0848\u084A-\u084E\u0850-\u0853\u0855\u08A0-\u08A9\u08AF\u08B0\u1807\u1820-\u1877\u1887-\u18A8\u18AA\uA840-\uA872]|\uD802[\uDEC0-\uDEC4\uDECD\uDED3-\uDEDC\uDEDE-\uDEE0\uDEEB-\uDEEE\uDF80\uDF82\uDF86-\uDF88\uDF8A\uDF8B\uDF8D\uDF90\uDFAD\uDFAE]/,t.exports.rightJoiner=/[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0855\u08A0-\u08AC\u08AE-\u08B2\u1807\u1820-\u1877\u1887-\u18A8\u18AA\uA840-\uA871]|\uD802[\uDEC0-\uDEC5\uDEC7\uDEC9\uDECA\uDECE-\uDED6\uDED8-\uDEE1\uDEE4\uDEEB-\uDEEF\uDF80-\uDF91\uDFA9-\uDFAE]/},{}],4:[function(r,t,e){"use strict";t.exports="[\0-@[-`{-©«-´¶-¹»-¿×÷ʹʺ˂-ˏ˒-˟˥-˭˯-ͯʹ͵;΄΅·϶҃-҉֊֍-֏֑-ׇֽֿׁׂׅׄ؀-؇؉؊،؎-ًؚ-٬ٰۖ-ۤۧ-ۭ۰-۹ܑܰ-݊ަ-ް߫-߳߶-߹ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ंऺ़ु-ै्॑-ॗॢॣঁ়ু-ৄ্ৢৣ৲৳৻ਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣ૱ଁ଼ିୁ-ୄ୍ୖୢୣஂீ்௳-௺ఀా-ీె-ైొ-్ౕౖౢౣ౸-౾ಁ಼ೌ್ೢೣഁു-ൄ്ൢൣ්ි-ුූัิ-ฺ฿็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷-༽ཱ-ཾྀ-྄྆྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፝-፟᎐-᎙᐀ ᚛᚜ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴឵ិ-ួំ៉-៓៛៝៰-៹᠀-᠎ᢩᤠ-ᤢᤧᤨᤲ᤹-᤻᥀᥄᥅᧞-᧿ᨘᨗᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩ᮫-ᮭ᯦ᯨᯩᯭᯯ-ᯱᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸᳹᷀-᷵᷼-᷿᾽᾿-῁῍-῏῝-῟῭-`´῾ -‍‐-\u2029 -⁤⁨⁪-⁰⁴-⁾₀-₎₠-₽⃐-⃰℀℁℃-℆℈℉℔№-℘℞-℣℥℧℩℮℺℻⅀-⅄⅊-⅍⅐-⅟↉←-⌵⍻-⎔⎖-⏺␀-␦⑀-⑊①-⒛⓪-⚫⚭-⟿⤀-⭳⭶-⮕⮘-⮹⮽-⯈⯊-⯑⳥-⳪⳯-⳱⳹-⳿⵿ⷠ-⹂⺀-⺙⺛-⻳⼀-⿕⿰-⿻　-〄〈-〠〪-〭〰〶〷〽-〿゙-゜゠・㇀-㇣㈝㈞㉐-㉟㉼-㉾㊱-㊿㋌-㋏㍷-㍺㏞㏟㏿䷀-䷿꒐-꓆꘍-꘏꙯-ꙿꚟ꛰꛱꜀-꜡ꞈꠂ꠆ꠋꠥꠦ꠨-꠫꠸꠹꡴-꡷꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱꨲꨵꨶꩃꩌꩼꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫬꫭ꫶ꯥꯨ꯭ﬞ﬩﴾﴿﷽︀-︙︠-︭︰-﹒﹔-﹦﹨-﹫\ufeff！-＠［-｀｛-･￠-￦￨-￮￹-�]|�[��-��-����-��-�]|�[��-����-��-�����-�]|�[�-�]|[��][��-��-��-��-����-��-��-�����-��-������-�����-��-�]|�[�-�������-������-�������-��]|�[�-��-�]|�[�-�]|�[���-�]|�[�-��-��-��-��-��-�]|�[������-�]|�[�-�]|�[��]|�[�-��-��-��-��-��-��-����-��-��-��-�]|�[�-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-�]"},{}],5:[function(r,t,e){"use strict";t.exports="[־׀׃׆א-תװ-״؈؋؍؛؜؞-ي٭-ٯٱ-ەۥۦۮۯۺ-܍܏ܐܒ-ܯݍ-ޥޱ߀-ߪߴߵߺࠀ-ࠕࠚࠤࠨ࠰-࠾ࡀ-ࡘ࡞ࢠ-ࢲ‏‫‮⁧יִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-﯁ﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼ﹰ-ﹴﹶ-ﻼ]|�[�-���-�����-��-��-��-��-���-�����-��-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-�]|�[�-��-�]|�[�-��-������-��-��������-�������������-��-��-��-���-��-��-��-��-�]"},{}],6:[function(r,t,e){"use strict";var a,n=r("react/addons");a=n.createClass({displayName:"OnboardingText",propTypes:{id:n.PropTypes.string,title:n.PropTypes.node,body:n.PropTypes.node,buttonText:n.PropTypes.node,dir:n.PropTypes.string,width:n.PropTypes.string},render:function(){var r=this.props,t={width:r.width+"px"},e={modal:!0,"tooltips-text":!0};return r.dir&&(e[r.dir+"-arrow"]=!0),n.createElement("div",{className:"convstooltip yui3-tooltips ui-onboarding",id:r.id},n.createElement("div",{className:n.addons.classSet(e),style:t},n.createElement("div",{className:"modal-bd"},n.createElement("div",{className:"hd"},r.title),n.createElement("div",{className:"bd"},r.body)),n.createElement("div",{className:"modal-ft"},n.createElement("button",{className:"btn left right default onboarding-btn","data-action":"ok"},r.buttonText))))}}),t.exports=a},{"react/addons":"react/addons"}],7:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash");a=n.createClass({displayName:"Input",propTypes:{value:n.PropTypes.string,disabled:n.PropTypes.bool,onFocus:n.PropTypes.func,onClick:n.PropTypes.func,onSelect:n.PropTypes.func,onChange:n.PropTypes.func,onKeyUp:n.PropTypes.func,onKeyDown:n.PropTypes.func,onKeyPress:n.PropTypes.func,onCompositionStart:n.PropTypes.func,onCompositionEnd:n.PropTypes.func},shouldComponentUpdate:function(r){return!o.isEqual(this.props,r)},getDefaultProps:function(){return{className:"",value:"",onCompositionStart:o.noop,onCompositionEnd:o.noop}},componentDidMount:function(){var r=this,t=r.getDOMNode();t.addEventListener("compositionstart",r.handleCompositionStart),t.addEventListener("compositionend",r.handleCompositionEnd)},componentWillUnmount:function(){var r=this,t=r.getDOMNode();t.removeEventListener("compositionstart",r.handleCompositionStart),t.removeEventListener("compositionend",r.handleCompositionEnd)},componentDidUpdate:function(){var r=this;r.props.dir||r.getDOMNode().removeAttribute("dir")},render:function(){var r=this.props;return n.createElement("input",{className:"typeahead-input "+r.className,spellCheck:"false",autoComplete:"false",placeholder:r.placeholder,disabled:!!r.disabled&&"disabled",value:r.value,onFocus:r.onFocus,onClick:r.onClick,onSelect:r.onSelect,onChange:this.handleChange,onKeyUp:r.onKeyUp,onKeyDown:r.onKeyDown,onKeyPress:r.onKeyPress,dir:r.dir})},handleChange:function(r){r.target.value!==this.props.value&&this.props.onChange(r)},handleCompositionStart:function(){this.props.onCompositionStart()},handleCompositionEnd:function(){this.props.onCompositionEnd()},setSelectionRange:function(r,t){this.getDOMNode().setSelectionRange(r,t)},getSelectionEnd:function(){return this.getDOMNode().selectionEnd},getSelectionStart:function(){return this.getDOMNode().selectionStart},focus:function(){this.getDOMNode().focus()},blur:function(){this.getDOMNode().blur()}}),t.exports=a},{lodash:"lodash","react/addons":"react/addons"}],8:[function(r,t,e){"use strict";t.exports=function(){function t(r){r=r||{},this.dispatcher=new e({}),this.actionContext=this.getActionContext(),this.componentContext=this.getComponentContext()}var e=r("dispatchr")();return t.prototype.getComponentContext=function(){var r=this;return{executeAction:function(t,e){t(r.actionContext,e,function(r){})},getStore:r.dispatcher.getStore.bind(r.dispatcher)}},t.prototype.getActionContext=function(){var r=this;return{dispatch:r.dispatcher.dispatch.bind(r.dispatcher),executeAction:function(t,e,a){t(r.actionContext,e,a)},getStore:r.dispatcher.getStore.bind(r.dispatcher)}},t.prototype.dehydrate=function(){return{dispatcher:this.dispatcher.dehydrate()}},t.prototype.rehydrate=function(r){this.dispatcher.rehydrate(r.dispatcher||{})},{registerStore:e.registerStore.bind(e),contextInst:new t}}},{dispatchr:"dispatchr"}],9:[function(r,t,e){"use strict";YUI.add("tictac-lib",function(){var t=r("lodash"),e=r("AppDispatcher"),a=r("FolderStore");r("../../artifacts/css/main.css"),[a].forEach(e.registerStore),t.templateSettings.escape=/{{([\s\S]+?)}}/g,t.templateSettings.interpolate=/{{{([\s\S]+?)}}}/g,window.React=window.React||r("react/addons"),window.ReactContext=window.ReactContext||r("./context.js")()},"1.0.0",{requires:["tictac-base"]})},{"../../artifacts/css/main.css":1,"./context.js":8,AppDispatcher:"AppDispatcher",FolderStore:"FolderStore",lodash:"lodash","react/addons":"react/addons"}],10:[function(r,t,e){"use strict";var a={findJavaScriptIndexEndForUTF8ByteCount:function(r,t,e){var a,n,o=r;for(a=e;a<t.length&&o>0;a+=1)n=t.charCodeAt(a),o-=n<128?1:n<2048?2:3;return 0===o?a:-1},getNextResponsePartInfo:function(r,t){for(var e,a,n;r.indexOf("\r\n",t)===t;)t+=2;return e=r.indexOf("\r\n",t),a=r.substring(t,e),n=parseInt(a,16),{startIndex:e,endIndex:this.findJavaScriptIndexEndForUTF8ByteCount(n,r,e+2)}},parse:function(r,t){for(var e,a=t||0,n=[];a<r.length-2&&(e=this.getNextResponsePartInfo(r,a),-1!==e.endIndex);)n.push(e),a=e.endIndex;return{lastStartIndex:a,data:n.map(function(t){return r.substring(t.startIndex,t.endIndex)}).map(function(r){return JSON.parse(r)})}}};t.exports=a},{}],11:[function(r,t,e){function a(r,t,e){var a=r.getElementById(t);if(a)e(a);else{var n=r.getElementsByTagName("head")[0];a=r.createElement("style"),a.id=t,e(a),n.appendChild(a)}return a}t.exports=function(r,t,e){var n=t||document;if(n.createStyleSheet){var o=n.createStyleSheet();return o.cssText=r,o.ownerNode}return a(n,e,function(t){t.styleSheet?t.styleSheet.cssText=r:t.innerHTML=r})},t.exports.byUrl=function(r){if(document.createStyleSheet)return document.createStyleSheet(r).ownerNode;var t=document.getElementsByTagName("head")[0],e=document.createElement("link");return e.rel="stylesheet",e.href=r,t.appendChild(e),e}},{}],12:[function(r,t,e){"function"==typeof Object.create?t.exports=function(r,t){r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(r,t){r.super_=t;var e=function(){};e.prototype=t.prototype,r.prototype=new e,r.prototype.constructor=r}},{}],13:[function(r,t,e){(function(r){!function(a){function n(r){throw new RangeError(F[r])}function o(r,t){for(var e=r.length,a=[];e--;)a[e]=t(r[e]);return a}function i(r,t){var e=r.split("@"),a="";return e.length>1&&(a=e[0]+"@",r=e[1]),r=r.replace(E,"."),a+o(r.split("."),t).join(".")}function y(r){for(var t,e,a=[],n=0,o=r.length;n<o;)t=r.charCodeAt(n++),t>=55296&&t<=56319&&n<o?(e=r.charCodeAt(n++),56320==(64512&e)?a.push(((1023&t)<<10)+(1023&e)+65536):(a.push(t),n--)):a.push(t);return a}function c(r){return o(r,function(r){var t="";return r>65535&&(r-=65536,t+=I(r>>>10&1023|55296),r=56320|1023&r),t+=I(r)}).join("")}function p(r){return r-48<10?r-22:r-65<26?r-65:r-97<26?r-97:k}function A(r,t){return r+22+75*(r<26)-((0!=t)<<5)}function v(r,t,e){var a=0;for(r=e?H(r/w):r>>1,r+=H(r/t);r>G*x>>1;a+=k)r=H(r/G);return H(a+(G+1)*r/(r+q))}function f(r){var t,e,a,o,i,y,A,f,l,s,u=[],h=r.length,b=0,d=z,j=P;for(e=r.lastIndexOf(B),e<0&&(e=0),a=0;a<e;++a)r.charCodeAt(a)>=128&&n("not-basic"),u.push(r.charCodeAt(a));for(o=e>0?e+1:0;o<h;){for(i=b,y=1,A=k;o>=h&&n("invalid-input"),f=p(r.charCodeAt(o++)),(f>=k||f>H((g-b)/y))&&n("overflow"),b+=f*y,l=A<=j?m:A>=j+x?x:A-j,!(f<l);A+=k)s=k-l,y>H(g/s)&&n("overflow"),y*=s;t=u.length+1,j=v(b-i,t,0==i),H(b/t)>g-d&&n("overflow"),d+=H(b/t),b%=t,u.splice(b++,0,d)}return c(u)}function l(r){var t,e,a,o,i,c,p,f,l,s,u,h,b,d,j,O=[];for(r=y(r),h=r.length,t=z,e=0,i=P,c=0;c<h;++c)(u=r[c])<128&&O.push(I(u));for(a=o=O.length,o&&O.push(B);a<h;){for(p=g,c=0;c<h;++c)(u=r[c])>=t&&u<p&&(p=u);for(b=a+1,p-t>H((g-e)/b)&&n("overflow"),e+=(p-t)*b,t=p,c=0;c<h;++c)if(u=r[c],u<t&&++e>g&&n("overflow"),u==t){for(f=e,l=k;s=l<=i?m:l>=i+x?x:l-i,!(f<s);l+=k)j=f-s,d=k-s,O.push(I(A(s+j%d,0))),f=H(j/d);O.push(I(A(f,0))),i=v(e,b,a==o),e=0,++a}++e,++t}return O.join("")}function s(r){return i(r,function(r){return C.test(r)?f(r.slice(4).toLowerCase()):r})}function u(r){return i(r,function(r){return D.test(r)?"xn--"+l(r):r})}var h="object"==typeof e&&e&&!e.nodeType&&e,b="object"==typeof t&&t&&!t.nodeType&&t,d="object"==typeof r&&r;d.global!==d&&d.window!==d&&d.self!==d||(a=d);var j,O,g=2147483647,k=36,m=1,x=26,q=38,w=700,P=72,z=128,B="-",C=/^xn--/,D=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=k-m,H=Math.floor,I=String.fromCharCode;if(j={version:"1.4.1",ucs2:{decode:y,encode:c},decode:f,encode:l,toASCII:u,toUnicode:s},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return j});else if(h&&b)if(t.exports==h)b.exports=j;else for(O in j)j.hasOwnProperty(O)&&(h[O]=j[O]);else a.punycode=j}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(r,t,e){"use strict";function a(r,t){return Object.prototype.hasOwnProperty.call(r,t)}t.exports=function(r,t,e,o){t=t||"&",e=e||"=";var i={};if("string"!=typeof r||0===r.length)return i;var y=/\+/g;r=r.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var p=r.length;c>0&&p>c&&(p=c);for(var A=0;A<p;++A){var v,f,l,s,u=r[A].replace(y,"%20"),h=u.indexOf(e);h>=0?(v=u.substr(0,h),f=u.substr(h+1)):(v=u,f=""),l=decodeURIComponent(v),s=decodeURIComponent(f),a(i,l)?n(i[l])?i[l].push(s):i[l]=[i[l],s]:i[l]=s}return i};var n=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)}},{}],15:[function(r,t,e){"use strict";function a(r,t){if(r.map)return r.map(t);for(var e=[],a=0;a<r.length;a++)e.push(t(r[a],a));return e}var n=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};t.exports=function(r,t,e,y){return t=t||"&",e=e||"=",null===r&&(r=void 0),"object"==typeof r?a(i(r),function(i){var y=encodeURIComponent(n(i))+e;return o(r[i])?a(r[i],function(r){return y+encodeURIComponent(n(r))}).join(t):y+encodeURIComponent(n(r[i]))}).join(t):y?encodeURIComponent(n(y))+e+encodeURIComponent(n(r)):""};var o=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},i=Object.keys||function(r){var t=[];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.push(e);return t}},{}],16:[function(r,t,e){"use strict";e.decode=e.parse=r("./decode"),e.encode=e.stringify=r("./encode")},{"./decode":14,"./encode":15}],17:[function(r,t,e){"use strict";function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(r,t,e){if(r&&p.isObject(r)&&r instanceof a)return r;var n=new a;return n.parse(r,t,e),n}function o(r){return p.isString(r)&&(r=n(r)),r instanceof a?r.format():a.prototype.format.call(r)}function i(r,t){return n(r,!1,!0).resolve(t)}function y(r,t){return r?n(r,!1,!0).resolveObject(t):t}var c=r("punycode"),p=r("./util");e.parse=n,e.resolve=i,e.resolveObject=y,e.format=o,e.Url=a;var A=/^([a-z0-9.+-]+:)/i,v=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],s=["{","}","|","\\","^","`"].concat(l),u=["'"].concat(s),h=["%","/","?",";","#"].concat(u),b=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,j=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,O={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=r("querystring");a.prototype.parse=function(r,t,e){if(!p.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var a=r.indexOf("?"),n=-1!==a&&a<r.indexOf("#")?"?":"#",o=r.split(n),i=/\\/g;o[0]=o[0].replace(i,"/"),r=o.join(n);var y=r;if(y=y.trim(),!e&&1===r.split("#").length){var v=f.exec(y);if(v)return this.path=y,this.href=y,this.pathname=v[1],v[2]?(this.search=v[2],this.query=t?m.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=A.exec(y);if(l){l=l[0];var s=l.toLowerCase();this.protocol=s,y=y.substr(l.length)}if(e||l||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===y.substr(0,2);!x||l&&g[l]||(y=y.substr(2),this.slashes=!0)}if(!g[l]&&(x||l&&!k[l])){for(var q=-1,w=0;w<b.length;w++){var P=y.indexOf(b[w]);-1!==P&&(-1===q||P<q)&&(q=P)}var z,B;B=-1===q?y.lastIndexOf("@"):y.lastIndexOf("@",q),-1!==B&&(z=y.slice(0,B),y=y.slice(B+1),this.auth=decodeURIComponent(z)),q=-1;for(var w=0;w<h.length;w++){var P=y.indexOf(h[w]);-1!==P&&(-1===q||P<q)&&(q=P)}-1===q&&(q=y.length),this.host=y.slice(0,q),y=y.slice(q),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var D=this.hostname.split(/\./),w=0,E=D.length;w<E;w++){var F=D[w];if(F&&!F.match(d)){for(var G="",H=0,I=F.length;H<I;H++)F.charCodeAt(H)>127?G+="x":G+=F[H];if(!G.match(d)){var J=D.slice(0,w),K=D.slice(w+1),L=F.match(j);L&&(J.push(L[1]),K.unshift(L[2])),K.length&&(y="/"+K.join(".")+y),this.hostname=J.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=c.toASCII(this.hostname));var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!O[s])for(var w=0,E=u.length;w<E;w++){var Q=u[w];if(-1!==y.indexOf(Q)){var R=encodeURIComponent(Q);R===Q&&(R=escape(Q)),y=y.split(Q).join(R)}}var S=y.indexOf("#");-1!==S&&(this.hash=y.substr(S),y=y.slice(0,S));var T=y.indexOf("?");if(-1!==T?(this.search=y.substr(T),this.query=y.substr(T+1),t&&(this.query=m.parse(this.query)),y=y.slice(0,T)):t&&(this.search="",this.query={}),y&&(this.pathname=y),k[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",U=this.search||"";this.path=M+U}return this.href=this.format(),this},a.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",a=this.hash||"",n=!1,o="";this.host?n=r+this.host:this.hostname&&(n=r+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&p.isObject(this.query)&&Object.keys(this.query).length&&(o=m.stringify(this.query));var i=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&!1!==n?(n="//"+(n||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):n||(n=""),a&&"#"!==a.charAt(0)&&(a="#"+a),i&&"?"!==i.charAt(0)&&(i="?"+i),e=e.replace(/[?#]/g,function(r){return encodeURIComponent(r)}),i=i.replace("#","%23"),t+n+e+i+a},a.prototype.resolve=function(r){return this.resolveObject(n(r,!1,!0)).format()},a.prototype.resolveObject=function(r){if(p.isString(r)){var t=new a;t.parse(r,!1,!0),r=t}for(var e=new a,n=Object.keys(this),o=0;o<n.length;o++){var i=n[o];e[i]=this[i]}if(e.hash=r.hash,""===r.href)return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var y=Object.keys(r),c=0;c<y.length;c++){var A=y[c];"protocol"!==A&&(e[A]=r[A])}return k[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!k[r.protocol]){for(var v=Object.keys(r),f=0;f<v.length;f++){var l=v[f];e[l]=r[l]}return e.href=e.format(),e}if(e.protocol=r.protocol,r.host||g[r.protocol])e.pathname=r.pathname;else{for(var s=(r.pathname||"").split("/");s.length&&!(r.host=s.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),""!==s[0]&&s.unshift(""),s.length<2&&s.unshift(""),e.pathname=s.join("/")}if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var u=e.pathname||"",h=e.search||"";e.path=u+h}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var b=e.pathname&&"/"===e.pathname.charAt(0),d=r.host||r.pathname&&"/"===r.pathname.charAt(0),j=d||b||e.host&&r.pathname,O=j,m=e.pathname&&e.pathname.split("/")||[],s=r.pathname&&r.pathname.split("/")||[],x=e.protocol&&!k[e.protocol];if(x&&(e.hostname="",e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(""===s[0]?s[0]=r.host:s.unshift(r.host)),r.host=null),j=j&&(""===s[0]||""===m[0])),d)e.host=r.host||""===r.host?r.host:e.host,e.hostname=r.hostname||""===r.hostname?r.hostname:e.hostname,e.search=r.search,e.query=r.query,m=s;else if(s.length)m||(m=[]),m.pop(),m=m.concat(s),e.search=r.search,e.query=r.query;else if(!p.isNullOrUndefined(r.search)){if(x){e.hostname=e.host=m.shift();var q=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@");q&&(e.auth=q.shift(),e.host=e.hostname=q.shift())}return e.search=r.search,e.query=r.query,p.isNull(e.pathname)&&p.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!m.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var w=m.slice(-1)[0],P=(e.host||r.host||m.length>1)&&("."===w||".."===w)||""===w,z=0,B=m.length;B>=0;B--)w=m[B],"."===w?m.splice(B,1):".."===w?(m.splice(B,1),z++):z&&(m.splice(B,1),z--);if(!j&&!O)for(;z--;z)m.unshift("..");!j||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),P&&"/"!==m.join("/").substr(-1)&&m.push("");var C=""===m[0]||m[0]&&"/"===m[0].charAt(0);if(x){e.hostname=e.host=C?"":m.length?m.shift():"";var q=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@");q&&(e.auth=q.shift(),e.host=e.hostname=q.shift())}return j=j||e.host&&m.length,j&&!C&&m.unshift(""),m.length?e.pathname=m.join("/"):(e.pathname=null,e.path=null),p.isNull(e.pathname)&&p.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e},a.prototype.parseHost=function(){var r=this.host,t=v.exec(r);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)}},{"./util":18,punycode:13,querystring:16}],18:[function(r,t,e){"use strict";t.exports={isString:function(r){return"string"==typeof r},isObject:function(r){return"object"==typeof r&&null!==r},isNull:function(r){return null===r},isNullOrUndefined:function(r){return null==r}}},{}],AppDispatcher:[function(r,t,e){"use strict";var a,n,o,i,y=r("dispatchr")(),c=r("events").EventEmitter;a=new y({}),n={dispatch:function(){a.dispatch.apply(a,arguments)}},o={executeAction:function(){var r=[].slice.call(arguments,1);arguments[0].apply(null,[n].concat(r))},getStore:function(r){return a.getStore(r)},events:new c},i=function(r){y.registerStore.apply(null,arguments),window._stores=window._stores||{},window._stores[r.storeName]=a.getStore(r)},t.exports={registerStore:i,context:o}},{dispatchr:"dispatchr",events:"events"}],AriaStatus:[function(r,t,e){"use strict";var a,n=r("react/addons");a=n.createClass({displayName:"AriaStatus",propTypes:{message:n.PropTypes.string.isRequired,ariaLive:n.PropTypes.string},getDefaultProps:function(){return{ariaLive:"polite"}},componentDidMount:function(){var r=this;r.setText(r.props.message)},componentDidUpdate:function(){var r=this;r.setText(r.props.message)},render:function(){return n.createElement("span",{className:"offscreen",ref:"notificationNode",role:"status","aria-live":this.props.ariaLive})},setText:function(r){this.refs.notificationNode.getDOMNode().textContent=r}}),t.exports=a},{"react/addons":"react/addons"}],BidiSafeFilepath:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("StringUtils");a=n.createClass({displayName:"BidiSafeFilepath",propTypes:{filepath:n.PropTypes.string,tagName:n.PropTypes.string,
className:n.PropTypes.string,title:n.PropTypes.string},mixins:[n.addons.PureRenderMixin],getDefaultProps:function(){return{tagName:"div"}},render:function(){var r,t=this.props.filepath;return"string"==typeof t?(r=o.getFileName(t),n.createElement(this.props.tagName,{className:this.props.className,title:this.props.title,dir:o.getTextDirection(r)},r,this.renderExtension(o.getFileExtension(t)))):null},renderExtension:function(r){if(r)return n.createElement("span",{ref:"extension",dir:"ltr"},r)}}),t.exports=a},{StringUtils:"StringUtils","react/addons":"react/addons"}],BidiString:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash"),i=r("StringUtils");a=n.createClass({displayName:"BidiString",propTypes:{str:n.PropTypes.string,tagName:n.PropTypes.string},mixins:[n.addons.PureRenderMixin],getDefaultProps:function(){return{tagName:"span"}},render:function(){var r=this.props.str;return"string"==typeof r?n.createElement(this.props.tagName,o.merge({dir:i.getTextDirection(r),children:r},o.omit(this.props,["tagName","dir"]))):null}}),t.exports=a},{StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],BodyDropdown:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("Dropdown");a=n.createClass({displayName:"BodyDropdown",propTypes:{className:n.PropTypes.string,closeDropdown:n.PropTypes.func.isRequired,parentNode:n.PropTypes.instanceOf(HTMLElement),anchorNode:n.PropTypes.instanceOf(HTMLElement),coordinates:n.PropTypes.shape({x:n.PropTypes.number,y:n.PropTypes.number}),dropdownXOrigin:n.PropTypes.oneOf(["left","right"]),dropdownYOrigin:n.PropTypes.oneOf(["top","bottom"])},getDefaultProps:function(){return{dropdownXOrigin:"left",dropdownYOrigin:"top"}},componentWillMount:function(){var r=this;r.container=document.createElement("div"),window.addEventListener("resize",r.props.closeDropdown,!0)},componentDidMount:function(){var r=this,t=r.props,e=r.container;r.dropdown=n.render(n.createElement(o,{className:t.className,anchorNode:t.anchorNode,parentNode:t.parentNode,closeDropdown:t.closeDropdown,onClick:t.onClick},t.children),e),document.body.appendChild(e),r.positionDropdown()},componentWillUnmount:function(){var r=this,t=r.container;n.unmountComponentAtNode(t),document.body.removeChild(t),window.removeEventListener("resize",r.props.closeDropdown,!0)},componentDidUpdate:function(){var r=this;r.dropdown.setProps({parentNode:r.props.parentNode,closeDropdown:r.props.closeDropdown,children:r.props.children})},render:function(){return n.createElement("div",null)},getRTLAwareDirection:function(r){return NeoConfig.isRTL?"left"===r?"right":"left":r},positionDropdown:function(){var r=this,t=r.container,e=r.props.coordinates,a=r.props.anchorNode;if(!e&&!a)throw new Error("Must provide coordinates or an anchorNode");e?r.positionDropdownToCoordinates(e):a&&r.positionDropdownToNode(a),t.clientHeight>=window.innerHeight&&(t.style.top="20px",t.style.bottom="20px"),t.clientWidth>=window.innerWidth&&(t.style.left="20px",t.style.right="20px")},positionDropdownToNode:function(r){var t,e,a=this,n=r.getBoundingClientRect(),o=a.container.style,i=a.getRTLAwareDirection(a.props.dropdownXOrigin),y=window.innerWidth;o.position="fixed",o.zIndex="100000",t=a.dropdown.getDOMNode().scrollWidth,"right"===i?n.right>y+window.scrollX?o.right=y-t-10+"px":n.right<t?o.right=Math.ceil(y-n.left-t)+"px":o.right=Math.ceil(y-n.right)+"px":document.body.clientWidth-window.scrollX<n.left+t?o.left=y-t-10+"px":o.left=n.left+"px",e="bottom"===a.props.dropdownYOrigin?n[a.props.dropdownYOrigin]-r.offsetHeight:n[a.props.dropdownYOrigin]+r.offsetHeight,o.top=e+"px",o.height=window.innerHeight-e-r.offsetHeight+"px"},positionDropdownToCoordinates:function(r){var t,e,a=this,n=a.container,o=n.style;o.position="fixed",o.zIndex="100000",r.x=r.x>0?r.x:0,r.y=r.y>0?r.y:0,t=n.clientWidth+r.x,e=n.clientHeight+r.y,t>window.innerWidth&&(r.x=r.x-(t-window.innerWidth)),e>window.innerHeight&&(r.y=r.y-(e-window.innerHeight)),o.left=r.x+"px",o.top=r.y+"px"}}),t.exports=a},{Dropdown:"Dropdown","react/addons":"react/addons"}],BootcampAPIUtilsV2:[function(r,t,e){"use strict";function a(r){return({keyword:"WITH_KEYWORD"}[r]||r).toUpperCase()}function n(r){return{url:h.getValue(r,["url"],!1),xTiming:h.getValue(r,["resHeaders","xTiming"],!1),status:r.status,duration:h.getValue(r,["elapsedTime"])}}function o(r){var t="desc",e=r.sortType,a=r.sortOrder;switch(e){case g.MSG_SORT_TYPE_DATE:t="down"===(a||g.MSG_SORT_ORDER_DOWN)?"desc":"asc";break;case g.MSG_SORT_TYPE_ATTACHMENT:t="attachment";break;case g.MSG_SORT_TYPE_RELEVANCE:t="relevance"}return t}function i(r,t,e){var n=h.getValue(r,"response.contentBlock",!1),o=h.getValue(r,"response.srpType"),i=h.getValue(r,"response.heroBlockType"),y=h.getValue(n,"content","");switch(o){case"PLAYING_IT_SAFE":if("NONE"===i&&n.blockType===O.MESSAGES)return!0;if((n.blockType===O.MAIN||n.blockType===i)&&(y.items||[]).length>0)return!0;break;case"LIST":if((n.blockType===O.MAIN||n.blockType===i)&&(y.items||[]).length>0)return!0;break;case"PERSON_SRP":case"people":if(n.blockType===O.MESSAGES)if(e){if(n.filter===a(t)&&(y.items||[]).length>0)return!0}else if(n.filter===a(t))return!0;break;default:if(n.blockType===O.MESSAGES)return!0}return!1}function y(r){return({MIXED:"links"}[r]||r).toLowerCase()}function c(r){return({WITH_KEYWORD:"keyword"}[r]||r||"").toLowerCase()}function p(r){var t=k.context.getStore(m);return r.forEach(function(r){var e;void 0!==r.folderNumber||void 0!==r.folderId?(e=t.findByIndex(r.folderNumber),r.fid=h.getValue(e,["folderInfo","fid"],r.folderId)):void 0!==r.mid&&(r.fid="Inbox"),"MESSAGE"===r.itemType&&(r.mid=r.mid||r.id.slice(2),r.id=r.mid),r.creationDate>21459168e5&&(r.creationDate/=1e3)}),r}function A(r,t){var e,a={metaData:n(r),data:{},error:{}},o=!1,A=!1,v=u.parse(r.text,0);return a.metaData.searchType=t.searchType,!v.data||r.status<200||r.status>=300?(a.error={status:r.status,message:r.text},a):(v.data.forEach(function(n){var v,f,l,s,u=h.getValue(n,"response.contentBlock",!1);if(200!==n.status||!u)return 401===n.status&&(o=!0),l=y(h.getValue(n,"response.blockType")),s=c(h.getValue(n,"response.filter")),v=h.getValue(n,"response.message",""),void(l&&s&&(a.error[l]||(a.error[l]={}),a.error[l][s]={status:n.status,message:v}));f=h.getValue(u,"content",""),l=y(h.getValue(u,["content","contentType"],h.getValue(u,"blockType"))),s=c(h.getValue(u,"filter")||"WITH_KEYWORD"),l&&(a.data[l]||(a.data[l]={}),a.data[l][s]={totalHits:f.totalHits,offset:(f.items||[]).length?f.offset:void 0,url:h.getValue(u,"url",""),items:p(f.items||[]),spellCorrection:h.getValue(u,"content.suggestedWords",null),resultsFromTrash:h.getValue(f,"resultsFromTrash",null),queryResponse:h.getValue(f,"queryResponse",null)},200===r.status&&l.toUpperCase()===O.MESSAGES&&s===t.defaultFilter&&(e={contentType:l,filter:t.defaultFilter,isEmpty:(f.items||[]).length<=0}),A||(A=i(n,t.defaultFilter,t.isForceUser))&&(a.metaData.hasMain=!0,a.metaData.main={contentType:l,filter:s,isEmpty:(f.items||[]).length<=0}))}),200===r.status&&!a.metaData.hasMain&&e&&(a.metaData.hasMain=!0,a.metaData.main=e,"people"===t.searchType&&h.getValue(a,["metaData","main","isEmpty"],!1)&&h.getValue(a,["data",e.contentType,"all","items"],[]).length>0&&(a.metaData.main.filter="all",a.metaData.main.isEmpty=!1)),a.metaData.reAuthenticate=o,a)}function v(r){this.wssid=r.wssid,this.mailboxId=r.mailboxId,this.lmv3Enabled=r.lmv3Enabled,this.searchGDocsEnabled=r.searchGDocsEnabled,this.searchInTrashEnabled=r.searchInTrashEnabled,this.hasMultipleAccounts=r.hasMultipleAccounts,this.bucketId=r.bucketId,this.isForceUser=r.isForceUser,this.searchResultsLinksEnabled=r.searchResultsLinksEnabled,this.searchExtractionsEnabled=r.searchExtractionsEnabled,this.clientId=r.clientId||P,this.bcHost=r.bcHost||"https://prod1.psearch.yahoo.com"}var f,v,l=r("IO"),s=r("lodash"),u=r("./BootcampResponseParser"),h=r("ObjectUtils"),b=r("Utils"),d=r("StringUtils"),j=r("GlobalConstants"),O=r("SearchConstants"),g=r("UserSettingsConstants"),k=r("AppDispatcher"),m=r("FolderStore"),x=r("EnhancedPromise"),q=r("timeUtils").getTimezone(),w=(new Date).getTimezoneOffset(),P="mailsearch",z=yui.common.Utils,B=z.features;f={SUGG_CACHE_MAX_SIZE:500,SUGG_CACHE_MAX_AGE:3e5,generateKey:function(r){return JSON.stringify(r)},buildCache:function(r,t,e){var a={},n=s.now();return s.size(r)>f.SUGG_CACHE_MAX_SIZE&&(s.each(r,function(r,t){n-r.timestamp<f.SUGG_CACHE_MAX_AGE&&(a[t]=r)}),r=a),r[t]||(r[t]={timestamp:n,data:e}),r},getDataFromCache:function(r,t){if(r[t]){if(s.now()-r[t].timestamp<f.SUGG_CACHE_MAX_AGE)return r[t].data;delete r[t]}},normalizeResponse:function(r,t,e){var a={metaData:n(r),data:{},error:{}},o=[],i=u.parse(r.text,0);return(!i.data||r.status<200||r.status>=300)&&(a.error={status:r.status,message:r.text}),o=h.getValue(i.data[0],["response","suggestions"],[]).filter(function(r){return"PEOPLE"===r.intent}).map(function(r){var t,e=s.values(r.entities)[0];if(e)return t=e.imageUrl?d.addUrlParameters(e.imageUrl,{spsize:"50X50",badge:!0,fallback_url:j.FALLBACK_XOBNI_IMG_URL}):j.FALLBACK_XOBNI_IMG_URL,s.merge({},e,{imageUrl:t,displayStr:e.name,intent:r.intent,emailAddresses:e.emailIds})}),f.buildCache(e,t,o),a.data=o,a}},v.CONSTANTS={PEOPLE_SEARCHTYPE:"people",KEYWORD_SEARCHTYPE:"keyword"},v.CONTENT_TYPES=["messages","photos","documents","links","people","extractions"],v.getSearchType=function(r){var t=v.CONSTANTS;return h.getValue(r,["emailAddresses"],!1)?t.PEOPLE_SEARCHTYPE:t.KEYWORD_SEARCHTYPE},v.prototype.getDefaultUrlParams=function(){var r={timezone:q,tzoffset:w,clientid:this.clientId,mailboxid:this.mailboxId},t=z.getMailBoxQueryParams&&z.getMailBoxQueryParams()||{};return(this.lmv3Enabled||this.hasMultipleAccounts)&&(r.lmv3=1,r.oldSearchV2Mids=1),this.searchGDocsEnabled&&(r.allowGoogleDocs=1),this.searchInTrashEnabled&&(r.searchInTrash=1),s.merge(r,t),r},v.prototype.search=function(r){var t,e,n=this.bcHost+"/v2/srp?",i=v.CONSTANTS,y=this.getDefaultUrlParams(),c=v.getSearchType(r),p=this.isForceUser,f=c===i.PEOPLE_SEARCHTYPE,u=function(t){return A(t,{defaultFilter:r.defaultFilter,searchType:c,isForceUser:p})},h={headers:{"Content-Type":"application/json"}},d=["HERO","PEOPLE_RELATED"],j=[];return y.ymreqid=r.reqId,y.bucketid=this.bucketId,y.order=o(r.sortInfo),y.query=[].concat(r.query,r.refinements||[]).join(" "),y.limit=r.limit,r.folders&&r.folders.length?y.folders=r.folders.join(","):r.accountIds&&r.accountIds.length&&(y.accountIds=r.accountIds.join(",")),this.isForceUser||f?(e=["MESSAGES","PHOTOS","DOCUMENTS"],this.searchExtractionsEnabled&&e.push("EXTRACTIONS"),this.searchResultsLinksEnabled&&e.push("LINKS")):(e=["MESSAGES"],B.enabled("searchExtractionsKeywords")&&this.searchExtractionsEnabled&&e.push("EXTRACTIONS")),f?(t=this.isForceUser?["FROM","TO","ALL"]:[a(r.defaultFilter)],r.emailAddresses?y.contentId=s.map(r.emailAddresses||[],function(r){return"smtp:"+r}).join(","):r.serviceId&&(y.contentId="x:"+r.serviceId)):(e.push("PEOPLE"),t=["WITH_KEYWORD"]),e.forEach(function(r){t.forEach(function(t){d.push(r+"_"+t)})}),y.expand=d.join(","),n=b.appendToUrl(n,y),l.get(n,j.join(""),h).then(u,u,u)},v.prototype.getSuggestions=function(r){var t,e,a=this.bcHost+"/v2/suggestions?",n=this.getDefaultUrlParams(),o=function(t){return f.normalizeResponse(t,e,r.suggestionsCache)};return e=f.generateKey({query:r.query,email:r.accountemail}),(t=f.getDataFromCache(r.suggestionsCache,e))?x.resolve({metaData:{fromCache:!0},data:t}):(n.ymreqid=r.reqId,n.query=r.query,""!==r.accountemail&&(n.accountemail=r.accountemail),r.fechnpsy&&(n.fechnpsy=r.fechnpsy),a=b.appendToUrl(a,n),l.get(a).then(o,o))},v.prototype.searchItems=function(r){var t,e=this.getDefaultUrlParams(),a=function(r){var t,e={metaData:n(r),data:{},error:{}};try{t=JSON.parse(r.text)}catch(r){}return!t||!t.items||r.status<200||r.status>=300?(e.error={status:r.status,message:r.text},e):(e.data={items:p(t.items),offset:(t.items||[]).length?t.offset:void 0},e)};return t=b.appendToUrl(r.url,e),l.get(t).then(a,a)},v.prototype.batch=function(r,t){var e,a=this.bcHost+"/v2/batch?"+r.url,o=this.getDefaultUrlParams(),i={headers:{"Content-Type":"text/plain; charset=utf-8"}},y=function(r){var t={metaData:n(r),data:{},error:{}},e=u.parse(r.text,0);return!e.data||r.status<200||r.status>=300?(t.error={status:r.status,message:r.text},t):(t.data=e.data,t)};for(a=b.appendToUrl(a,o),e=0;e<t.length;e++)t[e].url=t[e].url+"&mailboxid="+this.mailboxId;return l.post(a,t,i).then(y)},v.prototype.getShareableLink=function(r){var t="/v2/items/{id}/shareableLink",e=this.getDefaultUrlParams(),a=this.bcHost+t.replace("{id}",encodeURIComponent(r.id)),n=function(r){var t;try{t=JSON.parse(r.text)}catch(r){}return!t||!t.shareableLink||r.status<200||r.status>=300?{error:r.text,status:r.status}:{data:t,status:r.status}};return a=b.appendToUrl(a,e),l.get(a).then(n,n)},v.prototype.hideItems=function(r,t){var e=this.bcHost+"/v2/items/hide",a=this.getDefaultUrlParams(),n={headers:{"Content-Type":"application/json"}},o=function(r){return r},i={itemIds:r};return s.merge(a,t),e=b.appendToUrl(e,a),l.post(e,i,n).then(o)},v.prototype.getExternalAccounts=function(r){var t=this.bcHost+"/v2/contentProviders",e=this.getDefaultUrlParams(),a=function(r){var t;try{t=JSON.parse(r.text)}catch(r){}return!t||r.status<200||r.status>=300?{error:r.text,status:r.status}:{data:t,status:r.status}};return r&&(t+="/"+r),t=b.appendToUrl(t,e),l.get(t).then(a)},v.prototype.disconnectExternalAccount=function(r){var t="/v2/contentProviders/"+encodeURIComponent(r)+"/remove",e=this.bcHost+t,a=this.getDefaultUrlParams(),n={headers:{"Content-Type":"application/json"}},o=function(r){var t;try{t=JSON.parse(r.text)}catch(r){}return!t||r.status<200||r.status>=300?{error:r.text,status:r.status}:{data:t,status:r.status}};return e=b.appendToUrl(e,a),l.post(e,null,n).then(o)},v.prototype.connectExternalAccount=function(r,t){var e="/v2/contentProviders/"+encodeURIComponent(r),a=this.bcHost+e,n=this.getDefaultUrlParams(),o={headers:{"Content-Type":"application/json"}},i=function(r){var t;try{t=JSON.parse(r.text)}catch(r){}return!t||r.status<200||r.status>=300?{error:r.text,status:r.status}:{data:t,status:r.status}};return t=t||{},a=b.appendToUrl(a,n),l.post(a,t,o).then(i)},v.prototype._test_={getMetaData:n,createBootcampFilter:a,createBootcampOrder:o,isSRPMainChunk:i,normalizeContentType:y,normalizeFilter:c,normalizeItems:p,normalizeSearchResponse:A,suggestionsUtils:f},t.exports=v},{"./BootcampResponseParser":10,AppDispatcher:"AppDispatcher",EnhancedPromise:"EnhancedPromise",FolderStore:"FolderStore",GlobalConstants:"GlobalConstants",IO:"IO",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",StringUtils:"StringUtils",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash",timeUtils:"timeUtils"}],BootcampAPIUtilsV3:[function(r,t,e){"use strict";function a(r){return({keyword:"WITH_KEYWORD"}[r]||r).toUpperCase()}function n(r){return{url:j.getValue(r,["url"],!1),xTiming:j.getValue(r,["resHeaders","xTiming"],!1),status:r.status,duration:j.getValue(r,["elapsedTime"])}}function o(r,t){var e="time",a=r.sortType,n=r.sortOrder,o=D.enabled("searchHeroSort"),i=t===l.CONSTANTS.KEYWORD_SEARCHTYPE;switch(a){case x.MSG_SORT_TYPE_DATE:e="down"===(n||x.MSG_SORT_ORDER_DOWN)?o&&i?"hero":"time":"time asc";break;case x.MSG_SORT_TYPE_ATTACHMENT:e="attachment";break;case x.MSG_SORT_TYPE_RELEVANCE:e="score"}return e}function i(r,t){var e=["ALL"],a=l.CONSTANTS;return r===a.KEYWORD_SEARCHTYPE?e="images"===t?["IMAGES"]:"documents"===t?["DOCUMENTS"]:"web"===t?["WEB"]:["MAIN","PEOPLE"]:r===a.PEOPLE_SEARCHTYPE&&(e=["MAIN","PEOPLE","DOCUMENTS","IMAGES"],H&&e.push("WEB")),e}function y(r,t,e,n){var o=j.getValue(r,"response.srpType"),i=j.getValue(n,"content","");switch(o){case"DEFAULT_SRP":if(n.blockType===m.MESSAGES&&"WITH_KEYWORD"===n.filter)return!0;break;case"MAIN_AND_RELATED":if((i.items||[]).length>0)return!0;break;case"PERSON_SRP":case"people":if(n.blockType===m.MESSAGES)if(e){if(n.filter===a(t)&&(i.items||[]).length>0)return!0}else if(n.filter===a(t))return!0;break;default:if(n.blockType===m.MESSAGES)return!0}return!1}function c(r){return({MIXED:"web"}[r]||r).toLowerCase()}function p(r){return({WITH_KEYWORD:"keyword"}[r]||r||"").toLowerCase()}function A(r){var t=q.context.getStore(w);return r.forEach(function(r){var e;void 0!==r.folderNumber||void 0!==r.folderId?(e=t.findByIndex(r.folderNumber),r.fid=j.getValue(e,["folderInfo","fid"],r.folderId)):void 0!==r.mid&&(r.fid="Inbox"),"MESSAGE"===r.itemType&&(r.mid=r.mid||r.id.slice(2),r.id=r.mid),r.creationDate>21459168e5&&(r.creationDate/=1e3)}),r}function v(r,t,e){var a,n,o=b.find(r,{blockType:"MESSAGES",filter:t}),i=b.find(r,{blockType:"MESSAGES",filter:e}),y=[],c=null;if(o&&i){for(n=0;n<o.content.items.length;n++)o.content.items[n].isHero=!0,y.push(o.content.items[n]);for(n=0;n<i.content.items.length;n++)y.push(i.content.items[n]);a={blockType:"MESSAGES",content:{cursor:i.content.cursor,extendUrl:i.content.extendUrl,items:y,queryResponse:i.content.queryResponse,totalHits:i.content.totalHits},filter:e,status:i.status,title:"Hero Results",isHero:!0},c=[a]}return c}function f(r,t){var e,a={metaData:n(r),data:{},error:{}},o=!1,i=!1,f=d.parse(r.text,0);return a.metaData.searchType=t.searchType,a.metaData.ymreqid=t.ymreqid||"",!f.data||r.status<200||r.status>=300?(a.error={status:r.status,message:r.text},a):(f.data.forEach(function(n){var f,l,s,u,h,b=j.getValue(n,"response.verticals",!1),d=j.getValue(b,[0,"contentBlocks"],[]),O=["TO","FROM","ALL"];!F||t.isSmartSearch||t.isSubjectSearch||(h=v(d,"WITH_KEYWORD_RELEVANCE","WITH_KEYWORD"))&&(d=h),G&&O.forEach(function(r){(h=v(d,r+"_WITH_RELEVANCE",r))&&(d=h)}),d.forEach(function(v){if(200!==n.status||!v)return 401===n.status&&(o=!0),s=c(j.getValue(v,"blockType")),u=p(j.getValue(v,"filter")),f=j.getValue(n,"response.message",""),void(s&&u&&(a.error[s]||(a.error[s]={}),a.error[s][u]={status:n.status,message:f}));l=j.getValue(v,"content",""),s=c(j.getValue(v,["content","contentType"],j.getValue(v,"blockType"))),u=p(j.getValue(v,"filter")||"WITH_KEYWORD"),s&&(a.data[s]||(a.data[s]={}),a.data[s][u]={totalHits:l.totalHits,offset:(l.items||[]).length?l.cursor:void 0,url:j.getValue(l,"extendUrl",""),items:A(l.items||[]),spellCorrection:j.getValue(v,"content.suggestedWords",null),resultsFromTrash:j.getValue(l,"resultsFromTrash",null),queryResponse:j.getValue(l,"queryResponse",null)},200===r.status&&s.toUpperCase()===m.MESSAGES&&u===t.defaultFilter&&(e={contentType:s,filter:t.defaultFilter,isEmpty:(l.items||[]).length<=0}),i||(i=y(n,t.defaultFilter,t.isForceUser,v))&&(a.metaData.hasMain=!0,a.metaData.main={contentType:s,filter:u,isEmpty:(l.items||[]).length<=0}))})}),200===r.status&&!a.metaData.hasMain&&e&&(a.metaData.hasMain=!0,a.metaData.main=e,"people"===t.searchType&&j.getValue(a,["metaData","main","isEmpty"],!1)&&j.getValue(a,["data",e.contentType,"all","items"],[]).length>0&&(a.metaData.main.filter="all",a.metaData.main.isEmpty=!1)),a.metaData.reAuthenticate=o,a)}function l(r){this.wssid=r.wssid,this.mailboxId=r.mailboxId,this.searchGDocsEnabled=r.searchGDocsEnabled,this.searchInTrashEnabled=r.searchInTrashEnabled,this.hasMultipleAccounts=r.hasMultipleAccounts,this.bucketId=r.bucketId,this.isForceUser=r.isForceUser,this.clientId=r.clientId||B,this.bcHost=r.bcHost||"https://prod1psearch.mail.yahoo.com"}var s,u,l,h=r("IO"),b=r("lodash"),d=r("./BootcampResponseParser"),j=r("ObjectUtils"),O=r("Utils"),g=r("StringUtils"),k=r("GlobalConstants"),m=r("SearchConstants"),x=r("UserSettingsConstants"),q=r("AppDispatcher"),w=r("FolderStore"),P=r("EnhancedPromise"),z=r("timeUtils").getTimezone(),B="mailsearch",C=yui.common.Utils,D=C.features,E=C.settings,F=D.enabled("searchHeroResults"),G=D.enabled("searchHeroResultsPeopleWithKeyword"),H=D.enabled("searchResultsLinks");s={SUGG_CACHE_MAX_SIZE:500,SUGG_CACHE_MAX_AGE:3e5,generateKey:function(r){return JSON.stringify(r)},buildCache:function(r,t,e){var a={},n=b.now();return b.size(r)>s.SUGG_CACHE_MAX_SIZE&&(b.each(r,function(r,t){n-r.timestamp<s.SUGG_CACHE_MAX_AGE&&(a[t]=r)}),r=a),r[t]||(r[t]={timestamp:n,data:e}),r},getDataFromCache:function(r,t){if(r[t]){if(b.now()-r[t].timestamp<s.SUGG_CACHE_MAX_AGE)return r[t].data;delete r[t]}},normalizeResponse:function(r,t,e){var a={metaData:n(r),data:{},error:{}},o=[],i=d.parse(r.text,0);return(!i.data||r.status<200||r.status>=300)&&(a.error={status:r.status,message:r.text}),o=j.getValue(i.data[0],["response","suggestions"],[]).filter(function(r){return"PEOPLE"===r.intent}).map(function(r){var t,e=b.values(r.entities)[0];if(e)return t=e.imageUrl?g.addUrlParameters(e.imageUrl,{spsize:"50X50",badge:!0,fallback_url:k.FALLBACK_XOBNI_IMG_URL}):k.FALLBACK_XOBNI_IMG_URL,b.merge({},e,{imageUrl:t,displayStr:e.name,intent:r.intent,emailAddresses:e.emailIds})}),s.buildCache(e,t,o),a.data=o,a}},u={normalizeResponse:function(r){var t=[],e={},a=r.text||"[]",n=[];try{n=JSON.parse(a),n.map(function(r){return{query:b.unescape(r.query),count:r.frequency}}).forEach(function(r){var a,n=r.query||"";"string"==typeof n&&n.trim()&&(a=e[n],void 0===a&&(a=t.length,e[n]=a,t.push({query:n,count:0})),t[a].count+=r.count)})}catch(r){}return t}},l.CONSTANTS={PEOPLE_SEARCHTYPE:"people",KEYWORD_SEARCHTYPE:"keyword"},l.CONTENT_TYPES=["messages","images","documents","web","people","cards"],l.getSearchType=function(r){var t=l.CONSTANTS;return j.getValue(r,["emailAddresses"],!1)?t.PEOPLE_SEARCHTYPE:t.KEYWORD_SEARCHTYPE},l.prototype.getDefaultUrlParams=function(){var r={timezone:z,clientid:this.clientId,mailboxid:this.mailboxId,appid:"YahooMailNeo"},t=C.getMailBoxQueryParams&&C.getMailBoxQueryParams()||{};return this.searchInTrashEnabled&&(r.searchInTrash=1),b.merge(r,t),r},l.prototype.search=function(r){var t=this.bcHost+"/v3/srp?",e=l.CONSTANTS,a=this.getDefaultUrlParams(),n=l.getSearchType(r),y=this.isForceUser,c=n===e.PEOPLE_SEARCHTYPE,p=function(t){return f(t,{defaultFilter:r.defaultFilter,searchType:n,isForceUser:y,ymreqid:r.reqId,sortType:j.getValue(r,["sortInfo","sortType"],""),isSubjectSearch:r.isSubjectSearch,isSmartSearch:r.isSmartSearch})},A={headers:{"Content-Type":"application/json"}},v=i(n,r.view),s=[];return a.ui=1,a.ymreqid=r.reqId,a.bucketid=this.bucketId,a.order=o(r.sortInfo,n),a.query=[].concat(r.query,r.refinements||[]).join(" "),a.limit=r.limit,"hero"===a.order&&(a.herocount=E.value("searchHeroCount")||3),r.currentEmail&&(a.accountemail="smtp:"+r.currentEmail),r.folders&&r.folders.length?a.folders=r.folders.join(","):r.accountIds&&r.accountIds.length&&(a.accountIds=r.accountIds.join(",")),D.enabled("useTripodIndex")&&(a.useTripod=!0),this.isForceUser||(a.vespaUser=!0),a.multipart=!1,c&&(r.emailAddresses?a.contentId=b.map(r.emailAddresses||[],function(r){return"smtp:"+r}).join(","):r.serviceId&&(a.contentId="x:"+r.serviceId),a.n=r.name),a.expand=v.join(","),t=O.appendToUrl(t,a),h.get(t,s.join(""),A).then(p,p,p)},l.prototype.getSuggestions=function(r){var t,e,a=this.bcHost+"/v3/suggestions?",n=this.getDefaultUrlParams(),o=function(t){return s.normalizeResponse(t,e,r.suggestionsCache)};return e=s.generateKey({query:r.query,email:r.accountemail}),(t=s.getDataFromCache(r.suggestionsCache,e))?P.resolve({metaData:{fromCache:!0},data:t}):(n.ymreqid=r.reqId,n.query=r.query,n.multipart=!1,""!==r.accountemail&&(n.accountemail=r.accountemail),r.fechnpsy&&(n.fechnpsy=r.fechnpsy),a=O.appendToUrl(a,n),h.get(a).then(o,o))},l.prototype.getRecentSearches=function(){var r=this.bcHost+"/v3/recentSearches?",t=function(r){return u.normalizeResponse(r)},e=C.getMailBoxQueryParams&&C.getMailBoxQueryParams()||{};return r=O.appendToUrl(r,e),h.get(r).then(t,t)},l.prototype.searchItems=function(r){var t,e=this.getDefaultUrlParams(),a=function(r){var t,e={metaData:n(r),data:{},error:{}};try{t=JSON.parse(r.text)}catch(r){}return!t||!t.items||r.status<200||r.status>=300?(e.error={status:r.status,message:r.text},e):(e.data={items:A(t.items),offset:(t.items||[]).length?t.cursor:void 0},e)};return t=O.appendToUrl(r.url,e),h.get(t).then(a,a)},l.prototype._test_={getMetaData:n,createBootcampFilter:a,createBootcampOrder:o,isSRPMainChunk:y,normalizeContentType:c,normalizeFilter:p,normalizeItems:A,normalizeSearchResponse:f,mergeRelevantAndRecentBlocks:v,suggestionsUtils:s,recentSearchesUtils:u,getExpandParams:i},t.exports=l},{"./BootcampResponseParser":10,AppDispatcher:"AppDispatcher",EnhancedPromise:"EnhancedPromise",FolderStore:"FolderStore",GlobalConstants:"GlobalConstants",IO:"IO",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",StringUtils:"StringUtils",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash",timeUtils:"timeUtils"}],Checkbox:[function(r,t,e){"use strict";var a,n=r("react/addons");a=n.createClass({displayName:"Checkbox",propTypes:{disabled:n.PropTypes.bool,isMixed:n.PropTypes.bool,isSelected:n.PropTypes.bool,onChange:n.PropTypes.func,title:n.PropTypes.string},mixins:[n.addons.PureRenderMixin],getDefaultProps:function(){return{disabled:!1,isMixed:!1,isSelected:!1,onChange:function(){},title:""}},render:function(){var r=n.addons.classSet({icon:!0,"ui-checkbox":!0,"icon-checkbox-mixed":this.props.isMixed,"icon-checkbox-selected":this.props.isSelected,"icon-checkbox-empty":!(this.props.isMixed||this.props.isSelected)});return n.createElement("span",{tabIndex:this.props.tabIndex||"0",role:"checkbox",className:r,onChange:this.props.onChange,onClick:this.handleSelectionChange,onKeyDown:this.handleSelectionChange,title:this.props.title,"aria-checked":this.getAriaCheckedStatus(),"aria-label":this.props.ariaLabel||this.props.title,disabled:this.props.disabled})},getAriaCheckedStatus:function(){return this.props.isSelected?"true":this.props.isMixed?"mixed":"false"},handleSelectionChange:function(r){"click"!==r.type&&" "!==r.key||this.props.disabled||(r.preventDefault(),this.props.onChange(r))}}),t.exports=a},{"react/addons":"react/addons"}],Context:[function(r,t,e){"use strict";var a=r("react/addons");t.exports={contextTypes:{executeAction:a.PropTypes.func,getStore:a.PropTypes.func,events:a.PropTypes.object},childContextTypes:{executeAction:a.PropTypes.func,getStore:a.PropTypes.func,events:a.PropTypes.object},getContext:function(){return this.context.getStore&&this.context.executeAction&&this.context.events?this.context:this.props.context},getChildContext:function(){var r=this.getContext();return{executeAction:r.executeAction,getStore:r.getStore,events:r.events}},getStore:function(){var r=this.getContext();return r.getStore.apply(r,arguments)},executeAction:function(){var r=this.getContext();return r.executeAction.apply(r,arguments)}}},{"react/addons":"react/addons"}],CopyFunctionWrapper:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash");a=n.createClass({displayName:"CopyFunctionWrapper",propTypes:{copyData:n.PropTypes.string,onClick:n.PropTypes.func,setDisabled:n.PropTypes.func,setActive:n.PropTypes.func},getDefaultProps:function(){return{onClick:o.noop}},getInitialState:function(){return{classes:"",disabled:!1}},componentDidMount:function(){this.state.disabled||this._setUpClipBoard()},componentWillUpdate:function(){this.state.disabled&&this._cleanClipBoard()},componentWillUnmount:function(){this._cleanClipBoard()},render:function(){return n.createElement("div",{className:"copy-func-wrapper"},this.props.children)},_setUpClipBoard:function(){var r=this;yui.use("swfdetect","comms-ui-clipboard-plugin",function(t){if(!t.SWFDetect.isFlashVersionAtLeast(10,1,0))return void r.props.setDisabled(!0);r.clipboardTimeoutHandle=setTimeout(function(){var e,a=t.comms.ui.ClipBoard;r.isMounted()&&(e=yui.one(r.getDOMNode()),e.plug(a,{moviepath:NeoConfig.copySwfMoviePath}).on("clipboard:load",function(){this.clipboard._movie.setAttribute("data-preventClose","true"),this.on("mouseenter",function(){this.setAttribute("copy",r.props.copyData)},this),this.clipboard.setEvent("mouseOver",function(){r.props.setActive(!0)}),this.clipboard.setEvent("mouseOut",function(){r.props.setActive(!1)}),r.clipboard=this.clipboard,this.clipboard.setEvent("click",function(){e.simulate("click")},!0)}))},0)})},_cleanClipBoard:function(){var r=this;r.clipboardTimeoutHandle&&clearTimeout(r.clipboardTimeoutHandle),r.clipboard&&r.clipboard.hide()}}),t.exports=a},{lodash:"lodash","react/addons":"react/addons"}],DOMUtils:[function(r,t,e){"use strict";var a,n=r("lodash");a={cloneEvent:function(r){return n.clone(r,!0)},halt:function(r){r.stopPropagation(),r.preventDefault()},isDescendant:function(r,t){for(;t&&t!==r;)t=t.parentNode;return!!t},isTextInput:function(r){return r&&("INPUT"===r.tagName||"TEXTAREA"===r.tagName)}},t.exports=a},{lodash:"lodash"}],DateTimeFormatter:[function(r,t,e){"use strict";var a,n=r("lodash"),o=r("../../../../artifacts/lang");a={FULL:strings.str_cfg_dateformat_full_human_readable,COMPACT:strings.str_cfg_dateformat_compact,INFORMAL:strings.str_cfg_dateformat_informal,TIME:strings.str_cfg_dateformat_simple_time,FULL_WITH_SHORTMONTH:strings.str_cfg_dateformat_full_short_month,transform:function(r,t){var e=this;return n.template(t,null,{interpolate:/{([\s\S]+?)}/g})({F:e.getFullMonth(r.getMonth()+1),m:e.toDoubleDigit(r.getMonth()+1),M:e.getAbbrMonth(r.getMonth()+1),n:r.getMonth()+1,d:e.toDoubleDigit(r.getDate()),D:e.getAbbrDay(r.getDay()+1),j:r.getDate(),l:e.getFullDay(r.getDay()+1),y:e.toDoubleDigit(r.getYear()%100),Y:r.getFullYear(),g:e.toInformalHours(r.getHours()),G:r.getHours(),i:e.toDoubleDigit(r.getMinutes()),s:e.toDoubleDigit(r.getSeconds()),A:e.getAMPM(r)})},getAMPM:function(r){return r.getHours()>11?o.str_dateformat_PM_l10n:o.str_dateformat_AM_l10n},getFullMonth:function(r){return{1:o.str_month_january,2:o.str_month_february,3:o.str_month_march,4:o.str_month_april,5:o.str_month_may,6:o.str_month_june,7:o.str_month_july,8:o.str_month_august,9:o.str_month_september,10:o.str_month_october,11:o.str_month_november,12:o.str_month_december}[r]},getAbbrMonth:function(r){return{1:o.str_monthabbr_january,2:o.str_monthabbr_february,3:o.str_monthabbr_march,4:o.str_monthabbr_april,5:o.str_monthabbr_may,6:o.str_monthabbr_june,7:o.str_monthabbr_july,8:o.str_monthabbr_august,9:o.str_monthabbr_september,10:o.str_monthabbr_october,11:o.str_monthabbr_november,12:o.str_monthabbr_december}[r]},getFullDay:function(r){return{1:o.str_day_sunday,2:o.str_day_monday,3:o.str_day_tuesday,4:o.str_day_wednesday,5:o.str_day_thursday,6:o.str_day_friday,7:o.str_day_saturday}[r]},getAbbrDay:function(r){return{1:o.str_dayabbr_sunday,2:o.str_dayabbr_monday,3:o.str_dayabbr_tuesday,4:o.str_dayabbr_wednesday,5:o.str_dayabbr_thursday,6:o.str_dayabbr_friday,7:o.str_dayabbr_saturday}[r]},toInformalHours:function(r){return r>12?r-12:r||12},toDoubleDigit:function(r){return String(r>9?r:"0"+r)}},t.exports=a},{"../../../../artifacts/lang":2,lodash:"lodash"}],Dropdown:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash"),i=r("DOMUtils");a=n.createClass({displayName:"Dropdown",propTypes:{closeDropdown:n.PropTypes.func.isRequired,parentNode:n.PropTypes.instanceOf(HTMLElement)},componentDidMount:function(){var r=this;window.addEventListener("mousedown",r.handleCloseEvent,!0),window.addEventListener("keydown",r.handleKeyDown,!0),window.addEventListener("scroll",r.handleCloseEvent,!0),r.mountTime=Date.now()},componentWillUnmount:function(){var r=this;window.removeEventListener("mousedown",r.handleCloseEvent,!0),window.removeEventListener("keydown",r.handleKeyDown,!0),window.removeEventListener("scroll",r.handleCloseEvent,!0)},shouldComponentUpdate:function(r){return!o.isEqual(this.props,r)},render:function(){var r=this,t=r.props;return n.createElement("div",{className:t.className,onClick:t.onClick},t.children)},isToDebounce:function(){return Date.now()-this.mountTime<30},shouldClose:function(r){var t=this,e=t.props,a=r;if(r&&r.getAttribute&&r.getAttribute("data-preventClose"))return!1;for(;a.parentNode;){if(a.classList.contains("ui-onboarding"))return!1;a=a.parentNode}return[e.parentNode,e.anchorNode,t.getDOMNode()].filter(o.identity).every(function(t){return!i.isDescendant(t,r)})},handleCloseEvent:function(r){
this.isToDebounce()||r.target&&this.shouldClose(r.target)&&this.props.closeDropdown(r)},handleKeyDown:function(r){27===r.keyCode&&(this.props.closeDropdown(r),r.stopPropagation())}}),t.exports=a},{DOMUtils:"DOMUtils",lodash:"lodash","react/addons":"react/addons"}],EnhancedPromise:[function(r,t,e){"use strict";var a,n=r("lodash");a=function(r,t){var e=this;e._cancelFn=t,e._chainedPromises=[],e._state="pending",r instanceof Promise?e._promise=r:e._promise=new Promise(function(t,a){e._resolve=function(){e._state="resolved",t.apply(e._promise,arguments)},e._reject=function(){e._state="rejected",a.apply(e._promise,arguments)},r(e._resolve,e._reject,function(r){e._cancelFn=r}),e.canceled&&e.cancel()}),e.cancel=function(){for(var r=this,t=r;t._parent&&!t._parent.canceled;)t=t._parent;t._cancel()},e._cancel=function(){var r;if(e.canceled=!0,e._chainedPromises.forEach(function(r){r.cancel&&r.cancel()}),"pending"===e._state&&e._reject){if(e._cancelFn)try{r=e._cancelFn()}catch(r){}e._reject(r)}},e.then=function(r,t,n){var o,i=function(r,t){var e=r(t);return e instanceof a&&o._chainedPromises.push(e),e};return o=new a(e._promise.then(r?i.bind(null,r):null,t?i.bind(null,t):null)),o._parent=e,o._onProgress=n,e._chainedPromises.push(o),o},e.progress=function(){var r=arguments;e._chainedPromises.forEach(function(t){var e=r;t._onProgress&&(e=t._onProgress.apply(t,r)),void 0!==e&&t.progress.apply(t,[e])})}},a.prototype=Object.create(Promise.prototype),a.prototype.constructor=a,a.resolve=function(r){return new a(function(t){t(r)},n.noop)},a.all=function(r){var t=new a(Promise.all(r));return t._chainedPromises=r,t},t.exports=a},{lodash:"lodash"}],ExtractionUtils:[function(r,t,e){"use strict";var a,n=r("lodash"),o=r("ObjectUtils");a={hasValidExtractionCards:function(r,t){var e=t?o.getValue(r,["data","cards","keyword","items"],null):o.getValue(r,["data","extractions","keyword","items"],null);return void 0!==n.find(e||[],{mimeType:"application/vnd.yahoo.purchase"})},hasValidExtractions:function(r,t){return(this.getValidExtractions(r,t)||[]).length>0},getValidExtractions:function(r,t){var e="people"===t?o.getValue(r,["data","cards","from","items"],null):o.getValue(r,["data","cards","keyword","items"],null);return n.filter(e||[],{mimeType:"application/vnd.yahoo.purchase"})}},t.exports=a},{ObjectUtils:"ObjectUtils",lodash:"lodash"}],FolderStore:[function(r,t,e){"use strict";function a(r){this.dispatcher=r,yui.on("ds:folder:change",this.regenerateCache,this),yui.on("ds:account:add",this.regenerateCache,this),yui.on("ds:account:change",this.regenerateCache,this),yui.on("ds:account:remove",this.regenerateCache,this),this.setMaxListeners(256)}function n(r){return A?parseInt(r.id,10):r.folderInfo.index}var o=r("lodash"),i=r("events").EventEmitter,y=r("SearchConstants"),c=r("../../../artifacts/lang"),p=r("ObjectUtils"),A=NeoConfig.imapIn,v=yui.mail.model.DataStore.Folders;a.prototype={constructor:a,sortSystemFolderComparator:function(r,t){var e,a,n=y.SYSTEM_FOLDER_INDEX;return A?(e=p.getValue(r,"types.0",""),a=p.getValue(t,"types.0","")):(e=p.getValue(r,"folderInfo.fid",""),a=p.getValue(t,"folderInfo.fid","")),n[e]-n[a]},getMoveMenuSystemFolderIndex:function(r){return y.MOVE_MENU_SYSTEM_FOLDERS_INDEX[r]},sortMoveMenuSystemFolder:function(r,t){return r.sortIndex-t.sortIndex},sortByFolderNameComparator:function(r,t){var e,a=p.getValue(r,"folderInfo.name",""),n=p.getValue(t,"folderInfo.name",""),o=0,i=0;for(a=a.split("/"),n=n.split("/"),e=a.length<n.length?a.length:n.length;i<e&&0===o;i++)0===(o=a[i].toLowerCase().localeCompare(n[i].toLowerCase()))&&(o=a[i].localeCompare(n[i]));return o||a.length-n.length},getCache:function(){return this.cache||this.fetch()},all:function(){return this.getCache()},fetch:function(){return this.cache=v.get().filter(this.isNotInvisible)},regenerateCache:function(){this.fetch(),this.emit("change")},isNotInvisible:function(r){return r&&"I"!==r.type},isSearchable:function(r){return A?!o.find(r.types,function(r){return-1!==y.UNSEARCHABLE_TYPES.indexOf(r)}):-1===y.UNSEARCHABLE_FIDS.indexOf(r.folderInfo.fid)},isMoveable:function(r){return A?!o.find(r.types,function(r){return-1!==y.UNMOVEABLE_TYPES.indexOf(r)}):-1===y.UNMOVEABLE_FIDS.indexOf(r.folderInfo.fid)},isSystem:function(r){return r.isSystem},isUserCreated:function(r){return!r.isSystem},getSystemFolders:function(){return this.getCache().filter(this.isSystem)},getSearchableSystemFolders:function(){return this.getSystemFolders().filter(this.isSearchable).sort(function(r,t){return r.folderInfo.index-t.folderInfo.index})},getMoveableSystemFolders:function(){return this.getSystemFolders().filter(this.isMoveable)},getMoveableSystemFoldersInOrder:function(){return this.getMoveableSystemFolders().sort(function(r,t){return r.folderInfo.index-t.folderInfo.index})},getMoveableSystemFoldersByAccount:function(r){return o.chain(this.getMoveableFoldersByAccount(r)).filter(function(r){return r.isSystem}).sortBy(n).value()},getMoveableUserFoldersByAccount:function(r){return o.chain(this.getMoveableFoldersByAccount(r)).filter(function(r){return!r.isSystem}).value()},getSearchableUserFolders:function(){return this.getUserFolders().filter(this.isSearchable)},getUserFolders:function(){return this.getCache().filter(this.isUserCreated)},getSearchableFolders:function(){return o.chain(this.getCache()).filter(this.isSearchable).sortBy(n).value()},findByFolderId:function(r){return o.find(this.all(),function(t){return t.id===r})},findByFID:function(r){return o.find(this.all(),function(t){return t.folderInfo.fid===r})},findByName:function(r){return o.find(this.all(),function(t){return t.folderInfo.name===r})},findSystemFolderByType:function(r,t){return o.find(this.all(),function(e){return(!t||t===e.acctId)&&p.getValue(e,"types.0","")===r})},findByIndex:function(r){return o.find(this.all(),function(t){return A?t.id&&t.id.toString()===r.toString():t.folderInfo.index.toString()===r.toString()})},getPrimaryFolderByAccount:function(r){return v.getPrimaryFolderByAccount(r)},getFoldersByAccount:function(r){return o.filter(this.getCache(),function(t){return t.acctId===r})},getSearchableSystemFoldersByAccount:function(r){return o.filter(this.getSearchableFoldersByAccount(r),this.isSystem)},getSearchableUserFoldersByAccount:function(r){return o.filter(this.getSearchableFoldersByAccount(r),this.isUserCreated)},getSearchableFoldersByAccount:function(r){return o.filter(this.getFoldersByAccount(r),this.isSearchable)},getMoveableFoldersByAccount:function(r){return o.filter(this.getFoldersByAccount(r),this.isMoveable)},getFoldersByType:function(r){return o.filter(this.getCache(),function(t){return-1!==t.types.indexOf(r)})},getFoldersByTypeAndAccount:function(r,t){return o.filter(this.getCache(),function(e){return-1!==e.types.indexOf(r)&&e.acctId===t})},getLocalizedFolderName:function(r){var t=this.findByFID(r);if(!t)return r;if(p.getValue(t,"types",[]).indexOf("EXTERNAL_ALL")>-1)return c.str_folder_allmail;switch(t.folderInfo.fid){case"Inbox":return c.str_folder_inbox;case"Draft":return c.str_folder_drafts;case"Sent":return c.str_folder_sent;case"%40B%40Bulk":return c.str_folder_spam;case"Trash":return c.str_folder_trash;default:return t.folderInfo.name}},getLocalizedFolderNameById:function(r){var t=this.findByIndex(r),e=p.getValue(t,["types",0]);if(p.getValue(t,"types",[]).indexOf("EXTERNAL_ALL")>-1)return c.str_folder_allmail;switch(e){case"INBOX":return c.str_folder_inbox;case"DRAFT":return c.str_folder_drafts;case"SENT":return c.str_folder_sent;case"BULK":return c.str_folder_spam;case"TRASH":return c.str_folder_trash}return this.getLocalizedFolderName(t.folderInfo.fid)}},a.decode=function(r){return window.decodeURIComponent(window.unescape(r))},a.normalizeFid=function(r){var t=r.toLowerCase(),e=this.decode(t);return"@c@chats"===e?t="chats":"@b@bulk"===e&&(t="spam"),t},a.storeName="FolderStore",o.mixin(a.prototype,i.prototype),t.exports=a},{"../../../artifacts/lang":2,ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",events:"events",lodash:"lodash"}],GlobalActions:[function(r,t,e){"use strict";var a,n=r("GlobalConstants");a={saveSmartView:function(r,t){r.dispatch(n.SAVE_SEARCH,t)},smartviewsUpdated:function(r,t){r.dispatch(n.SMARTVIEWS_UPDATE,t)},smartviewsLoaded:function(r,t){r.dispatch(n.SMARTVIEWS_LOADED,t)},showNotification:function(r,t){r.dispatch(n.NOTIFICATION_SHOW,t)},showOnboarding:function(r,t){r.dispatch(n.ONBOARDING_SHOW,t)},dismissOnboarding:function(r,t){r.dispatch(n.METADATA_CHANGE,t),r.dispatch(n.ONBOARDING_DISMISSED,t)},setMetaData:function(r,t){r.dispatch(n.METADATA_CHANGE,t)},changeSettings:function(r,t){r.dispatch(n.SETTINGS_CHANGE,t)},searchWindowResize:function(r,t){r.dispatch(n.SEARCH_WINDOW_RESIZE,t)},searchTabActive:function(r,t){r.dispatch(n.SEARCH_TAB_ACTIVE,t)},searchTabInactive:function(r,t){r.dispatch(n.SEARCH_TAB_INACTIVE,t)},searchTabReload:function(r,t){r.dispatch(n.SEARCH_TAB_RELOAD,t)},searchTabClose:function(r,t){r.dispatch(n.SEARCH_TAB_CLOSE,t)},appChange:function(r,t){r.dispatch(n.APP_CHANGE,t)},setTabDirty:function(r,t){r.dispatch(n.SET_TAB_DIRTY,t)}},t.exports=a},{GlobalConstants:"GlobalConstants"}],GlobalConstants:[function(r,t,e){"use strict";var a;a={DEFAULT:"default",NOTIFICATION_SHOW:"NOTIFICATION_SHOW",ONBOARDING_SHOW:"ONBOARDING_SHOW",ONBOARDING_DISMISSED:"ONBOARDING_DISMISSED",METADATA_CHANGE:"METADATA_CHANGE",SETTINGS_CHANGE:"SETTINGS_CHANGE",SEARCH_WINDOW_RESIZE:"SEARCH_WINDOW_RESIZE",SAVE_SEARCH:"SAVE_SEARCH",SMARTVIEWS_LOADED:"SMARTVIEWS_LOADED",SMARTVIEWS_UPDATE:"SMARTVIEWS_UPDATE",SEARCH_TAB_ACTIVE:"SEARCH_TAB_ACTIVE",SEARCH_TAB_RELOAD:"SEARCH_TAB_RELOAD",SEARCH_TAB_INACTIVE:"SEARCH_TAB_INACTIVE",SEARCH_TAB_CLOSE:"SEARCH_TAB_CLOSE",APP_CHANGE:"APP_CHANGE",SET_TAB_DIRTY:"SET_TAB_DIRTY",MAIL_APP:"MAIL_APP",CALENDAR_APP:"CALENDAR_APP",CONTACTS_APP:"CONTACTS_APP",NOTEPAD_APP:"NOTEPAD_APP",FALLBACK_XOBNI_IMG_URL:"https://s1.yimg.com/dh/ap/social/profile/profile_a48.png"},t.exports=a},{}],IO:[function(r,t,e){"use strict";function a(r){var t=f.now(),e=new v(function(n,o,i){var y,c=new XMLHttpRequest,p={},A=!1;c.onreadystatechange=function(){var i,v,u,h=c.readyState,b=f.now()-t;if(4===h)if(A=!0,l.getValue(c,"responseURL",!1)&&c.responseURL.match(/\/v2\//)&&(p.xTiming=c.getResponseHeader("x-timing")),y&&clearTimeout(y),c.status>=200&&c.status<300)f.defer(function(){n({text:c.responseText,status:c.status,url:c.responseURL,resHeaders:p,elapsedTime:b})},1);else{try{v=JSON.parse(c.responseText)}catch(r){}if(403===c.status){if(v&&(i=l.getValue(v,"wssid")))return NeoConfig.wssid=i,yui.common.net.SessionMgr.setWssid(i),r.url=r.url.replace(/wssid=[^&]+/,"wssid="+i),void a(r).then(n,o)}else if(401===c.status)return yui.once("net:reloginSuccessful",function(){a(r).then(n,o)}),void yui.common.net.Error.simpleRelogin();if(l.getValue(v,["error","code"],!1)){try{u=JSON.parse(r.data)}catch(r){}s.statTAE({method:l.getValue(u,"method",""),ymreqid:l.getValue(r,"ymreqid",""),wssid:l.getValue(NeoConfig,"wssid","")},{error:v.error,status:c.status})}o({text:c.responseText,url:c.responseURL,resHeaders:p,status:c.status,elapsedTime:b})}else 3===h&&l.getValue(r,["options","enableStream"],!0)&&f.defer(function(){A||e.progress({text:c.responseText,url:c.responseURL,status:206,resHeaders:p,elapsedTime:b})},1)},c.open(r.method,r.url,!0),Object.keys(r.options).forEach(function(t){var e=r.options[t];"timeout"===t?void 0===c.timeout?y=setTimeout(function(){c.abort(),o({text:"timeout",status:801})},e):(c.timeout=e,c.ontimeout=function(){o({text:"timeout",status:801})}):"headers"===t?Object.keys(e).forEach(function(r){c.setRequestHeader(r,e[r])}):c[t]=e});try{r.cors&&(c.withCredentials=!0),"POST"!==r.method||r.data||(r.data=""),c.send(r.data)}catch(r){o({text:r.message,status:802})}i(function(){return c.abort(),{text:"canceled",status:800}})});return e}function n(r){var t={id:"BatchWrapper",uri:r.url,method:r.method};return(r.data||"POST"===r.method)&&(t.payload=r.data||"",t.payloadType="embedded"),t}function o(r){var t,e,a=l.getValue(yui,["common","Utils","settings"]),n=a&&a.value&&a.value("appid","YahooMailNeo")||"YahooMailNeo";return-1===r.indexOf("wssid=")&&(t=-1===r.indexOf("?")?"?":"&",r+=t+"wssid="+NeoConfig.wssid),-1===r.indexOf("ymreqid=")&&(e=yui.common.net.Session.genReqID().toString(),r+="&ymreqid="+e),-1===r.indexOf("appid=")&&(r+="&appid="+n),-1===r.indexOf("bucketid=")&&NeoConfig.expBucketId&&(r+="&bucketid="+NeoConfig.expBucketId),{url:r,ymreqid:e}}function i(r){var t=new v(function(e,a,n){yui.use("tictac-base-batch-transport",function(o){var i=o.Tictac.base.BatchTransport.send({requests:r},{success:function(r,t,a){e({isBatch:!0,response:a})},fail:function(r,t){a({isBatch:!0,error:t})},progress:function(r,e){t.progress({isBatch:!0,error:e})}},null,"&ymreqid="+yui.common.net.Session.genReqID());n&&i&&i.abort&&n(i.abort)})});return t}function y(r){var t,e,y=window.location.protocol+"\\/\\/"+window.location.hostname,c=new XMLHttpRequest,p=!1,A=/^http(s)?:\/\//i,v=r.options.crossDomainWithoutCredential,f=o(r.url);return r.url=f.url,r.ymreqid=f.ymreqid,t=r.url,A.test(t)&&(window.location.port&&(y+=":"+window.location.port),y+="($|[/?#])",e=new RegExp(y,"i"),e.test(t)||v||(p=!0,void 0!==c.withCredentials&&(r.cors=!0))),p&&!r.cors?i([n(r)]):a(r)}function c(r,t,e){return e=e||{},"object"===(void 0===t?"undefined":A(t))&&(t=JSON.stringify(t),e.headers=e.headers||{},e.headers["Content-Type"]||(e.headers["Content-Type"]="application/json")),y({method:"POST",url:r,data:t,options:e})}function p(r,t){return y({method:"GET",url:r,options:t||{}})}var A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},v=r("EnhancedPromise"),f=r("lodash"),l=r("ObjectUtils"),s=r("StatService");t.exports={get:p,post:c,sendBatch:i}},{EnhancedPromise:"EnhancedPromise",ObjectUtils:"ObjectUtils",StatService:"StatService",lodash:"lodash"}],ListItem:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash");a=n.createClass({displayName:"ListItem",propTypes:{id:n.PropTypes.any.isRequired,isHero:n.PropTypes.bool,onClick:n.PropTypes.func.isRequired,onActive:n.PropTypes.func,onContextMenu:n.PropTypes.func},getDefaultProps:function(){return{onContextMenu:o.noop,isHero:!1}},render:function(){var r,t=this,e=t.props,a={active:e.active};return e.className&&(a[e.className]=!0),r=n.addons.classSet(a),n.createElement("li",{style:e.style,title:e.title,tabIndex:e.tabIndex||"-1",key:e.key,role:e.role,className:r,onClick:t.handleItemClick,onContextMenu:t.handleItemContextMenu},e.children)},componentDidUpdate:function(){var r=this;r.props.active&&(r.props.onActive?r.props.onActive(r):r.getDOMNode().focus())},handleItemClick:function(r){var t=this;t.props.onClick(r,t.props.id,t.props.isHero)},handleItemContextMenu:function(r){var t=this;t.props.onContextMenu(r,t.props.id)}}),t.exports=a},{lodash:"lodash","react/addons":"react/addons"}],ListNavigation:[function(r,t,e){"use strict";var a={UP_DIRECTION:-1,DOWN_DIRECTION:1,navigate:function(r){var t=this.minIndex||0,e=this.getItems().length-1,a=this.state.selectedIndex+r;return a>e?a=t:a<t&&(a=e),this.setState({selectedIndex:a}),a},navigateDown:function(){return this.navigate(this.DOWN_DIRECTION)},navigateUp:function(){return this.navigate(this.UP_DIRECTION)}};t.exports=a},{}],List:[function(r,t,e){"use strict";var a,n=r("react/addons");a=n.createClass({displayName:"List",propTypes:{onKeyDown:n.PropTypes.func},render:function(){var r=this.props;return n.createElement("ul",{className:r.className,tabIndex:r.tabIndex,"data-title":r.dataTitle,onKeyDown:r.onKeyDown,role:r.role},r.children)},focus:function(){this.getDOMNode().focus()}}),t.exports=a},{"react/addons":"react/addons"}],MailPreferences:[function(r,t,e){"use strict";var a;a=function(){return{get:function(r,t){var e=this;return yui.use("mail-persist-meta-data",function(a){var n,o=a.mail.persist.MetaData;o&&t&&(n=e.stringToObject(o.get(r)),t(n))})},set:function(r,t,e){var a=this;return yui.use("mail-persist-meta-data",function(n){var o,i=n.mail.persist.MetaData;r&&void 0!==t&&(o=a.objectToString(t),i.set(r,o),e&&e(n))})},stringToObject:function(r){var t;try{t=JSON.parse(r)}catch(e){t=r}return t},objectToString:function(r){var t;try{t=JSON.stringify(r)}catch(e){t=r}return t}}}(),t.exports=a},{}],MenuButton:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("Menu");a=n.createClass({displayName:"MenuButton",propTypes:{disabled:n.PropTypes.bool,label:n.PropTypes.node,title:n.PropTypes.string,showChevron:n.PropTypes.bool,dropdownXOrigin:n.PropTypes.oneOf(["left","right"]),dropdownYOrigin:n.PropTypes.oneOf(["top","bottom"]),onOpen:n.PropTypes.func},mixins:[n.addons.PureRenderMixin],getDefaultProps:function(){return{showChevron:!1}},getInitialState:function(){return{isMenuOpen:!1,menuContentConfig:{}}},componentDidMount:function(){this.setState({node:this.getDOMNode()})},render:function(){var r,t=this,e={"search-menu-button":!0,opened:t.state.isMenuOpen};return e[t.props.className]=!0,r=n.addons.classSet(e),n.createElement("button",{className:r,title:t.props.title,role:"button","aria-haspopup":"true","aria-label":t.props.ariaLabel,disabled:t.props.disabled,onMouseDown:t.handleMouseDown,onKeyDown:t.handleKeyDown},t.props.label,t.renderChevron(),t.renderMenu())},renderChevron:function(){if(this.props.showChevron)return n.createElement("i",{className:"icon icon-chevron-down"})},renderMenu:function(){var r=this.props;if(this.state.isMenuOpen)return n.createElement(o,{anchorNode:this.state.node,closeMenu:this.closeMenu,menuContentConfig:this.state.menuContentConfig,keyboardNavDisabled:r.keyboardNavDisabled,ddClassName:r.ddClassName,dropdownXOrigin:r.dropdownXOrigin,dropdownYOrigin:r.dropdownYOrigin},r.children)},openMenu:function(r){var t=this;t.setState({isMenuOpen:!0,menuContentConfig:r||{}}),t.props.onOpen&&t.props.onOpen()},closeMenu:function(r){var t=this;t.setState({isMenuOpen:!1}),r&&"keydown"===r.type&&t.getDOMNode().focus()},toggleMenuVisibility:function(r){var t=this;t.state.isMenuOpen?t.closeMenu(r):t.openMenu()},handleMouseDown:function(r){this.toggleMenuVisibility(r)},handleKeyDown:function(r){r.key&&"Enter"===r.key?(this.toggleMenuVisibility(r),r.stopPropagation()):r.key&&"ArrowDown"===r.key&&(this.openMenu(),r.stopPropagation())},isMenuOpen:function(){return this.state.isMenuOpen}}),t.exports=a},{Menu:"Menu","react/addons":"react/addons"}],MenuItemGroup:[function(r,t,e){"use strict";var a,n=r("react/addons");a=n.createClass({displayName:"MenuItemGroup",propTypes:{overflow:n.PropTypes.bool,title:n.PropTypes.string,togglable:n.PropTypes.bool,value:n.PropTypes.string},mixins:[n.addons.PureRenderMixin],getDefaultProps:function(){return{overflow:!1,togglable:!1,title:"",value:""}},render:function(){var r,t=this,e=t.props,a={"search-menu-group":!0,"search-menu-togglable":e.togglable,"search-menu-group-overflow":e.overflow};return a[e.className]=e.className,r=n.addons.classSet(a),n.createElement("section",{className:r,title:e.title,key:e["data-key"],"data-value":e.value},t.renderGroupTitle(),t.props.children)},renderGroupTitle:function(){if(this.props.title)return n.createElement("header",{className:"search-menu-group-title"},this.props.title)}}),t.exports=a},{"react/addons":"react/addons"}],MenuItem:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash");a=n.createClass({displayName:"MenuItem",propTypes:{onClick:n.PropTypes.func.isRequired,className:n.PropTypes.string,selected:n.PropTypes.bool,title:n.PropTypes.string,disabled:n.PropTypes.bool,menuContentConfig:n.PropTypes.object},getInitialState:function(){return{active:!1,disabled:void 0}},getDefaultProps:function(){return{onClick:o.noop,menuContentConfig:{},highlighted:!1}},setDisabled:function(r){this.setState({disabled:r||void 0})},setActive:function(r){this.setState({active:r})},render:function(){var r,t=this,e=t.props,a={"search-menuitem":!0,"menu-active-item":t.state.active,selected:e.selected,highlighted:e.highlighted};return e.className&&(a[e.className]=!0),r=n.addons.classSet(a),n.createElement("div",{className:r,hidden:e.hidden,onClick:e.onClick,"data-value":e.value,"data-disabled":e.disabled||t.state.disabled||void 0,title:e.title,tabIndex:"-1"},n.Children.map(e.children,function(r){return n.isValidElement(r)?n.addons.cloneWithProps(r,{setDisabled:t.setDisabled,setActive:t.setActive,menuContentConfig:t.props.menuContentConfig,closeMenu:t.props.closeMenu}):r}))}}),t.exports=a},{lodash:"lodash","react/addons":"react/addons"}],MenuNavigation:[function(r,t,e){"use strict";var a={UP_DIRECTION:-1,DOWN_DIRECTION:1,navigate:function(r){var t=this,e=t.minIndex||0,a=t.state.menuItemCount-1,n=t.state.focusIndex+r;n>a?n=e:n<e&&(n=a),t.refs[t.itemPrefix+n].getDOMNode().focus(),t.setState({focusIndex:n})},navigateDown:function(){var r=this;r.navigate(r.DOWN_DIRECTION)},navigateUp:function(){var r=this;r.navigate(r.UP_DIRECTION)}};t.exports=a},{}],Menu:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("MenuNavigation"),i=r("BodyDropdown"),y=r("DOMUtils"),c=r("ObjectUtils"),p=n.addons.cloneWithProps;a=n.createClass({displayName:"Menu",propTypes:{closeMenu:n.PropTypes.func.isRequired,dropdownXOrigin:n.PropTypes.oneOf(["left","right"]),dropdownYOrigin:n.PropTypes.oneOf(["top","bottom"]),menuContentConfig:n.PropTypes.object},mixins:[n.addons.PureRenderMixin,o],getDefaultProps:function(){return{ddClassName:"",menuContentConfig:{}}},getInitialState:function(){return{focusIndex:-1,isDropdownOpen:!1,menuItemCount:this.getMenuItemCount(this.props.children)}},componentDidMount:function(){this.props.keyboardNavDisabled||window.addEventListener("keydown",this.handleKeyDown,!0),this.props.ddClassName.indexOf("right-folder-dd search-folder-dropdown")>-1&&this.scrollItemIntoView("selected"),this.scrollItemIntoView("highlighted")},componentWillUnmount:function(){this.props.keyboardNavDisabled||window.removeEventListener("keydown",this.handleKeyDown,!0)},componentDidUpdate:function(){this.setState({menuItemCount:this.getMenuItemCount(this.props.children)}),this.props.ddClassName.indexOf("right-folder-dd search-folder-dropdown")>-1&&this.scrollItemIntoView("selected")},scrollItemIntoView:function(r){var t,e,a,n=this;if(r){for(a in n.refs)if(0===a.indexOf(n.itemPrefix)&&c.getValue(n.refs[a],"props."+r,!1)){e=n.refs[a],e=e&&e.getDOMNode();break}if(e){for(t=e.parentElement;t&&t.clientHeight>=t.scrollHeight;)t=t.parentElement;t&&e.offsetTop>=t.clientHeight-100&&(t.scrollTop=e.offsetTop-25)}}},groupPrefix:"group",itemPrefix:"item",render:function(){var r=this,t=r.props,e="search-menu "+r.props.ddClassName;return n.createElement(i,{className:e,anchorNode:t.anchorNode,parentNode:t.parentNode,coordinates:t.coordinates,closeDropdown:t.closeMenu,onClick:t.closeMenu,dropdownXOrigin:t.dropdownXOrigin,dropdownYOrigin:t.dropdownYOrigin},r.addMenuItemRefs(t.children,{itemIndex:-1,groupIndex:-1}))},handleKeyDown:function(r){var t=this;switch(r.keyCode){case 13:-1!==t.state.focusIndex&&(t.refs[t.itemPrefix+t.state.focusIndex].getDOMNode().click(),y.halt(r));break;case 27:t.props.closeMenu(),y.halt(r);break;case 38:t.navigateUp(),y.halt(r);break;case 40:t.navigateDown(),y.halt(r)}},isMenuItemGroup:function(r){return"MenuItemGroup"===r.type.displayName||"MenuItemGroup"===r.props._type},isMenuItem:function(r){return"MenuItem"===r.type.displayName},isEnabled:function(r){return!r.props.disabled},addMenuItemRefs:function(r,t){var e=this;return n.Children.map(r,function(r){var a=e.isMenuItemGroup(r),n=e.isMenuItem(r),o=e.isEnabled(r);return a?(t.groupIndex+=1,p(r,{key:e.groupPrefix+t.groupIndex,ref:e.groupPrefix+t.groupIndex,menuContentConfig:e.props.menuContentConfig,children:e.addMenuItemRefs(r.props.children,t)})):n&&o?(t.itemIndex+=1,p(r,{key:e.itemPrefix+t.itemIndex,ref:e.itemPrefix+t.itemIndex,menuContentConfig:e.props.menuContentConfig,closeMenu:e.props.closeMenu})):n?r:void 0})},getMenuItemCount:function(r){var t=this,e=0;return n.Children.forEach(r,function(r){t.isEnabled(r)&&(t.isMenuItemGroup(r)?e+=t.getMenuItemCount(r.props.children):Array.isArray(r)?e+=t.getMenuItemCount(r):t.isMenuItem(r)&&(e+=1))}),e}}),t.exports=a},{BodyDropdown:"BodyDropdown",DOMUtils:"DOMUtils",MenuNavigation:"MenuNavigation",ObjectUtils:"ObjectUtils","react/addons":"react/addons"}],MessageConstants:[function(r,t,e){"use strict";r("lodash").forEach(["SPAM_TYPE_NORMAL","SPAM_TYPE_NOTMINE","SPAM_TYPE_PHISH","SPAM_TYPE_HACKED","MOVE","MOVE_SUCCESS","MOVE_FAILURE","DELETE","DELETE_SUCCESS","DELETE_FAILURE","MARK_READ","MARK_READ_SUCCESS","MARK_READ_FAILURE","MARK_UNREAD","MARK_UNREAD_SUCCESS","MARK_UNREAD_FAILURE","STAR","STAR_SUCCESS","STAR_FAILURE","UNSTAR","UNSTAR_SUCCESS","UNSTAR_FAILURE","REPORT_SPAM","REPORT_SPAM_SUCCESS","REPORT_SPAM_FAILURE","ARCHIVE","RESTORE","UNSUBSCRIBE","ARCHIVE_SUCCESS","ARCHIVE_FAILURE","PRINT","QUICK_FILTER","SET_ENCODING","UNDO","UNDO_SUCCESS","UNDO_FAILURE","MESSAGES_RESTORED","UPDATE_MESSAGES","UPDATE_CONV","PROGRESS_START","PROGRESS_SUCCESS","PROGRESS_FAILURE","PROGRESS_CANCEL","PROGRESS_UPDATE","REDIRECT_MESSAGE","NOTIFICATION_DESTROYED"],function(r){e[r]=r}),e.SPAM_FID="%40B%40Bulk",e.TRASH_FID="Trash",e.MIN_BULK_SIZE=30,e.FILL_SEARCH_RESULTS=["MOVE_SUCCESS","DELETE_SUCCESS","REPORT_SPAM_SUCCESS","ARCHIVE_SUCCESS"]},{lodash:"lodash"}],ObjectUtils:[function(r,t,e){"use strict";var a=r("lodash"),n=function(){return{getValue:function(r,t,e){var n,o,i,y=a.isString(t)?t.split("."):t;for(o=0,i=y.length;o<i;o++){if(n=y[o],!(a.isObject(r)&&n in r))return e;r=r[n]}return r},setValue:function(r,t,e){var n;a.isString(t)&&(t=t.split(".")),t.length>1?(n=t.shift(),this.setValue(r[n]=a.isObject(r[n])?r[n]:{},t,e)):r[t[0]]=e}}}();t.exports=n},{lodash:"lodash"}],Onboarding:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("Context"),i=r("BodyDropdown"),y=r("GlobalActions"),c=r("./OnboardingText.jsx");a=n.createClass({displayName:"Onboarding",mixins:[o,n.addons.PureRenderMixin],_templates:{OnboardingText:c},propTypes:{templateType:n.PropTypes.string,title:n.PropTypes.node,body:n.PropTypes.node,buttonText:n.PropTypes.node,id:n.PropTypes.string,ddClassName:n.PropTypes.string,metaDataKey:n.PropTypes.string.isRequired},getDefaultProps:function(){return{templateType:"OnboardingText",ddClassName:""}},componentDidMount:function(){var r=this;r._yuiEvents=[],r._yuiEvents.push(yui.once("tabChange",function(){setTimeout(r.dismissOnboarding,0)}),yui.once("tab:title",function(){setTimeout(r.dismissOnboarding,0)}))},componentWillUnmount:function(){this._yuiEvents.forEach(function(r){r.detach()})},render:function(){var r=this,t=r.props,e=t.ddClassName;return n.createElement(i,{className:e,anchorNode:t.anchorNode,parentNode:t.parentNode,coordinates:t.coordinates,dropdownXOrigin:t.dropdownXOrigin,dropdownYOrigin:t.dropdownYOrigin,closeDropdown:r.dismissOnboarding,onClick:r.clickOnboarding},n.createElement(r._templates[t.templateType],t))},dismissOnboarding:function(){var r=this,t={};t[r.props.metaDataKey]=!0,r.executeAction(y.dismissOnboarding,t)},clickOnboarding:function(r){-1!==r.target.className.indexOf("onboarding-btn")&&this.dismissOnboarding()}}),t.exports=a},{"./OnboardingText.jsx":6,BodyDropdown:"BodyDropdown",Context:"Context",GlobalActions:"GlobalActions","react/addons":"react/addons"}],RelativeDateFormatter:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("DateTimeFormatter");a=n.createClass({displayName:"RelativeDateFormatter",propTypes:{className:n.PropTypes.string,template:n.PropTypes.string,timestamp:function(r,t){if(r[t]&&"Invalid Date"===new Date(r[t]).toString())return new Error("Supplied value is an invalid input for Date()")}},mixins:[n.addons.PureRenderMixin],render:function(){var r=this,t=r.props.timestamp?new Date(r.props.timestamp):new Date;return n.createElement("time",{className:r.props.className,dateTime:t.toISOString(),title:r.getFullDateTimeString(t)},r.renderDateTime(t))},renderDateTime:function(r){var t=this;return t.props.template?o.transform(r,t.props.template):t.getRelativeDateTime(r)},getFullDateTimeString:function(r){return o.transform(r,o.FULL_WITH_SHORTMONTH)},getRelativeDateTime:function(r){var t=this;return t.isToday(r)?o.transform(r,o.TIME):t.isThisYear(r)?o.transform(r,o.INFORMAL):o.transform(r,o.COMPACT)},isThisYear:function(r){return(new Date).getFullYear()===r.getFullYear()},isToday:function(r){var t=new Date;return this.isThisYear(r)&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()}}),t.exports=a},{DateTimeFormatter:"DateTimeFormatter","react/addons":"react/addons"}],SearchConstants:[function(r,t,e){"use strict";var a;a={SEARCH_KEYWORD:"SEARCH_KEYWORD",RESET_SUGGESTION:"RESET_SUGGESTION",SET_QUERY:"SET_QUERY",REMOVE_QUERY:"REMOVE_QUERY",CONTACTS_TAB:"CONTACTS_TAB",CALENDAR_TAB:"CALENDAR_TAB",NOTEPAD_TAB:"NOTEPAD_TAB",OTHER_TAB:"OTHER_TAB",SEARCH_TAB:"SEARCH_TAB",FOLDER_TAB:"FOLDER_TAB",ADV_SEARCH_CONTACT_SUGGEST_TO:"ADV_SEARCH_CONTACT_SUGGEST_TO",ADV_SEARCH_CONTACT_SUGGEST_FROM:"ADV_SEARCH_CONTACT_SUGGEST_FROM",CONTACT_SUGGESTIONS_RECEIVED:"CONTACT_SUGGESTIONS_RECEIVED",BOOTCAMP_SUGGESTIONS_RECEIVED:"BOOTCAMP_SUGGESTIONS_RECEIVED",BOOTCAMP_SUGGESTIONS_FAILURE:"BOOTCAMP_SUGGESTIONS_FAILURE",WEB_SUGGESTIONS_RECEIVED:"WEB_SUGGESTIONS_RECEIVED",WEB_SUGGESTIONS_FAILURE:"WEB_SUGGESTIONS_FAILURE",SEARCH_START:"SEARCH_START",SEARCH_UPDATE:"SEARCH_UPDATE",SEARCH_SUCCESS:"SEARCH_SUCCESS",SEARCH_FAILURE:"SEARCH_FAILURE",SEARCH_ADS_SUCCESS:"SEARCH_ADS_SUCCESS",CONTACT_PHOTO_SOURCE:"CONTACT_PHOTO_SOURCE",GET_CONTACT_PHOTO_SOURCE:"GET_CONTACT_PHOTO_SOURCE",SEARCH:"SEARCH",LOAD_RECENT_SEARCHES:"LOAD_RECENT_SEARCHES",ADD_RECENT_SEARCH:"ADD_RECENT_SEARCH",REMOVE_RECENT_SEARCH:"REMOVE_RECENT_SEARCH",SEARCH_MESSAGE_VIEW:"SEARCH_MESSAGE_VIEW",SEARCH_PHOTO_VIEW:"SEARCH_PHOTO_VIEW",SEARCH_DOCUMENT_VIEW:"SEARCH_DOCUMENT_VIEW",SEARCH_LINK_VIEW:"SEARCH_LINK_VIEW",FETCH_MORE:"FETCH_MORE",FETCH_MORE_SUCCESS:"FETCH_MORE_SUCCESS",FETCH_MORE_FAILURE:"FETCH_MORE_FAILURE",FILL_SCREEN:"FILL_SCREEN",FILL_SCREEN_SUCCESS:"FILL_SCREEN_SUCCESS",FILL_SCREEN_FAILURE:"FILL_SCREEN_FAILURE",SET_SELECTED_ITEMS:"SET_SELECTED_ITEMS",CLOSE_CURRENT_TAB:"CLOSE_CURRENT_TAB",CHANGE_SEARCH_VIEW:"CHANGE_SEARCH_VIEW",CHANGE_SEARCH_FILTER:"CHANGE_SEARCH_FILTER",CHANGE_FILTER_FETCH_START:"CHANGE_FILTER_FETCH_START",CHANGE_FILTER_FETCH_SUCCESS:"CHANGE_FILTER_FETCH_SUCCESS",CHANGE_FILTER_FETCH_FAILURE:"CHANGE_FILTER_FETCH_FAILURE",CHANGE_VIEW_FETCH_START:"CHANGE_VIEW_FETCH_START",CHANGE_VIEW_FETCH_SUCCESS:"CHANGE_VIEW_FETCH_SUCCESS",CHANGE_VIEW_FETCH_FAILURE:"CHANGE_VIEW_FETCH_FAILURE",SEARCH_TAB_CLOSE:"SEARCH_TAB_CLOSE",CLEAN_UP_SEARCH_RESULTS:"CLEAN_UP_SEARCH_RESULTS",SEARCH_IN_ALL:"SEARCH_IN_ALL",SEARCH_IN_ACCOUNT:"SEARCH_IN_ACCOUNT",SEARCH_IN_FOLDERS:"SEARCH_IN_FOLDERS",SEARCH_IN_SMARTVIEW:"SEARCH_IN_SMARTVIEW",REGEX_IN:/(?:\s|^)in:("[^")]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_IS:/(?:\s|^)is:("[^")]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_SANITIZE_HAS_IS_IN_MATCH:/(is:|has:|in:|"|')/g,REGEX_HAS_IS_IN:/(?:\s|^)(has|is|in):("[^"]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_HAS_IS_IN_ACCOUNT:/(?:\s|^)(has|is|in|account):("[^"]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_AFTER_BEFORE:/(?:\s|^)(after|before):"?(\d{4}[\/-]\d{1,2}[\/-]\d{1,2})"?(?=\s|$)/g,REGEX_FROM_TO_SUBJECT:/(?:\s|^)(from|to|fromEmail|toEmail|subject):('(?:[^'\\]|\\')*'|"(?:[^"\\]|\\")*"|[^\s]*)(?=\s|$)/g,UNSEARCHABLE_FIDS:["%40B%40Bulk","%40C%40CHATS"],UNMOVEABLE_FIDS:["%40C%40Chats","Sent","Draft"],COMMON_TYPES:["INBOX","DRAFT","SENT","TRASH"],UNSEARCHABLE_TYPES:["BULK","CHAT","CHATS"],UNMOVEABLE_TYPES:["SENT","DRAFT","CHAT","CHATS"],SAVE_CURRENT_SEARCH:"SAVE_CURRENT_SEARCH",SMARTVIEW_CATEGORIES:["unread","starred","personal","shopping","financial","social","travel"],SMARTVIEW_CATEGORIES_KEYS:["important","me2me","unread","starred","personal","social","shopping","travel","financial"],SYSTEM_FOLDER_INDEX:{INBOX:0,DRAFT:1,SENT:2,ARCHIVE:3,BULK:4,"%40B%40BULK":4,TRASH:5},SYSTEM_FOLDERS_NO_FILTER:["INBOX","BULK","%40B%40BULK"],MOVE_MENU_SYSTEM_FOLDERS_INDEX:{Inbox:0,Archive:1,
Spam:2,Trash:3},ONLINE_DOCS_PROVIDER:{gdocs:"gdrive"},FILL_PERMISSION_WINDOW:"FILL_PERMISSION_WINDOW",CLOSE_GDOC_PERMISSION:"CLOSE_GDOC_PERMISSION",MESSAGES:"MESSAGES",PHOTOS:"PHOTOS",DOCUMENTS:"DOCUMENTS",LINKS:"LINKS",DOCS:"DOCS",PEOPLE:"PEOPLE",MAIN:"MAIN",FILTER_ALL:"ALL",FILTER_FROM:"FROM",FILTER_TO:"TO",FILTER_KEYWORD:"WITH_KEYWORD",FILTER_RELATED:"RELATED",CONTACT_ADD:"CONTACT_ADD",PERSON_TOKEN_FALLBACK_IMG_DATA:"'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PHBhdGggZD0iTTUuODIzIDE2Ljc5OGwxNCAuMDAydi0xLjMzNXMuMDktLjg2LTEuNzYyLTEuNjRjLS45MTMtLjM4NC0xLjk5Mi0xLjEyLTMuOTI4LTEuMzU2LjU5Ni0uNDI1Ljg1Ny0xLjMwMiAxLjM2NS0yLjUxOGwuMDIzLS4wNmMuMTE2LjAyLjIzNi4wMi4zMjItLjAzLjIzNS0uMTM4LjM3OC0uODk1LjM4Mi0xLjI2Mi4wMDYtLjU1LS4yODctLjQ5Ny0uMjg3LS40OTdsLS4wMjQtLjAwNWMuMDAyLS4wNDQuMDA1LS4wODcuMDA1LS4xMyAwLS41MTcuMTA1LTEuMzQ4LS4wMzItMS44MDQtLjIxLS43MDYtLjQ2NC0xLjQ4Ni0xLjAyMy0xLjQ4Ni0uNTIgMC0uMTY3LS42MS0uODAyLS44MTMtLjY1NS0uMjEtMS43MzYuMTYtMS45NTQuMTYtLjMxNSAwLTEuMTA4LjIzLTEuNjU1Ljc3Ni0uMzg1LjM4NS0uMzQyLjY1LS41NTQgMS4zNi0uMTQuNDY3LS4wMzIgMS4zMS0uMDMyIDEuODA4IDAgLjA0NC4wMDMuMDg4LjAwNC4xMzItLjAwOCAwLS4wMTUuMDAzLS4wMTUuMDAzcy0uMjkzLS4wNTQtLjI4Ni40OTdjLjAwNC4zNjguMTQ2IDEuMTI0LjM4MiAxLjI2LjA4My4wNS4yLjA1Mi4zMS4wMzMuMDA4LjAxOC4wMTYuMDM2LjAyLjA1NC41MDYgMS4yMDcuNzgzIDIuMDkgMS4zNzMgMi41MTctMS45NTUuMjMtMy4wNDIuOTczLTMuOTYgMS4zNTgtMS44NjMuNzc3LTEuODcgMS41MzItMS44NyAxLjUzMnYxLjQ0NHoiIGZpbGw9IiMxQzg5RkYiLz48L3N2Zz4='"},t.exports=a},{}],SlideShow:[function(r,t,e){"use strict";var a=r("react/addons"),n=a.createClass({displayName:"SlideShow",propTypes:{items:a.PropTypes.array.isRequired,activeIndex:a.PropTypes.number.isRequired,setActiveIndex:a.PropTypes.func.isRequired,visible:a.PropTypes.bool.isRequired,closeSlideShow:a.PropTypes.func.isRequired},closeEvent:null,handleIndexUpdate:function(r){this.props.setActiveIndex(r)},shouldComponentUpdate:function(r){return r.visible!==this.props.visible||r.activeIndex!==this.props.activeIndex||r.items.length!==this.props.items.length},componentDidUpdate:function(){this.props.visible?yui.fire("open-light-document-preview",{type:"DPTYPE_BootCampItems",notifyIndexUpdate:this.handleIndexUpdate,items:this.props.items,activeIndex:this.props.activeIndex}):yui.fire("close-light-document-preview")},componentDidMount:function(){var r=this;this.closeEvent=yui.on("light-document-preview:closed",function(){r.props.closeSlideShow()}),this.props.visible&&yui.fire("open-light-document-preview",{type:"DPTYPE_BootCampItems",notifyIndexUpdate:this.handleIndexUpdate,items:this.props.items,activeIndex:this.props.activeIndex})},componentWillUnmount:function(){this.closeEvent.detach(),yui.fire("close-light-document-preview")},render:function(){return null}});t.exports=n},{"react/addons":"react/addons"}],StatService:[function(r,t,e){"use strict";var a,n=r("lodash"),o=window.NeoConfig||{};a=function(){var r={},t={tags:{colo:o.colo,farm:o.farm}};return{stat:function(r){var e=r;n.isString(r)&&(e={name:r}),yui.use("ymma-stats",function(r){r.fire("util:ymstats",n.merge(e,t))})},statTAE:function(r,t,e){var a,n,i=this,y=t.error.code,c=t.status,p="prod"===o.mailEnv?o.hostName.split(".")[3]:"",A=r.method;yui.use("mail-errormap","mail-error",function(v){a=v.mail.Errormap.getErrorInfo({code:y,method:A,suppressStat:e&&e.suppressStat,suppressNotification:e&&e.suppressNotification}),2!==a.tae&&13!==a.tae||"SaveMessage"!==A&&"SendMessage"!==A||(a.customCode=v.mail.Error.getSendSaveCustomErrorCode(JSON.stringify(t))),i.stat({name:a.suppressStat?"client_error":"ue_client_error",tags:{api:A,tae:a.tae,code:a.customCode||y,farm:o.farm.substr(1),ymreqid:r.ymreqid,colo:p,httpStatusCode:c}}),i.webserviceFail(a.tae,A,y,!a.suppressStat),n={m:(a.suppressStat?"":"UE_")+"DEBUG_TAE:"+(a.tae||"null")+":"+(A||"null")+":"+(y||"null")+":"+o.farm+" ",api:(A||"null")+" ",reason:(y||"null")+" ",errinfo:a,ymreqid:r.ymreqid,wssid:r.wssid,tab:"SEARCH"},i.mailLog(n,1,"tae"+a.tae)})},lighthouseBeaconStat:function(r,t){yui.fire("lhStat:feature_latency",{message:r,duration:t})},timerStart:function(t){r[t]=Date.now()},timerCurrentDuration:function(t){return r[t]&&Date.now()-r[t]},timerComplete:function(t){var e;return r[t]&&(e=Date.now()-r[t],delete r[t]),e},getTimerStart:function(t){return r[t]},featureInvoke:function(r){yui.fire("stat:feature_invoke",n.merge({message:r,feature_group:"search"},t))},featureComplete:function(r){yui.fire("stat:feature_complete",n.merge({message:r,feature_group:"search"},t))},featureFail:function(r){yui.fire("stat:feature_fail",n.merge({message:r,feature_group:"search",api:r,visible:"yes"},t))},featureLatency:function(r,e,a){yui.fire("stat:feature_latency",n.merge({message:r,feature_group:a||"search",value:e},t))},apiLatency:function(r,t,e){yui.fire("stat:feature_latency",n.merge({message:r,feature_group:"search",value:t},e))},webserviceFail:function(r,t,e,a){yui.fire("stat:webservice_fail",{tab:"SEARCH",tae:r,api:t,message:e,visible:a?"yes":"no"})},logRapid:function(r,t){yui.use("search-ult",function(e){e.fire(r,t)})},mailLog:function(r,t,e){t&&!e&&(e="stat_service_debug"),yui.fire("MailLog",r,t,e)}}}(),t.exports=a},{lodash:"lodash"}],StringUtils:[function(r,t,e){"use strict";var a,n=r("lodash"),o=r("url"),i=r("./RTLCharactersRegExp"),y=r("./NeutralCharactersRegExp"),c=r("./ArabicShapingRegExp"),p=c.rightJoiner,A=c.leftJoiner;a={hashCode:function(r){var t,e;for(e=0;e<r.length;e++)t=31*t+r.charCodeAt(e)<<0;return t},escapeHtml:function(r){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return(r||"").replace(/[&<>'"]/g,function(r){return t[r]})},startsWith:function(r,t,e){return e=e||0,r.lastIndexOf(t,e)===e},startsWithIgnoreCase:function(r,t,e){return this.startsWith(r.toLowerCase(),t.toLowerCase(),e)},contains:function(r,t,e){return-1!==r.indexOf(t,e)},containsIgnoreCase:function(r,t,e){return this.contains(r.toLowerCase(),t.toLowerCase(),e)},indexOfIgnoreCase:function(r,t,e){return e=e||0,r.toLowerCase().indexOf(t.toLowerCase(),e)},escapeRegExp:function(r){return r.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},capitalize:function(r){return r[0].toUpperCase()+r.slice(1)},stripHTML:function(r){return r.replace(/<\/?.*?>/g,"")},overWriteQueryParam:function(r,t){var e=o.parse(r,!0);return n.size(t)<0||!e||!e.query?r:(n.forOwn(t,function(r,t){null===r||void 0===r?delete e.query[t]:e.query[t]=r}),e.search=null,o.format(e))},addUrlParameters:function(r,t){var e,a=r;return a?(-1===a.indexOf("?")?a+="?":"&"!==a.charAt(a.length-1)&&(a+="&"),e=Object.keys(t).map(function(r){return[encodeURIComponent(r),encodeURIComponent(t[r])].join("=")}),a+e.join("&")):""},stringReplace:function(r,t){var e=r.split(/({{{?.*?}}}?)/);return"function"==typeof t?e.map(function(r){var e=r.match(/{{([^}]+)}}/);return e?t(e[1].trim()):r}):e.map(function(r){var e=r.match(/{{([^}]+)}}/);return e?t[e[1].trim()]:r})},getTextDirection:function(){var r=new RegExp("^(?:"+y+")*(?:"+i+")"),t=new RegExp("^(?:"+y+")*$");return function(e){var a="ltr";return r.test(e)?a="rtl":t.test(e)&&(a=null),a}}(),getBidiString:function(r,t){var e;if("string"==typeof r){if("ltr"===(e=this.getTextDirection(r)||t))return"‪"+r+"‬";if("rtl"===e)return"‬"+r+"‫"}return r},bidiSafeConcatenate:function(r,t){return t=t||"ltr",Array.isArray(r)?n.reduce(r,function(r,e){return r+this.getBidiString(String(e),t)},"",this):r},mightNeedJoiner:function(r){return r.charCodeAt(0)>=1568},nextNeedsJoiner:function(r){return(r=r.slice(-1))&&this.mightNeedJoiner(r)&&A.test(r)},previousNeedsJoiner:function(r){return(r=r[0])&&this.mightNeedJoiner(r)&&p.test(r)},addRTLJoiners:function(r,t){return t=t||"‍",n.each(r,function(r,e,a){0!==e&&this.previousNeedsJoiner(r)&&this.nextNeedsJoiner(a[e-1])&&(a[e-1]=a[e-1]+t,a[e]=t+a[e]),a[e+1]&&this.nextNeedsJoiner(r)&&this.previousNeedsJoiner(a[e+1])&&(a[e+1]=t+a[e+1],a[e]=a[e]+t)},this),r},getFileName:function(r){return"string"==typeof r?-1!==r.lastIndexOf(".")?r.slice(0,r.lastIndexOf(".")+1):r:""},getFileExtension:function(r){return"string"==typeof r&&-1!==r.lastIndexOf(".")&&r.slice(r.lastIndexOf(".")+1)||""}},t.exports=a},{"./ArabicShapingRegExp":3,"./NeutralCharactersRegExp":4,"./RTLCharactersRegExp":5,lodash:"lodash",url:17}],Template:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash");a=n.createClass({displayName:"Template",mixins:[n.addons.PureRenderMixin],render:function(){var r=this,t=o.template(r.props.tmpl,null)(r.props);return n.createElement("span",{dangerouslySetInnerHTML:{__html:t}})}}),t.exports=a},{lodash:"lodash","react/addons":"react/addons"}],TokenUtils:[function(r,t,e){"use strict";var a,n=r("lodash"),o=r("StringUtils"),i=r("../../../artifacts/lang");a={getTokenText:function(r,t){var e,a,y,c=r||[],p=t||"";if(!c.length)return"";switch(e=n.find(c,function(r){return o.containsIgnoreCase(r,p)})||c[0],c.length){case 1:y=c[0];break;case 2:a=i.str_suggestion_other_email_singular;break;default:a=i.str_suggestion_other_email_plural}return a&&(y=n.template(a,null)({emailAddress:e,number:c.length-1})),y||""}},t.exports=a},{"../../../artifacts/lang":2,StringUtils:"StringUtils",lodash:"lodash"}],TokenizedTypeahead:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash"),i=r("DOMUtils"),y=r("List"),c=r("ListItem"),p=r("Typeahead");a=n.createClass({displayName:"TokenizedTypeahead",propTypes:{items:n.PropTypes.array.isRequired,inputValue:n.PropTypes.string,tokens:n.PropTypes.arrayOf(n.PropTypes.object),itemTemplate:n.PropTypes.func,tokenTemplate:n.PropTypes.func,onFocus:n.PropTypes.func,onKeyUp:n.PropTypes.func,onKeyDown:n.PropTypes.func,onKeyPress:n.PropTypes.func,onChange:n.PropTypes.func.isRequired,onComplete:n.PropTypes.func,getItemValue:n.PropTypes.func,getAriaCountMessage:n.PropTypes.func,getAriaSuggestionMessage:n.PropTypes.func,handleInputHint:n.PropTypes.func,handleDestroyToken:n.PropTypes.func},getInitialState:function(){return{selectedIndex:this.props.tokens?this.props.tokens.length:0}},getDefaultProps:function(){return{tokens:[],inputValue:"",onKeyDown:o.noop,onComplete:function(r,t){return t},tokenTemplate:"div"}},shouldComponentUpdate:function(r,t){return!(o.isEqual(this.props,r)&&o.isEqual(this.state,t))},componentDidUpdate:function(r){o.isEqual(this.props.tokens,r.tokens)||this.setState({selectedIndex:this.props.tokens.length})},render:function(){var r,t=this,e=t.props,a=e.tokens,o=a.length,i=t.state.selectedIndex,y=o>0&&i<o,c={"tokenized-typeahead":!0,tokensSelected:y},A={};return c[e.className]=!!e.className,r=n.addons.classSet(c),e.endPadding&&(NeoConfig.isRTL?A["padding-left"]=e.endPadding:A["padding-right"]=e.endPadding),n.createElement("div",{className:r,style:A},n.createElement("div",{className:"tokenized-typeahead-container"},t.renderTokens(),n.createElement(p,{ref:"typeahead",items:e.items,itemTemplate:e.itemTemplate,onClick:t.handleClick,onFocus:e.onFocus,onSelect:t.handleTextSelection,placeholder:e.placeholder,onKeyUp:e.onKeyUp,onKeyDown:t.handleKeyDown,onKeyPress:e.onKeyPress,onChange:t.handleChange,onComplete:t.handleComplete,getItemValue:e.getItemValue,getAriaCountMessage:e.getAriaCountMessage,getAriaSuggestionMessage:e.getAriaSuggestionMessage,handleInputHint:e.handleInputHint,inputValue:e.inputValue,ariaLabel:e.ariaLabel,onDropdownClose:e.onDropdownClose})))},renderTokens:function(){var r=this.state.selectedIndex,t=this.props.tokens;if(t.length>0)return n.createElement(y,{className:"typeahead-token-list",onKeyDown:this.handleKeyDown},t.map(function(t,e){var a=n.createElement(this.props.tokenTemplate,{index:e,data:t,isSelected:r<0||r===e,destroyFunc:this.destroyToken});return n.createElement(c,{key:e,id:e,onClick:this.handleTokenClick},a)},this))},focus:function(){this.refs.typeahead.focus()},blur:function(){this.refs.typeahead.blur()},handleComplete:function(r,t){this.props.onComplete(r,t)},handleKeyDown:function(r){var t=this,e=t.props.tokens,a=t.state.selectedIndex,n=r.target,o=0===n.selectionStart&&0===n.selectionEnd;if((r.ctrlKey||r.metaKey)&&65===r.keyCode)t.setState({selectedIndex:-1});else if(r.key&&(o||-1!==a))switch(r.key){case"ArrowLeft":o&&t.setState({selectedIndex:Math.max(a-1,0)});break;case"ArrowRight":-1===a?(t.setState({selectedIndex:e.length}),i.halt(r)):a<e.length&&(t.setState({selectedIndex:a+1}),i.halt(r));break;case"Backspace":-1===a?t.destroyAllTokens():e.length&&(a===e.length&&e.length&&o?t.setState({selectedIndex:t.state.selectedIndex-1}):a<e.length&&t.destroyToken(e[a]))}t.props.onKeyDown(r)},handleChange:function(r){var t=this,e=t.props.tokens;-1===t.state.selectedIndex?(e=[],t.destroyAllTokens()):t.state.selectedIndex<e.length&&(e=o.without(e,e[this.state.selectedIndex]),t.destroyToken(e[t.state.selectedIndex])),t.props.onChange(r,e)},handleClick:function(){var r=this;r.setState({selectedIndex:r.props.tokens.length})},handleTokenClick:function(r,t){var e=this;e.refs.typeahead.focus(),e.refs.typeahead.setSelectionRange(0,0),e.setState({selectedIndex:t})},destroyToken:function(r){this.props.handleDestroyToken(r)},destroyAllTokens:function(){var r=this;r.props.tokens.forEach(function(t){r.destroyToken(t)})},isInputFullySelected:function(r){return r.value.length>0&&0===r.selectionStart&&r.selectionEnd===r.value.length},handleTextSelection:function(r){var t=this;t.isInputFullySelected(r.target)?t.setState({selectedIndex:-1}):-1===t.state.selectedIndex&&t.setState({selectedIndex:t.props.tokens.length})}}),t.exports=a},{DOMUtils:"DOMUtils",List:"List",ListItem:"ListItem",Typeahead:"Typeahead",lodash:"lodash","react/addons":"react/addons"}],Token:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("TokenUtils");a=n.createClass({displayName:"Token",propTypes:{data:n.PropTypes.object.isRequired,index:n.PropTypes.number,destroyFunc:n.PropTypes.func,isSelected:n.PropTypes.bool,type:n.PropTypes.string},render:function(){var r,t=this,e=t.props,a={"ui-token":!0,"ui-token-selected":e.isSelected,"ui-token-destroyable":e.destroyFunc};return e.data.className&&(a[e.data.className]=!0),e.data.intent&&(a["ui-token-type-"+e.data.intent.trim().toLowerCase()]=!0),r=n.addons.classSet(a),n.createElement("span",{className:r,title:e.data.emailAddresses?o.getTokenText(e.data.emailAddresses,e.data.keyword):e.data.displayStr,"data-value":e.data.dataValue},t.renderDisplayName(),t.renderCloseButton())},renderCloseButton:function(){var r=this;if(r.props.destroyFunc)return n.createElement("span",{ref:"close",className:"icon icon-close",onClick:r.destroyToken})},renderDisplayName:function(){var r,t=this,e=t.props.data,a={"ui-token-text":!0};return e.innerClassName&&(a[e.innerClassName]=!0),r=n.addons.classSet(a),n.createElement("span",{className:r},t.renderThumbnail(),e.displayStr)},renderThumbnail:function(){var r=this,t=r.props.data,e=[];if([t.imageUrl,t.fallbackImageUrl].forEach(function(r){r&&e.push("url("+r+")")}),e.length)return n.createElement("figure",{className:"ui-token-thumbnail",style:{"background-image":e.join(", ")}})},destroyToken:function(r){var t=this;t.props.destroyFunc(t.props.data),r.stopPropagation()}}),t.exports=a},{TokenUtils:"TokenUtils","react/addons":"react/addons"}],Typeahead:[function(r,t,e){"use strict";var a,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},o=r("react/addons"),i=r("lodash"),y=r("DOMUtils"),c=r("StringUtils"),p=r("./Input.jsx"),A=r("List"),v=r("ListItem"),f=r("Dropdown"),l=r("ListNavigation"),s=r("AriaStatus");a=o.createClass({displayName:"Typeahead",propTypes:{items:function(r,t){var e=r[t];if(!Array.isArray(e))throw new Error("The `items` prop must be an array.");if(e.some(function(r){return"object"===(void 0===r?"undefined":n(r))})){if(!r.handleInputHint)throw new Error("If an array of items containing objects is used,then you must pass in a `handleInputHint` prop.");if(!r.getItemValue)throw new Error("If an array of items containing objects is used,then you must pass in a `getItemValue` prop.")}},inputValue:o.PropTypes.string,itemTemplate:o.PropTypes.func,onFocus:o.PropTypes.func,onChange:o.PropTypes.func,onClick:o.PropTypes.func,onSelect:o.PropTypes.func,onKeyUp:o.PropTypes.func,onKeyDown:o.PropTypes.func,onKeyPress:o.PropTypes.func,onComplete:o.PropTypes.func,getItemValue:o.PropTypes.func,getAriaCountMessage:o.PropTypes.func,getAriaSuggestionMessage:o.PropTypes.func,handleInputHint:o.PropTypes.func},isComposing:!1,isInputHintVisible:!0,minIndex:-1,mixins:[l],getInitialState:function(){return{selectedIndex:-1,isDropdownOpen:!1,temporaryInputValue:""}},getDefaultProps:function(){return{inputValue:"",items:[],itemTemplate:"div",onChange:i.noop,onKeyUp:i.noop,onKeyDown:i.noop,onKeypress:i.noop,onClick:i.noop,onFocus:i.noop,getAriaCountMessage:i.noop,getAriaSuggestionMessage:i.noop}},shouldComponentUpdate:function(r,t){return!(i.isEqual(this.props,r)&&i.isEqual(this.state,t))},componentWillReceiveProps:function(r){var t,e,a=this,n=r.inputValue,o=r.items;a.state.temporaryInputValue?n!==a.props.inputValue&&a.setState({temporaryInputValue:"",selectedIndex:-1}):(a.state.isDropdownOpen&&0!==o.length?(e=a.handleInputHint(n,o),t=n+(e||"")):t=n,a.setState({fullInputValue:t}))},render:function(){var r,t=this,e=t.props,a=t.state.temporaryInputValue||e.inputValue,n=t.state.fullInputValue,i="",y=c.getTextDirection(a),A={"typeahead-content-box":!0};return t.isInputHintVisible&&n!==a&&!t.getSelectedItem()&&(i=n),"rtl"===y&&i&&(i="⇤ "+i),A[e.className]=!!e.className,r=o.addons.classSet(A),o.createElement("div",{className:r},o.createElement("div",{className:"typeahead-input-container"},o.createElement(p,{className:"typeahead-input-grayhint",disabled:!0,value:i,dir:y}),o.createElement(p,{ref:"input",className:"typeahead-input-usertext",onFocus:t.handleInputFocus,onClick:t.handleInputClick,onSelect:e.onSelect,onChange:t.handleInputChange,onKeyUp:e.onKeyUp,placeholder:e.placeholder,onKeyDown:t.handleInputKeyDown,onKeyPress:e.onKeyPress,onCompositionStart:t.handleInputCompositionStart,onCompositionEnd:t.handleInputCompositionEnd,value:a,"aria-label":e.ariaLabel||e.title,dir:y})),t.renderDropdown(),t.renderAriaSuggestionMessage(),t.renderAriaCountMessage())},renderDropdown:function(){var r=this;if(r.state.isDropdownOpen&&r.props.items.length>0)return o.createElement(f,{parentNode:r.getDOMNode().parentElement,closeDropdown:r.closeDropdown},o.createElement(A,{ref:"typeaheadList",className:"typeahead-list"},r.props.items.map(function(t,e){var a=o.createElement(r.props.itemTemplate,{data:t,inputValue:r.props.inputValue,isSelected:r.state.selectedIndex===e});return o.createElement(v,{key:e,id:e,onClick:r.handleItemClick},a)})))},renderAriaCountMessage:function(){var r=this;if(r.state.isDropdownOpen)return o.createElement(s,{message:r.getAriaCountMessage()})},renderAriaSuggestionMessage:function(){var r=this;if(r.state.isDropdownOpen)return o.createElement(s,{message:r.getAriaSuggestionMessage()})},getAriaCountMessage:function(){var r=this;return r.props.getAriaCountMessage(r.props.items.length)||""},getAriaSuggestionMessage:function(){var r=this;return r.props.getAriaSuggestionMessage(r.getSelectedItem())||""},getInputValue:function(){return this.refs.input.getDOMNode().value},getItemValue:function(r){var t=this;return t.props.getItemValue?t.props.getItemValue(r):r},getSelectedItem:function(r){var t=this,e=void 0!==r?r:t.state.selectedIndex;return t.props.items[e]},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},setSelectionRange:function(r,t){this.refs.input.setSelectionRange(r,t)},shouldDisplayHint:function(r,t){var e=this;return!e.isComposing&&e.isInputHintVisible&&t.length>0&&r.length>0},getMatchingPart:function(r,t){var e=this,a="",n=t[0];return n&&(e.props.handleInputHint?a=e.props.handleInputHint(r,n):c.startsWithIgnoreCase(n,r)&&(a=n)),a},handleInputHint:function(r,t){var e,a=this;return t=t||a.props.items,a.shouldDisplayHint(r,t)&&(e=a.getMatchingPart(r,t))?e.slice(r.length):null},handleInputChange:function(r){var t=this;r.inputValue=t.getInputValue(),t.props.onChange(r)},handleInputKeyDown:function(r){var t,e,a,n,o=this,i=r.key,p=o.refs.input,A={key:r.key,type:r.type,target:r.target,altKey:r.altKey,metaKey:r.metaKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,value:o.props.inputValue,fullInputValue:o.state.fullInputValue},v=o.props,f=o.state;switch(i){case"Enter":if(r.shiftKey)break;f.isDropdownOpen&&y.halt(r),o.isInputHintVisible=!1,a=v.inputValue.length,p.setSelectionRange(a,a),o.handleInputComplete(A),o.setState({fullInputValue:v.inputValue,isDropdownOpen:!1,selectedIndex:-1});break;case"ArrowLeft":case"ArrowRight":f.temporaryInputValue.length<1&&v.inputValue.length===p.getSelectionEnd()&&v.inputValue.length===p.getSelectionStart()&&f.fullInputValue!==v.inputValue&&-1===f.selectedIndex&&("ltr"===(n=c.getTextDirection(v.inputValue))&&"ArrowRight"===i||"rtl"===n&&"ArrowLeft"===i)&&(o.handleInputComplete(A),r.preventDefault());break;case"End":case"Tab":r.shiftKey||null===o.handleInputHint(v.inputValue)||(y.halt(r),o.handleInputComplete(y.cloneEvent(r)));break;case"Escape":break;case"ArrowUp":case"ArrowDown":r.preventDefault(),o.setState({isDropdownOpen:!0}),e="ArrowUp"===i?o.navigateUp():o.navigateDown(),e>=0?(t=o.getItemValue(v.items[e]))&&o.setState({temporaryInputValue:t,fullInputValue:t},function(){p.setSelectionRange(t.length,t.length)}):o.setState({temporaryInputValue:"",fullInputValue:v.inputValue}),r.stopPropagation();break;default:o.isInputHintVisible=!0,o.setState({isDropdownOpen:!0})}r.nativeEvent.stopPropagation(),v.onKeyDown(r)},handleInputFocus:function(){var r=this,t=r.props,e=r.handleInputHint(t.inputValue);r.isInputHintVisible=!0,r.setState({isDropdownOpen:!0,fullInputValue:t.inputValue+(e||"")},function(){t.onFocus()})},closeDropdown:function(){var r=this;r.setState({isDropdownOpen:!1,selectedIndex:-1,temporaryInputValue:"",fullInputValue:r.props.inputValue}),r.isInputHintVisible=!1,"function"==typeof r.props.onDropdownClose&&r.props.onDropdownClose()},handleInputClick:function(r){this.props.onClick(r)},handleItemClick:function(r,t){var e=this;r=y.cloneEvent(r),e.isInputHintVisible=!1,e.setState({selectedIndex:t,isDropdownOpen:!1},function(){e.handleInputComplete(r),e.setState({selectedIndex:-1})})},handleInputComplete:function(r){var t,e=this,a=e.state.selectedIndex,n=r.key;"Enter"!==n&&(a=Math.max(0,a)),t=e.getSelectedItem(a),e.props.onComplete?e.props.onComplete(r,t):"Tab"===n?e.setProps({inputValue:a>-1?t:""}):"ArrowRight"!==n&&"ArrowLeft"!==n||e.setProps({inputValue:e.state.fullInputValue})},handleInputCompositionStart:function(){this.isComposing=!0},handleInputCompositionEnd:function(){this.isComposing=!1},getItems:function(){return this.props.items}}),t.exports=a},{"./Input.jsx":7,AriaStatus:"AriaStatus",DOMUtils:"DOMUtils",Dropdown:"Dropdown",List:"List",ListItem:"ListItem",ListNavigation:"ListNavigation",StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],UserSettingsConstants:[function(r,t,e){"use strict";e.MSG_DENSITY_RELAXED=0,e.MSG_DENSITY_COMPACT=1,e.MSG_DENSITY_OPEN=2,e.TAB="tab",e.RECENT="recent",e.MSG_SORT_TYPE_DATE="date",e.MSG_SORT_TYPE_ATTACHMENT="attachmentcount",e.MSG_SORT_TYPE_RELEVANCE="relevance",e.MSG_SORT_ORDER_UP="up",e.MSG_SORT_ORDER_DOWN="down"},{}],Utils:[function(r,t,e){"use strict";function a(r){setTimeout(r,1e3/60)}var n,o,i=r("lodash"),y=r("url");o="undefined"==typeof window?a:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||a,n=function(){var r={};return{loadPromisesMap:r,loadCSS:function(r){return new Promise(function(t){var e=document.head,a=new Image;a.onerror=function(){var a=document.createElement("link");a.rel="stylesheet",a.href=r,a.onload=t,window.setTimeout(t,200),e.insertBefore(a,e.firstChild)},a.src=r})},loadJS:function(r){return new Promise(function(t){var e=document.createElement("script");e.onload=t,e.src=r,document.head.appendChild(e)})},loadTictac:function(t){return r[t]||(r[t]=yui.mail.ui.Tictacs.loadTictac(t)),r[t]},appendToUrl:function(r,t){var e=y.parse(r,!0);return i.size(t)>0&&e&&e.query?(i.each(t,function(r,t){i.isUndefined(e.query[t])&&(e.query[t]=r)}),e.search=null,y.format(e)):r},requestAnimationFrame:o.bind(window),detectDirection:function(r,t){var e=t;return yui.Intl.detectDirection&&(e=yui.Intl.detectDirection(r,e)),e}}}(),t.exports=n},{lodash:"lodash",url:17}],"context-mixin":[function(r,t,e){"use strict";var a=r("react/addons");t.exports={childContextTypes:{executeAction:a.PropTypes.func,getStore:a.PropTypes.func,extraPayload:a.PropTypes.object},getChildContext:function(){return{executeAction:this.context.executeAction,getStore:this.context.getStore,extraPayload:this.context.extraPayload}},contextTypes:{executeAction:a.PropTypes.func,getStore:a.PropTypes.func,extraPayload:a.PropTypes.object}}},{"react/addons":"react/addons"}],"dispatchr/utils/BaseStore":[function(r,t,e){"use strict";function a(r){var t=this;t.dispatcher=r,t._hasChanged=!1,t.initialize&&t.initialize()}var n=r("inherits"),o=r("events").EventEmitter;n(a,o),a.prototype.getContext=function(){return this.dispatcher.getContext()},a.prototype.addChangeListener=function(r){this.on("change",r)},a.prototype.removeChangeListener=function(r){this.removeListener("change",r)},a.prototype.shouldDehydrate=function(){return this._hasChanged},a.prototype.emitChange=function(r){var t=this;t._hasChanged=!0,t.emit("change",r||t)},t.exports=a},{events:"events",inherits:12}],"infinite-scroll":[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash");a=n.createClass({displayName:"InfiniteScroll",getInitialState:function(){var r=this.props,t=r.items.length*r.itemHeight,e=Math.floor(t/r.itemHeight);return{loading:!1,scrollTop:0,loadThreshold:r.loadThreshold||5,items:r.items,hasMoreItems:r.hasMoreItems,itemHeight:r.itemHeight,itemsPerPage:e,visibleStart:0,visibleEnd:e,displayStart:0,displayEnd:Math.min(2*e,r.items.length)}},componentWillReceiveProps:function(r){var t=this,e=r.itemHeight,a=r.items.length,n=t.getScrollState(e,a);t.setState(o.merge({loading:!1,items:r.items,hasMoreItems:r.hasMoreItems},n))},componentWillMount:function(){var r=this;r.setState({itemsPerPage:15,visibleEnd:15,displayEnd:Math.min(30,r.state.items.length)})},componentDidMount:function(){var r=this,t=r.refs.scrollable.getDOMNode().offsetHeight,e=Math.floor(t/r.state.itemHeight);r.setState({itemsPerPage:e,visibleEnd:e,displayEnd:Math.min(2*e,r.state.items.length)})},getScrollState:function(r,t){var e=this,a=e.state,n=e.refs.scrollable.getDOMNode().scrollTop,o=a.itemsPerPage,i=Math.floor(n/r),y=Math.min(i+o,t);return{visibleStart:i,visibleEnd:y,displayStart:Math.max(0,i-o),displayEnd:Math.min(y+o,t),scrollTop:n}},onScroll:function(){var r=this,t=r.state,e=t.itemHeight,a=t.items.length;r.setState(r.getScrollState(e,a),r.loadMore)},_shouldLoad:function(){var r=this.state,t=r.items.length,e=r.displayStart;return!r.loading&&r.hasMoreItems&&t-e<r.loadThreshold*r.itemsPerPage},loadMore:function(){var r=this;r._shouldLoad()&&(r.setState({loading:!0}),r.props.loadMore())},render:function(){var r,t,e,a=this,o=a.props,i=a.state,y=i.itemHeight,c=i.items,p=i.displayStart,A=i.displayEnd,v=p*y,f=Math.max((c.length-1-A)*y,0),l=a.props.LoadMoreComponent,s=[];for(s.push(n.createElement("li",{key:"top",line:"top",style:{height:v}})),r=p;r<A;r++)t=c[r],e=n.createElement("li",{key:"row-"+r,className:o.itemClass,style:{height:y}},n.createElement(t.descriptor,t.props)),s.push(e);return s.push(n.createElement("li",{key:"bottom",line:"bottom",style:{height:f}})),this.state.loading&&this.props.LoadMoreComponent&&s.push(n.createElement("li",{key:"loading"},n.createElement(l,null))),n.createElement("div",{className:this.props.className,ref:"scrollable",onScroll:this.onScroll},n.createElement("ul",{className:"Reset"},s))}}),t.exports=a},{lodash:"lodash","react/addons":"react/addons"}],timeUtils:[function(r,t,e){"use strict";var a=function(){function r(){var r={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-660,1,s":"Pacific/Apia","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Africa/Casablanca","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,1":"Europe/Moscow","180,0":"Asia/Baghdad","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Yerevan","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","840,0":"Pacific/Kiritimati"},t=-1*new Date(2011,0,1,0,0,0,0).getTimezoneOffset(),e=-1*new Date(2011,5,1,0,0,0,0).getTimezoneOffset(),a=t-e,n=[];return a<0?(n.push(t),n.push(1)):a>0?(n.push(e),n.push(1),n.push("s")):(n.push(t),n.push(0)),r[n.join(",")]||""}return{getTimezone:r}}();t.exports=a},{}]},{},[9]);require=function(){function r(t,e,a){function n(i,y){if(!e[i]){if(!t[i]){var c="function"==typeof require&&require;if(!y&&c)return c(i,!0);if(o)return o(i,!0);var p=new Error("Cannot find module '"+i+"'");throw p.code="MODULE_NOT_FOUND",p}var A=e[i]={exports:{}};t[i][0].call(A.exports,function(r){var e=t[i][1][r];return n(e||r)},A,A.exports,r,t,e,a)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)n(a[i]);return n}return r}()({1:[function(r,t,e){var a='#Stencil .search-folder-scope-dd,.search-content button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.suggestion-adv-search button{background:0 0;border:0;outline:0;margin:0;padding:0}#Stencil .search-folder-scope-dd,.search-content button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.suggestion-adv-search button{background:0 0;border:0;outline:0;margin:0;padding:0}.search-assist-header,.suggestion-adv-search,.suggestion-search-web,.suggestion-web-sugg-header{border-top:1px solid #E5E5E5;line-height:3rem}.suggestion-adv-search{padding-right:15px;text-align:right}.menu-active-item .suggestion-adv-search button,.suggestion-adv-search button:focus,.suggestion-adv-search button:hover{color:rgba(117,144,245,.8)}.suggestion-adv-search button:active{color:#7590F5}.suggestion-row,.suggestion-row-icon{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.suggestion-row{cursor:pointer}.suggestion-row-content,.suggestion-search-web-shortcut{color:gray}.suggestion-row-icon{width:53px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.suggestion-row-icon.icon-search-web{font-size:1.8rem;padding-right:0}.suggestion-row-content{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-overflow:ellipsis;position:relative;overflow:hidden}.suggestion-search-web-shortcut{padding-right:15px;padding-left:10px;font-family:inherit}.suggestion-row-icon,.suggestion-search-web-shortcut{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}body{background:0 0}.StencilRoot input,.StencilRoot select,.StencilRoot textarea{box-shadow:none}.StencilRoot table{margin:0}.parens::before{content:\'(\'}.parens::after{content:\')\'}.label-text{color:#7f7f7f}.button-plain{background:none repeat scroll 0 0 transparent;border:none;margin:0;outline:0;padding:0}.customview-callout .callout-default,.gdocs-custom-callout .callout-default{width:342px}#mail-search-btn,#web-search-btn{background-color:#198FFF;border:0;border-radius:2px;box-shadow:#063A93 0 2px 0 0;color:#FFF;line-height:32px;margin:0 0 0 6px;padding-top:0;padding-bottom:0;min-width:117px}#web-search-btn{background-color:#3775DD;box-shadow:#21487F 0 2px 0 0}#Stencil .bdc-g{border-color:#E5E5E5}#Stencil .c-s{color:silver}#Stencil .c-w{color:#fff}#Stencil .c-b{color:#000}#Stencil .c-bb{color:#1C89FF}#Stencil .c-bbb{color:#1567BF}#Stencil .bgc-w{background-color:#fff}#Stencil .bgc-lg{background-color:#f2f2f2}#Stencil .bgc-g{background-color:#ededed}#Stencil .c-n{color:#000}#Stencil .c-g,.icon-light{color:#999}.icon-light:hover{color:#333}#Stencil .ff-h{font-family:"Helvetica Neue","Segoe UI",Helvetica,Arial,"Lucida Grande",sans-serif}#Stencil .bgc-lb,#Stencil button.bgc-lb:active,#Stencil button.bgc-lb:hover{background-color:#198fff}#Stencil .bdrc-lb,#Stencil button.bdrc-lb:active,#Stencil button.bdrc-lb:hover{border-color:#198fff}#Stencil .bgc-db,#Stencil button.bgc-db:active,#Stencil button.bgc-db:hover{background-color:#3775DD}#Stencil .bdrc-db,#Stencil button.bdrc-db:active,#Stencil button.bdrc-db:hover{border-color:#3775DD}#Stencil .bxsh-lb{box-shadow:0 2px #063a93}#Stencil .bxsh-db{box-shadow:0 2px #21487F}#Stencil .bdrs-4{border-radius:4px}#Stencil .bxshb-1{box-shadow:0 1px 1px #CDCDCD}#Stencil .mwpx-860{max-width:860px}#Stencil .miwpx-117{min-width:117px}#Stencil .hpx-30{height:30px}#Stencil .hpx-34{height:34px}#Stencil .hpx-35{height:35px}#Stencil .hpx-36{height:36px}#Stencil .hpx-40{height:40px}#Stencil .lh-10{line-height:10px}#Stencil .lh-14{line-height:14px}#Stencil .lh-30{line-height:30px}#Stencil .lh-40{line-height:40px}#Stencil .wpx-40{width:40px}#Stencil .mt-3{margin-top:3px}#Stencil .bgr-nr{background-repeat:no-repeat}#Stencil .Py-5{padding-top:5px;padding-bottom:5px}#Stencil .pb-26{padding-bottom:26px}#Stencil .Cur-t{cursor:text}#Stencil .fz-12{font-size:1.2rem}#Stencil .fz-14,#Stencil .fz-ms{font-size:1.4rem}.search-autocomplete{-moz-box-sizing:border-box;box-sizing:border-box;z-index:3;position:relative}.search-content{display:table-row}.search-autocomplete{display:table-cell;vertical-align:middle}.search-buttons{display:table-cell}#mail-search-btn{margin-left:6px}#Stencil .adv-search-container{border:1px solid #DDD;border-radius:0 0 3px 3px;margin:0 1px}#Stencil .adv-search-container [dir]{text-align:inherit}#Stencil .lt .adv-search-container{border-width:1px 0}#Stencil #adv-search-from ul,#Stencil #adv-search-to ul{box-shadow:none;border-width:1px 1px;max-height:250px;overflow-y:auto}#Stencil .adv-search-container .typeahead-input:focus,#Stencil .adv-search-container input:focus{border-color:#7590F5;box-shadow:none}#Stencil .adv-search-container input{border-radius:2px}#Stencil .adv-search-container .custom-select::after{margin-top:8px}#Stencil .search-autocomplete .menu-active-item .icon-small-close,#Stencil .search-autocomplete li:hover .icon-small-close{display:block}.adv-search-button:hover,.search-autocomplete .menu-active-item .adv-search-button{border-radius:3px;background-color:#E5E5E5}#Stencil .custom-select select{background-color:transparent!important}#Stencil .offscreen{position:absolute;left:-9999px}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-group-overflow,#Stencil .search-folder-dropdown.right-folder-dd.advanced-search-folder-menu{padding-bottom:10px}#Stencil .search-folder-dropdown.right-folder-dd{padding:0;width:246px;background-color:#fff;margin-top:1px}#Stencil .search-folder-dropdown.right-folder-dd .search-folder-name{text-align:left;font-size:1.3rem;font-weight:400}#Stencil .search-folder-dropdown.right-folder-dd [dir].search-folder-name{text-align:left}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group-overflow{max-height:550px}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.search-folder-scope-adv{float:right;border-top:1px solid #D8DADE;position:relative;width:100%;padding:10px 0 10px 0}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.search-folder-scope-adv span{text-align:right;padding-right:25px}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.search-folder-scope-adv:hover{background-color:#fff;color:#555}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-togglable .search-menuitem{padding-left:28px;padding-right:28px}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-togglable .search-menuitem.search-in-divider{position:relative;left:28px;width:20px;padding:12px 0 0 0;border-bottom:1px solid #D8DADE}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-togglable .search-menuitem.search-in-divider:hover{cursor:auto;background-color:#fff}#Stencil .search-folder-dropdown.right-folder-dd>section.search-menu-group:last-child{padding-top:0}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group{border-bottom:none;margin:0;padding:8px 0 0 0}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.dropdown-menu-title{padding:4px 0 0 0}#Stencil .search-folder-dropdown.right-folder-dd .search-in-title .search-menu-group-title{padding-left:28px;padding-right:28px;color:#000}#Stencil .search-folder-dropdown.right-folder-dd .search-in-title>.search-menu-group-title{padding-bottom:7px;padding-top:7px}#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title:hover{background-color:#fff;cursor:auto}#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title{font-size:11px}#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title .search-menu-group-title{padding-left:40px;padding-right:40px;color:#000}#Stencil .search-folder-dropdown.right-folder-dd .account-menu-item,#Stencil .search-folder-dropdown.right-folder-dd .account-menu-item.search-menuitem,#Stencil .search-folder-dropdown.right-folder-dd .account-menu-item.search-menuitem.selected,#Stencil .search-folder-dropdown.right-folder-dd .all-account-menu-item,#Stencil .search-folder-dropdown.right-folder-dd .all-account-menu-item.search-menuitem.selected,#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title{font-weight:700;color:#444}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.selected::before{right:-webkit-calc(100% - 24px);right:-moz-calc(100% - 24px);right:calc(100% - 24px);top:60%}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.selected{font-weight:400}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem{padding-top:2px;color:#444}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem{padding-top:2px;color:#444}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu{width:100%;max-width:100%;border-radius:2px;border:solid 1px #CCC}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu .token-folder-account{float:left;padding:0 5px 0 5px}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu .token-folder-account .token-folder-account-text{color:#000}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu .icon.icon-small-search{display:none}#Stencil .search-menu.advanced-search-folder-menu{width:480px;border-radius:4px}#Stencil .search-menu.advanced-search-folder-menu>section.search-menu-group:last-child{display:none}#Stencil .search-menu.advanced-search-folder-menu .search-menuitem{max-width:100%}#Stencil .tokenized-typeahead.right-folder-dd .tokenized-typeahead-container{border:none}#Stencil .tokenized-typeahead.right-folder-dd .typeahead-list{margin-top:1px}#Stencil .right-folder-dd .search-box-inner{border:1px solid #7590F5}#Stencil .search-folder-scope-dd.right-folder-dd{position:relative;display:inline-block;float:left;padding:0;height:32px;max-width:140px;cursor:pointer;border-right:1px solid #D8DADE;border-top:none;border-bottom:none;border-left:none}#Stencil .search-folder-scope-dd.right-folder-dd span{padding:0;color:#B9BDC5;vertical-align:top}#Stencil .search-folder-scope-dd.right-folder-dd .token-folder-account{max-width:140px;display:inline-block;padding:0 22px 0 34px;-moz-box-sizing:border-box;box-sizing:border-box}#Stencil .search-folder-scope-dd.right-folder-dd .token-folder-account .token-folder-account-text{display:block;color:#787D82;font-size:14px;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}#Stencil .search-folder-scope-dd.right-folder-dd .icon-small-search{position:absolute;left:8px;top:6px;font-size:25px;line-height:22px}#Stencil .search-folder-scope-dd.right-folder-dd .icon-chevron{position:absolute;right:8px}#Stencil .search-folder-scope-dd.right-folder-dd .search-menuitem.selected{position:relative}#Stencil .search-folder-scope-dd.right-folder-dd .search-menuitem.selected::before{position:absolute;left:10px;top:50%;font-size:20px}#Stencil .search-folder-scope-dd{background:#FFF;border:1px solid #7590F5;border-left:0;-moz-box-sizing:border-box;box-sizing:border-box;color:#000;outline:0;margin:0;padding:0 26px 0 0;position:absolute;right:0;top:0;z-index:1;height:34px;max-width:120px}#Stencil .search-folder-scope-dd::-moz-focus-inner{padding:0;border:0}#Stencil .search-folder-scope-dd .icon-chevron,#Stencil .search-folder-scope-dd .search-folder-name{color:#7590F5;line-height:34px}#Stencil .search-folder-scope-dd .search-folder-name{font-size:1.3rem;padding-left:10px;-moz-transform:translateY(-1px)}.search-content button:active .icon-chevron,.search-content button:focus .icon-chevron,.search-content button:hover .icon-chevron{opacity:1}.search-content button.opened .icon-chevron::before{content:"\\e056"}.search-content button .icon-chevron{letter-spacing:-12px;line-height:inherit;opacity:.5;padding:0;position:absolute;top:0;right:10px;-moz-transform:translateY(1px);-webkit-transition:opacity .2s ease-in-out;-moz-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.search-content button .icon-chevron::before{content:"\\e055";position:relative;left:-6px;top:1px}.search-folder-name{-moz-box-sizing:border-box;box-sizing:border-box;display:block;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}@media all and (max-height:740px){#Stencil .search-menu.right-folder-dd.search-folder-dropdown .search-menu-group-overflow{max-height:none}}';r("./../../../jarvis/node_modules/cssify")(a,void 0,"/var/builds/workspace/49376-v3-package/BUILD_CONTAINER/container/label/DOCKER-LOW/app_root/artifacts/css/main.css"),t.exports=a},{"./../../../jarvis/node_modules/cssify":17}],2:[function(r,t,e){"use strict";var a={str_account_folder:"{{account}}/{{folder}}",str_advanced_mail_search:"Advanced mail search",str_advanced_search:"Advanced search",str_all_accounts:"All accounts",str_all:"All",str_all_email_types:"All email types",str_all_except_trash:"All except Trash",str_all_folders:"All folders",str_all_mail:"All mail",str_any_time:"Any time",str_better:"better",str_branding_google_drive:"Google Drive",str_branding_mail:"Yahoo Mail",str_branding_sky:"Sky",str_branding:"Yahoo",str_close:"Close",str_cloud_storage_providers_body:"Save time searching for documents by connecting your Google Drive account to Yahoo Mail.",str_cloud_storage_providers_header:"Include files from your Google Drive",str_connect:"Connect now",str_contact_suggestion_onboarding_description:"Click this contact for a {{better}} search results.",str_contact_suggestion_onboarding_title:"Smart contacts",str_contains:"Contains",str_custom_date:"Custom date…",str_custom_view_callout_text:"You have searched for <strong>{{query}}</strong> {{count}} times. Save the term for quicker access.",str_date:"Date",str_drive:"Drive",str_financial:"Finance",str_folder_bulk:"Spam",str_folder_chats:"Instant Messages",str_folder_draft:"Drafts",str_folder_drafts:"Drafts",str_folder:"Folder",str_folder_inbox:"Inbox",str_folder_search_onboarding_description:"Click the arrow to search in {{folders}} and for more search options.",str_folder_search_onboarding_title:"Search smarter",str_folder_sent:"Sent",str_folders:"Folders",str_folders_lowercase:"folders",str_folder_spam:"Spam",str_folder_trash:"Trash",str_from:"From",str_has_attachment:"Has attachment",str_has_image:"Has image",str_important:"Important",str_in_the_last_30_days:"In the last 30 days",str_in_the_last_7_days:"In the last 7 days",str_later:"Maybe later",str_me2me:"Me",str_not_now:"Not Now",str_onboarding_got_it_btn:"Got it",str_personal:"People",str_reminders:"Reminders",str_saved_search:"Saved Search",str_save:"Save",str_search_add_keyword:"Add Keywords",str_search_advanced:"Press enter to open the advanced search pane",str_search_assist:"Common searches include keywords, people, businesses or file names",str_search_btn:"Search",str_search_calendar:"Search Calendar",str_search_contacts:"Search Contacts",str_search_for_contact:"Search mailbox for the contact {{ contactName }}",str_search_for_recent:"Search mailbox for the recent search {{ keyword }}",str_search_in_account:"Search in {{accountName}}",str_search_in_folder:"Search in:",str_search_in:"Search in",str_search_mail_for:"Search mailbox for the keyword {{ keyword }}",str_search_mail:"Search Mail",str_search_name_placeholder:"{{accountName}}, search your mailbox",str_search_notepad:"Search Notepad",str_search:"Search",str_search_sky_for:'Search Sky for "{{keyword}}"',str_search_sky:"Search Sky",str_search_web_for:'Search the web for "{{ keyword }}"',str_search_web:"Search Web",str_search_web_suggestion:"Search the web",str_shopping:"Shopping",str_smartviews:"Smart Views",str_social:"Social",str_starred:"Starred",str_subject:"Subject",str_suggestions_available:"{{ count }} suggestions are available. Use the up and down arrow keys to navigate.",str_suggestions_not_available:"No suggestions are available.",str_to_lowercase:"to",str_to:"To",str_travel:"Travel",str_type:"Type",str_unread:"Unread",str_web_search_shortcut:"Shift + Enter",str_web_search:"Web search",last:null};t.exports=a},{}],3:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash"),i=r("SearchConstants"),y=r("../mixins/DropdownMixin"),c=r("Context"),p=r("FolderStore"),A=r("SearchQuery"),v=r("./ContactTypeAhead.jsx"),f=r("../dropdown/FolderDropdownV3.jsx"),l=r("../../../../artifacts/lang"),s=r("DOMUtils");a=n.createClass({displayName:"AdvancedSearch",propTypes:{query:n.PropTypes.shape({keyword:n.PropTypes.string.isRequired}),onQuery:n.PropTypes.func.isRequired},mixins:[n.addons.LinkedStateMixin,y,c],getInitialState:function(){return{dateValue:""}},componentDidMount:function(){var r=this;r.prepopulateInputs(r.props.query),r.focusFirstElement()},render:function(){var r=this,t=n.addons.classSet({Dn:"custom"!==r.state.dateValue});return n.createElement("div",null,n.createElement("button",{className:"button-plain Fl-end Mx-14 Mt-14 Mb-6",title:l.str_close,onClick:r.props.setClosed},n.createElement("span",{className:"icon icon-small-close icon-light lh-10 Pend-0"})),n.createElement("form",{className:"c-b Bgc-w Px-20 Pt-0 pb-26 adv-search-container",onKeyDown:r.handleKeyDown,onChange:r.handleChange,onSubmit:r.handleSubmit},n.createElement("table",{className:"W-100",role:"presentation"},n.createElement("col",{width:"75px"}),n.createElement("col",null),this.renderAccountFolderSelection(),n.createElement("tr",{role:"presentation"},n.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},l.str_from),n.createElement("td",{role:"presentation",className:"Pstart-0",id:"adv-search-from",onKeyDown:r.handleFromKeyDown},n.createElement(v,{ref:"from",peopleSuggestions:this.props.peopleSuggestions,accounts:this.props.accounts,id:i.ADV_SEARCH_CONTACT_SUGGEST_FROM,onChange:r.handleChange}))),n.createElement("tr",{role:"presentation"},n.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},l.str_to),n.createElement("td",{role:"presentation",className:"Pstart-0",id:"adv-search-to"},n.createElement(v,{ref:"to",peopleSuggestions:this.props.peopleSuggestions,accounts:this.props.accounts,id:i.ADV_SEARCH_CONTACT_SUGGEST_TO,onChange:r.handleChange}))),n.createElement("tr",{role:"presentation"},n.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},n.createElement("label",{htmlFor:"adv-search-subject"},l.str_subject)),n.createElement("td",{role:"presentation",className:"Pstart-0"},n.createElement("input",{type:"text",ref:"subject",id:"adv-search-subject",className:"W-100 Py-6 My-4"}))),n.createElement("tr",{role:"presentation"},n.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},n.createElement("label",{htmlFor:"adv-search-contains"},l.str_contains)),n.createElement("td",{role:"presentation",className:"Pstart-0"},n.createElement("input",{type:"text",ref:"contains",id:"adv-search-contains",className:"W-100 Py-6 My-4"}))),n.createElement("tr",{role:"presentation"},n.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},n.createElement("label",{htmlFor:"adv-search-date"},l.str_date)),n.createElement("td",{role:"presentation",className:"Pstart-0 Va-m"},n.createElement("div",{className:"custom-select W-100"},n.createElement("select",{className:"W-100 Py-6 My-4",ref:"date",id:"adv-search-date",valueLink:r.linkState("dateValue")},n.createElement("option",{value:""},l.str_any_time),n.createElement("option",{value:"week"},l.str_in_the_last_7_days),n.createElement("option",{value:"month"},l.str_in_the_last_30_days),n.createElement("option",{value:"custom"},l.str_custom_date))))),n.createElement("tr",{role:"presentation",className:t},n.createElement("td",{role:"presentation",className:"Va-m Pstart-0"}),n.createElement("td",{role:"presentation",className:"Pstart-0 Va-m"},n.createElement("div",null,n.createElement("div",{className:"D-ib"},n.createElement("input",{className:"Py-6 My-4",type:"text",size:"12",maxLength:"10",placeholder:"YYYY/MM/DD",ref:"fromDate"})),n.createElement("span",{className:"D-ib Mx-10"},l.str_to_lowercase),n.createElement("div",{className:"D-ib"},n.createElement("input",{className:"Py-6 My-4",type:"text",size:"12",maxLength:"10",placeholder:"YYYY/MM/DD",ref:"toDate"}))))),n.createElement("tr",{role:"presentation"},n.createElement("td",{role:"presentation",className:"Pstart-0"}),n.createElement("td",{role:"presentation",className:"Pstart-0"},n.createElement("label",{className:"cbox Mt-10"},n.createElement("input",{type:"checkbox",ref:"attachment",id:"adv-search-attachment"}),n.createElement("span",{className:"icon c-b"}),n.createElement("span",{className:"text"},l.str_has_attachment)))),n.createElement("tr",{role:"presentation"},n.createElement("td",{role:"presentation",className:"Pstart-0"}),n.createElement("td",{role:"presentation",className:"Pstart-0"},n.createElement("label",{className:"cbox Mt-10"},n.createElement("input",{type:"checkbox",ref:"image",id:"adv-search-image"}),n.createElement("span",{className:"icon c-b"}),n.createElement("span",{className:"text"},l.str_has_image)))),n.createElement("tr",{role:"presentation"},n.createElement("td",{role:"presentation",className:"Pstart-0"}),n.createElement("td",{role:"presentation",className:"Pstart-0"},n.createElement("button",{onKeyDown:r.handleButtonKeyDown,type:"submit",ref:"advSearchBtn",className:"Btn default miwpx-117 bgc-lb bdrc-lb Mt-14 Bgi-n c-w Mend-6 Bdrs-6 bxsh-lb Va-t Py-5 hpx-30"},l.str_search_mail))))))},renderAccountFolderSelection:function(){var r=this.props;return n.createElement("tr",{role:"presentation",onClick:s.halt},n.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},l.str_search_in),n.createElement("td",null,n.createElement(f,{ref:"advancedFolderMenu",className:"advanced-search-folder-menu",query:r.query,accounts:r.accounts,currentAccount:r.currentAccount,smartViews:r.smartViews,isRTL:r.isRTL,isImapinEnabled:r.isImapinEnabled,onSelect:r.onQuery})))},handleSubmit:function(r){var t=this;t.props.handleMailSearch("search_box_adv_search"),t.props.setClosed(),s.halt(r)},handleChange:function(){var r=this,t=r.refs,e={from:t.from.getInputValue(),to:t.to.getInputValue(),subject:t.subject.getDOMNode().value,contains:t.contains.getDOMNode().value,date:t.date.getDOMNode().value,folder:t.folder&&t.folder.getDOMNode().value,type:t.type&&t.type.getDOMNode().value,attachment:t.attachment.getDOMNode().checked,image:t.image.getDOMNode().checked,fromDate:t.fromDate.getDOMNode().value,toDate:t.toDate.getDOMNode().value};r.setContainerValue(r.convertToQueryObject(e))},setContainerValue:function(r){var t=this,e=t.props.query;t.props.onQuery(new A({keyword:r.keyword,suggestion:e.suggestion,folders:r.folders?r.folders:e.folders,refinements:r.refinements?r.refinements:e.refinements,smartviews:r.smartviews?r.smartviews:e.smartviews}))},handleButtonKeyDown:function(r){"Tab"!==r.key||r.shiftKey||(this.focusFirstElement(),s.halt(r))},handleFromKeyDown:function(r){"Tab"===r.key&&r.shiftKey&&(this.refs.advSearchBtn.getDOMNode().focus(),s.halt(r))},handleKeyDown:function(r){"Escape"===r.key&&this.props.setClosed(),r.stopPropagation()},appendSearchQuery:function(r,t,e){e.match(/\s/)&&t?r.push(t+'"'+e+'"'):r.push(t+""+e)},convertToQueryObject:function(r){var t,e,a,n,o,i,y=this,c=y.getStore(p),A=yui.common.Utils.features.enabled("LMV3"),v=[];return r.from&&y.appendSearchQuery(v,"from:",r.from),r.to&&y.appendSearchQuery(v,"to:",r.to),r.subject&&y.appendSearchQuery(v,"subject:",r.subject),r.contains&&y.appendSearchQuery(v,"",r.contains),"*trash"===r.folder?a=[]:r.folder&&(t=c.findByFID(r.folder),a=[{displayName:c.getLocalizedFolderNameById(t.id||t.folderInfo.index.toString()),acctIds:null,folderIds:[t.id||t.folderInfo.index.toString()]}]),r.type&&(e=["is:"+r.type]),r.attachment&&y.appendSearchQuery(v,"has:attachment",""),r.image&&y.appendSearchQuery(v,"has:image",""),r.date&&(n=new Date,"week"===r.date?(i=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate(),n.setDate(n.getDate()-7),o=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()):"month"===r.date?(i=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate(),n.setDate(n.getDate()-30),o=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()):"custom"===r.date&&(o=r.fromDate,i=r.toDate),o&&(A?y.appendSearchQuery(v,"after:",'"'+o+'"'):y.appendSearchQuery(v,"after:",o)),i&&(A?y.appendSearchQuery(v,"before:",'"'+i+'"'):y.appendSearchQuery(v,"before:",i))),{keyword:v.join(" "),folders:a,refinements:e}},focusFirstElement:function(){this.refs.from.focus()},matchFromToSubject:function(r,t){var e=this.refs;return t.match(/\s/)&&(t=t.replace(/(['"])(.*)\1/,"$2").replace(/\\(['"])/g,"$1")),"subject"===r?e[r].getDOMNode().value=t:e[r].setInputValue(t),!0},matchDates:function(r,t){var e=this.refs;return!isNaN(new Date(t).getTime())&&(this.setState({dateValue:"custom"},function(){"after"===r?e.fromDate.getDOMNode().value=t:e.toDate.getDOMNode().value=t,this.handleChange()}),!0)},matchHas:function(r,t){var e,a=this,n=a.refs,o=[];return e=t.match(/(["'])(.*)\1/),e&&(t=e[2]),"has"===r&&(o=["attachment","image"]),o.indexOf(t)>=0&&("has"===r&&(n[t].getDOMNode().checked=!0),!0)},runRegularExpression:function(r,t,e){for(var a=r.exec(t),n=t;a;)e(a[1],a[2])&&(n=n.replace(a[0],"")),a=r.exec(t);return n},prepopulateInputs:function(r){var t,e,a=this,n=r.keyword||"",y=a.getStore(p),c=a.refs;a.props.folder&&c.folder&&(c.folder.getDOMNode().value=a.props.folder),n=a.runRegularExpression(i.REGEX_FROM_TO_SUBJECT,n,a.matchFromToSubject),n=a.runRegularExpression(i.REGEX_AFTER_BEFORE,n,a.matchDates),n=a.runRegularExpression(i.REGEX_HAS_IS_IN,n,a.matchHas),e=o.find(r.refinements,function(r){return"is"===r.trim().split(":")[0]}),e&&c.type&&(c.type.getDOMNode().value=e.trim().split(":")[1]),t=o.find(r.folders,function(r){return!o.isEmpty(r.folderIds)}),t&&c.folder&&(t=y.findByIndex(t.folderIds[0]),c.folder.getDOMNode().value=t.folderInfo.fid),c.contains.getDOMNode().value=n.replace(/\s+/," ").trim(),a.handleChange()}}),t.exports=a},{"../../../../artifacts/lang":2,"../dropdown/FolderDropdownV3.jsx":10,"../mixins/DropdownMixin":11,"./ContactTypeAhead.jsx":5,Context:"Context",DOMUtils:"DOMUtils",FolderStore:"FolderStore",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",lodash:"lodash","react/addons":"react/addons"}],4:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("StringUtils");a=n.createClass({displayName:"ContactSuggestion",render:function(){var r=n.addons.classSet({Ell:!0,"menu-active-item":this.props.isSelected});return this.props.data.emailAddresses[0]?n.createElement("div",{className:r,dir:o.getTextDirection(this.props.data.displayStr)},n.createElement("span",{className:"Mx-4"},this.boldify(o.getBidiString(this.props.data.displayStr),this.props.inputValue)),n.createElement("span",{className:"Mx-4 parens",dir:"ltr"},this.boldify(this.props.data.emailAddresses[0],this.props.inputValue))):null},boldify:function(r,t){var e=o.indexOfIgnoreCase(r,t),a=e+t.length,i=r.substring(0,e),y=r.substring(e,a),c=r.substring(a),p=o.addRTLJoiners([i,y,c]);return e>=0?n.createElement("span",null,p[0],n.createElement("strong",null,p[1]),p[2]):n.createElement("span",null,r)}}),t.exports=a},{StringUtils:"StringUtils","react/addons":"react/addons"}],5:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash"),i=r("../../../../artifacts/lang"),y=r("SearchActions"),c=r("SearchQuery"),p=r("Typeahead"),A=r("./ContactSuggestion.jsx"),v=r("../../stores/PersonSuggestion"),f=r("ObjectUtils"),l=r("StringUtils"),s=r("Context");a=n.createClass({displayName:"ContactTypeahead",mixins:[s],getInitialState:function(){return{inputValue:""}},getPeopleSuggestions:function(r,t){return o.chain(r).filter(function(r){return r.emailAddresses}).map(function(r){return r.emailAddresses.map(function(t){return new v({displayStr:r.displayStr,imageUrl:r.imageUrl,emailAddresses:[t],intent:r.intent,overrrideWithEmail:!0})})}).flatten().filter(function(r){return l.containsIgnoreCase(r.displayStr,t)||l.containsIgnoreCase(r.emailAddresses[0],t)}).value()},render:function(){var r=this.props,t=this.state,e=this.getPeopleSuggestions(f.getValue(r.peopleSuggestions,[t.inputValue],[]),t.inputValue);return n.createElement(p,{ref:"typeahead",items:e,inputValue:t.inputValue,disabled:r.disabled,itemTemplate:A,onChange:this.handleChange,onComplete:this.handleComplete,getItemValue:this.getItemValue,getAriaCountMessage:this.getAriaCountMessage,getAriaSuggestionMessage:this.getAriaSuggestionMessage,handleInputHint:this.handleInputHint})},handleChange:function(r){var t=this;t.executeAction(y.fetchSuggestions,{query:new c({keyword:r.inputValue}),fechnpsy:!0,searchId:this.props.id,accounts:this.props.accounts}),t.setState({inputValue:r.inputValue},t.props.onChange)},handleInputHint:function(r,t){var e="",a=t.displayStr,n=t.emailAddresses[0],o=new RegExp("^"+l.escapeRegExp(r),"i");return o.test(a)?e=a:o.test(n)&&(e=n),e},handleComplete:function(r,t){this.handleChange({inputValue:t?t.emailAddresses[0]:r.value})},getItemValue:function(r){return r.emailAddresses[0]},getInputValue:function(){return this.state.inputValue},focus:function(){this.refs.typeahead.focus()},setInputValue:function(r){this.setState({inputValue:r},this.props.onChange)},getAriaCountMessage:function(r){return r?o.template(i.str_suggestions_available,null)({count:r}):i.str_suggestions_not_available},getAriaSuggestionMessage:function(r){if(r)return r.displayStr}}),t.exports=a},{"../../../../artifacts/lang":2,"../../stores/PersonSuggestion":14,"./ContactSuggestion.jsx":4,Context:"Context",ObjectUtils:"ObjectUtils",SearchActions:"SearchActions",SearchQuery:"SearchQuery",StringUtils:"StringUtils",Typeahead:"Typeahead",lodash:"lodash","react/addons":"react/addons"}],6:[function(r,t,e){"use strict";function a(r,t){return i.findIndex(r||[],function(r){return"string"==typeof r&&r===t||r.query&&r.query===t})}var n,o=r("react/addons"),i=r("lodash"),y=r("Utils"),c=r("Context"),p=r("SearchConstants"),A=r("GlobalConstants"),v=r("SearchActions"),f=r("ObjectUtils"),l=r("SearchUtils"),s=r("ActionStore"),u=r("FolderStore"),h=r("../dropdown/FolderDropdownV3.jsx"),b=r("./AdvancedSearch.jsx"),d=r("./SearchButton.jsx"),j=r("Token"),O=r("TokenizedTypeahead"),g=r("./Suggestion.jsx"),k=r("Onboarding"),m=r("../../../../artifacts/lang"),x=r("DOMUtils"),q=r("StringUtils"),w=r("StatService"),P=yui.common.Utils.features.enabled("searchWebSuggestions"),z=yui.common.Utils.features.enabled("searchNamePlaceholder"),B=yui.common.Utils.features.enabled("isMetaDataMigrated")||NeoConfig.forceToV3UserSetting,C=r("../../stores/PersonSuggestion"),D=r("../../stores/SearchSuggestion"),E=r("SearchQuery"),F=[c];n=o.createClass({displayName:"Container",mixins:F,showPromo:!1,getInitialState:function(){return{searchId:null,query:{},appType:A.MAIL_APP,recentSearches:[],peopleSuggestions:{},hasShownFolderSearchOnboarding:this.props.hasShownFolderSearchOnboarding,isAdvancedPaneOpen:!1,keyword:"",tokens:[],preventSuggestionHighlight:!1,contactNameText:"",currentFolder:null,scrollToSearchClicked:!1}},componentDidMount:function(){var r=this,t=r.getContext();this.getStore(s).on("changed",this.onAction),t.events.on("search:advancedSearch:open",r.showAdvancedPane),t.events.on("search:advancedSearch:close",r.handleClose),t.events.on("search:advancedSearch:toggle",r.toggleAdvancedPane),r._yuiEvents.push(yui.on("search:jumpToSearch",r.handleJumpToSearch)),
r._yuiEvents.push(yui.on("search:jumpToAdvancedSearch",r.handleJumpToAdvSearch)),r._yuiEvents.push(yui.on("search:setSmartView",r.handleSmartViews)),r._yuiEvents.push(yui.on("search:fireSearch",r.handleStormSearch)),r._yuiEvents.push(yui.on("search:fireBootcampSearch",r.handleFireBootcampSearch)),r._yuiEvents.push(yui.on("search:focus",r.refs.typeahead.focus)),r._yuiEvents.push(yui.on("ui:currentFolder",r.setCurrentFolder)),r.fetchSuggestionsThrottled=i.debounce(r.fetchSuggestions,200),r.fetchWebSuggestionsThrottled=i.debounce(r.fetchWebSuggestions,200)},componentWillUnmount:function(){var r=this,t=r.getContext();this.getStore(s).removeListener("changed",this.onAction),t.events.removeListener("search:advancedSearch:open",r.showAdvancedPane),t.events.removeListener("search:advancedSearch:close",r.handleClose),r._yuiEvents.forEach(function(r){r.detach()})},setCurrentFolder:function(r){var t,e=this.getContext(),a=e.getStore(u);r&&r.fid&&(t=a.findByFID(r.fid))&&this.setState({currentFolder:t.id||t.folderInfo.index.toString()})},addRecentSearch:function(r,t){var e,n=r,o=a(n,t);return"string"!=typeof t||t.trim()?(o>-1?(e=i.pullAt(n,o)[0],e.count+=1,n.unshift(e)):n.unshift({query:t,count:1}),n=i.uniq(n).slice(0,NeoConfig.maxSearchHistory),t&&w.stat({name:"search_sugg_add_recent"}),n):n},onAction:function(){var r,t=this.getStore(s).getActionInfo(),e=f.getValue(t,["data"],{}),a={},n="",o=this.props.xobniContactsStore,y=o&&o.cache,c={};switch(t.action){case A.SMARTVIEWS_LOADED:case A.SETTINGS_CHANGE:case A.METADATA_CHANGE:case A.ONBOARDING_SHOW:case A.APP_CHANGE:case A.SEARCH_TAB_ACTIVE:this.setState(e);break;case A.SEARCH_TAB_INACTIVE:this.state.searchId===e.searchId&&this.setState(e);break;case p.SEARCH_START:case p.SET_QUERY:this.setState({query:e.query});break;case p.LOAD_RECENT_SEARCHES:this.setState({recentSearches:[].concat(this.state.recentSearches,e.data)});break;case p.ADD_RECENT_SEARCH:if(!B){this.setState({recentSearches:e.data});break}this.setState({recentSearches:this.addRecentSearch(this.state.recentSearches,e.data)});break;case p.REMOVE_RECENT_SEARCH:this.setState({recentSearches:e.data});break;case p.BOOTCAMP_SUGGESTIONS_RECEIVED:f.getValue(e,["query","keyword"])&&e.data&&e.data.length&&(n=e.query.keyword.toLowerCase(),a[n]=e.data,this.props.searchCacheContacts&&!this.state.peopleSuggestions[n]&&y&&(r=y.search(n,l.getCurrentAccountEmail(e.query)),this.logRankingDifference(a[n],r,{compareKey:"serviceId",matchStatKey:"contact_search_ranking_same",unMatchStatKey:"contact_search_ranking_different"}),this.measureCacheSuggestionQuality(a[n],r,{compareKey:"serviceId",keyForGoodQuality:"contact_suggestion_relevant_shown",keyForBadQuality:"contact_suggestion_relevant_not_shown"})),this.setState({peopleSuggestions:i.merge({},this.state.peopleSuggestions,a)}));break;case p.WEB_SUGGESTIONS_RECEIVED:e.data&&(c=f.getValue(e.data,["r"],[]),this.setState({webSuggestions:c}))}},measureCacheSuggestionQuality:function(r,t,e){var a=r&&r[0];(a||t.length)&&(i.some(t,{serviceId:a.serviceId})?w.stat(e.keyForGoodQuality):w.stat(e.keyForBadQuality))},logRankingDifference:function(r,t,e){var a=r.length&&r[0],n=t.length&&t[0],o=e.compareKey;o&&(a=a&&a[o],n=n&&n[o]),(a||n)&&(a===n?w.stat(e.matchStatKey):w.stat(e.unMatchStatKey))},renderSearchInputArea:function(){var r,t,e,a,n=this,y=[],c=this.getPeopleSuggestions(this.state.query.keyword),p=this.getWebSuggestions(this.state.query.keyword),A=this.getRecentSearches(this.state.query.keyword),v=new D({intent:"ADVANCED_SEARCH",displayStr:""}),l=new D({intent:"SEARCH_PROMO",displayStr:""}),s=this.generateTokens(this.state.query),u=this.state.query.keyword||"",h="",b=[];return 0===s.length&&(z&&n.isMailApp()?(r=f.getValue(NeoConfig,["userDataObj","userSendPref","firstName"],""),t=f.getValue(NeoConfig,["userDataObj","userSendPref","defaultFromName"],""),e=r||t.split(" ")[0],e?(a=i.template(m.str_search_name_placeholder)({accountName:e}),h=a&&a.length<=50?a:m.str_search):h=m.str_search):h=m.str_search),n.state.isAdvancedPaneOpen||(y=n.isMailApp()?[].concat(c,A,p):[],n.state.query.keyword&&!P&&y.push(new D({intent:"SEARCH_WEB",displayStr:[f.getValue(this.state.query,["suggestion","displayStr"],""),f.getValue(this.state.query,["keyword"],"")].join(" ").trim()})),!u&&this.shouldShowSearchPromo()&&y.push(l),(this.shouldShowSearchPromo()||u||this.state.query.suggestion)&&y.push(v)),n.props.searchKeywordPlaceholderEnabled&&s.length>0&&(h=m.str_search_add_keyword),b.push(o.createElement(O,{ref:"typeahead",className:"right-folder-dd",inputValue:u,items:y,tokens:s,tokenTemplate:j,itemTemplate:g,placeholder:i.unescape(h),onFocus:n.handleFocus,onChange:n.handleChange,onComplete:n.handleComplete,onKeyUp:n.handleKeyUp,onKeyPress:n.handleKeyPress,getItemValue:n.getItemValue,getAriaCountMessage:n.getAriaCountMessage,getAriaSuggestionMessage:n.getAriaSuggestionMessage,handleInputHint:n.handleInputHint,handleDestroyToken:n.handleDestroyToken})),this.showPromo=!1,o.createElement("div",{className:""},b)},render:function(){var r=this;return o.createElement("div",{className:"search-content"},o.createElement("div",{className:"search-autocomplete Fz-s Mend-6 W-100 ff-h Bgc-t c-n right-folder-dd"},o.createElement("div",{className:"search-box-inner"},r.renderFolderDropdown(),r.renderSearchInputArea()),r.renderAdvancedSearch()),r.renderButtons(),r.renderFolderSearchOnboarding())},renderAdvancedSearch:function(){if(this.state.isAdvancedPaneOpen&&this.isMailApp())return o.createElement(b,{query:this.getQuery(),onQuery:this.setQuery,setClosed:this.handleClose,handleMailSearch:this.handleMailSearch,smartViews:this.state.smartViews,isRTL:this.props.isRTL,isImapinEnabled:this.props.isImapinEnabled,peopleSuggestions:this.state.peopleSuggestions,accounts:this.props.accounts,currentAccount:this.props.currentAccount})},renderButtons:function(){var r=this;return o.createElement("div",{className:"search-buttons"},o.createElement(d,{searchLabel:r.getSearchBtnText(),handleSearch:r.handleMailSearch}),o.createElement(d,{searchLabel:"sky"===NeoConfig.partnerType?m.str_search_sky:m.str_search_web,handleSearch:r.handleWebSearchBtn,id:"web-search-btn"}))},shouldRenderFolderSearchOnboarding:function(){return!this.state.hasShownFolderSearchOnboarding},_hasPeopleSuggestion:function(){return(this.getPeopleSuggestions(this.state.query.keyword)||[]).length},renderFolderSearchOnboarding:function(){var r,t,e,a=this;if(a.shouldRenderFolderSearchOnboarding()&&a.refs.folderMenu)return r=a.refs.folderMenu.getDOMNode(),t=r.getBoundingClientRect(),e={x:t.left-16,y:t.top+45},o.createElement(k,{templateType:"OnboardingText",metaDataKey:"hasShownFolderSearchOnboarding",id:"folderSearchOB",width:240,dir:"top",title:m.str_folder_search_onboarding_title,body:q.stringReplace(m.str_folder_search_onboarding_description,{folders:o.createElement("b",null,m.str_folders_lowercase)}),buttonText:m.str_onboarding_got_it_btn,coordinates:e})},renderFolderDropdown:function(){if(this.shouldFolderDropdownRender())return o.createElement(h,{ref:"folderMenu",query:this.getQuery(),accounts:this.props.accounts,currentAccount:this.props.currentAccount,currentFolder:this.state.currentFolder,smartViews:this.state.smartViews,isRTL:this.props.isRTL,isImapinEnabled:this.props.isImapinEnabled,onSelect:this.setQuery,executeSearch:this.executeSearch,openAdvancedSearch:this.showAdvancedPane})},generateTokens:function(r){var t=[];return r.suggestion&&t.push(i.assign(r.suggestion,{type:"bootcamp",fallbackImageUrl:p.PERSON_TOKEN_FALLBACK_IMG_DATA})),t},handleDestroyToken:function(r){"bootcamp"===r.type&&(this.setState({query:i.merge({},this.state.query,{suggestion:null})}),w.logRapid("mt:click",{action:"search_box_token_close",append:{mTknTyp:"people"}}))},shouldFolderDropdownRender:function(){return this.state.appType===A.MAIL_APP},getAriaCountMessage:function(r){return r?i.template(m.str_suggestions_available,null)({count:r}):m.str_suggestions_not_available},getAriaSuggestionMessage:function(r){var t,e=r?r.intent:"";switch(e){case"RECENT_SEARCH":return i.template(m.str_search_for_recent,null)({keyword:r.displayStr});case"PEOPLE":return i.template(m.str_search_for_contact,null)({contactName:r.displayStr});case"SEARCH_WEB":return t="sky"===NeoConfig.partnerType?m.str_search_sky_for:m.str_search_web_for,i.template(t,null)({keyword:r.displayStr});case"SEARCH_MAIL":return i.template(m.str_search_mail_for,null)({keyword:r.displayStr});case"ADVANCED_SEARCH":return m.str_search_advanced}},getItemValue:function(r){return"ADVANCED_SEARCH"===r.intent?this.getQuery().keyword:r.displayStr},getSearchBtnText:function(){var r;switch(this.state.appType){case A.NOTEPAD_APP:r=m.str_search_notepad;break;case A.CALENDAR_APP:r=m.str_search_calendar;break;case A.CONTACTS_APP:r=m.str_search_contacts;break;default:r=m.str_search_mail}return r},appendAndDedupContacts:function(r,t){var e={};return r=i.uniq(r,!1,function(r){return r.serviceId}),r.forEach(function(r,t){e[r.serviceId]=t}),t.forEach(function(t){var a=e[t.serviceId];a>=0&&(t.imageUrl&&(r[a].imageUrl=t.imageUrl),t.emailAddresses&&t.emailAddresses.length>0&&(r[a].emailAddresses=t.emailAddresses))}),i.uniq(r.concat(t),!1,function(r){return r.serviceId})},getPeopleSuggestions:function(r){var t,e,a,n,o,y=this.props.xobniContactsStore,c=y&&y.cache,p=this.getQuery(),A=l.getCurrentAccountEmail(p),v=[];return r?(e=(r||"").toLowerCase(),n=this.state.peopleSuggestions[e],this.props.searchCacheContacts&&c?(o=c.search(e,A),v=this.appendAndDedupContacts(o,n||[])):v=n,v&&v.length||(t=i.keys(this.state.peopleSuggestions)||[],a=e,t.forEach(function(r){e.indexOf(r)>-1&&r.length>a.length&&(a=r)}),n=this.state.peopleSuggestions[a],this.props.searchCacheContacts&&c?(o=c.search(a,A),v=this.appendAndDedupContacts(o,n||[])):v=n),i.uniq(v||[]).slice(0,3).map(function(r){return new C(r)})):[]},getWebSuggestions:function(r){var t;return r&&P?(t=i.uniq(this.state.webSuggestions||[]).map(function(r){return new D({intent:"WEB_SEARCH",displayStr:r.k,keyword:r.k})}),t.length&&t.unshift(new D({intent:"WEB_SEARCH_HEADER",displayStr:p.str_search_web_suggestion})),t):[]},isQueryInRecentSearch:function(r,t){return"string"==typeof t?!!t.trim()&&!!r&&(!r.trim()||q.containsIgnoreCase(t,r)):t.query&&!!t.query.trim()&&!!r&&(!r.trim()||q.containsIgnoreCase(t.query,r))},getRecentSearches:function(r){var t=this;return i.uniq(this.state.recentSearches||[]).filter(function(e){return t.isQueryInRecentSearch(r,e)}).slice(0,3).map(function(r){return new D({intent:"RECENT_SEARCH",displayStr:r.query?r.query:r,keyword:r.query?r.query:r})})},handleInputHint:function(r,t){return"SEARCH_MAIL"===t.intent?r:t.getMatchAndRemainder(r)},handleJumpToAdvSearch:function(r){var t=this,e=t.getStore(u),a=e.findByFID(f.getValue(r,"folders.0.fid"));a&&t.setState({query:new E({folders:[{acctIds:[a.acctId],displayName:f.getValue(a,"folderInfo.name"),folderIds:a.id}]})}),t.showAdvancedPane()},handleJumpToSearch:function(r){var t={keyword:r.keyword};r.showPromo?(this.showPromo=r.showPromo,this.setState({query:t,scrollToSearchClicked:!0})):this.setState({query:t}),this.refs.typeahead.focus()},shouldShowSearchPromo:function(){return this.props.scrollToSearchV2Enabled&&this.showPromo},handleOpen:function(){this.fetchSuggestionsThrottled()},handleFocus:function(){return this.handleOpen()},handleClose:function(){this.setState({isAdvancedPaneOpen:!1})},getDefaultPeopleSuggestion:function(){var r,t=this.getQuery(),e=t.suggestion;e||(r=this.getPeopleSuggestions(this.state.contactNameText)||[],r.length>0&&(e=r[0],this.setState({query:i.merge({},t,{suggestion:e})})),this.cleanContactNameText())},cleanContactNameText:function(){this.setState({contactNameText:""}),this.refs.typeaheadWords.focus()},handleChangeContacts:function(r,t){var e=i.merge({},this.getQuery(),{suggestion:t.length?t[0]:null});this.setState({contactNameText:r.inputValue,query:e}),this.fetchSuggestionsThrottled()},handleChangeWords:function(r){var t=i.merge({},this.state.query,{keyword:r.inputValue});this.setState({query:t})},handleChange:function(r,t){var e=i.merge({},this.state.query,{keyword:r.inputValue,suggestion:t.length?t[0]:null});this.fetchSuggestionsThrottled(),this.fetchWebSuggestionsThrottled(),this.setState({query:e})},handleShiftEnter:function(r){"Enter"===r.key&&r.shiftKey&&(w.stat({name:"search_sugg_web_shortcut"}),this.handleWebSearch(this.state.query,!1),x.halt(r))},handleKeyUp:function(r){this.handleShiftEnter(r)},handleKeyPress:function(r){this.handleShiftEnter(r)},handleComplete:function(r,t){var e=this,a="Enter"===r.key||"click"===r.type,n=e.getQuery(),o=n.keyword,y=o||"";if(!e.isMailApp())return e.doNonMailSearch(),e.refs.typeahead.blur(),y;switch(t||(t={intent:"SEARCH_MAIL",displayStr:y,keyword:y}),t.intent){case"ADVANCED_SEARCH":a&&e.showAdvancedPane();break;case"SEARCH_WEB":a&&(w.stat({name:"search_sugg_web_click"}),e.handleWebSearch(this.state.query,!0));break;case"RECENT_SEARCH":a&&(w.stat({name:"search_sugg_search_recent",tags:{count:(e.getQuery().keyword||"").length}}),e._triggerUHEvent(!0),y=t.displayStr,e.executeSearch(new E({keyword:y,typeTag:"search_box_suggestion_recent"})));break;case"WEB_SEARCH":a&&e.handleWebSuggestionSearch(t.keyword);break;case"WEB_SEARCH_HEADER":case"SEARCH_PROMO":break;case"SEARCH_MAIL":e.executeSearch(new E({keyword:n.keyword,refinements:n.refinements,folders:n.folders,smartviews:n.smartviews,suggestion:n.suggestion,typeTag:"search_box_enter"})),e._triggerUHEvent(!0);break;default:a?(e.executeSearch(new E({keyword:"",suggestion:t,view:n.view,folders:n.folders,smartviews:n.smartviews,refinements:n.refinements,typeTag:"search_box_suggestion_people"})),e._triggerUHEvent(!0),w.stat({name:"search_sugg_people_click",tags:{bkt:NeoConfig.expBucketId}})):"ArrowRight"===r.key?this.setState({query:i.merge({},this.state.query,{keyword:r.fullInputValue})}):"Tab"===r.key&&(w.stat({name:"search_sugg_tab_lozenge",tags:{count:n.keyword&&n.keyword.length}}),this.setState({query:i.merge({},this.state.query,{keyword:"",suggestion:t})}))}},handleMailSearch:function(r){var t=this.state.query;this.isMailApp()?(this.executeSearch(new E({keyword:t.keyword,suggestion:t.suggestion,folders:t.folders,refinements:t.refinements,smartviews:t.smartviews,typeTag:r||t.typeTag,displayName:t.displayName,isSavedSearch:t.isSavedSearch})),w.logRapid("mt:click",{action:"mail_search",spid:"search_results"}),this._triggerUHEvent(!1)):(this.doNonMailSearch(),this.refs.typeahead.blur())},handleWebSearchBtn:function(){w.stat({name:"search_sugg_web_btn"}),this.handleWebSearch(this.state.query,!1)},handleWebSearch:function(r,t){var e=document.getElementById("UHSearchWeb"),a=document.getElementById("UHSearchBox"),n=document.getElementById("fr"),o=[f.getValue(r,["suggestion","displayStr"],""),f.getValue(r,["keyword"],"")].join(" ").trim();e&&a&&o&&(n&&n.setAttribute("data-sa",t?"1":"0"),a.value=o,e.click(),w.stat({name:"search_sugg_search_web"}))},handleWebSuggestionSearch:function(r){var t=yui.common.Utils.settings,e=t.value("searchLink"),a=q.addUrlParameters(e+r,{frCode:t.value("searchWebSuggestionsFrCode"),fr2Code:t.value("searchWebSuggestionsFr2Code")});this.refs.typeahead.blur(),window.open(a),w.stat("search_web_suggestion")},getQuery:function(){return this.state.query},setQuery:function(r){this.setState({query:r})},executeSearch:function(r){this.state.scrollToSearchClicked&&(w.stat({name:"click_search_by_scroll_to_search"}),this.setState({scrollToSearchClicked:!1})),y.loadTictac("tictac-searchresults").then(function(){v.customLimit=0,this.executeAction(v.executeSearch,{query:r}),this.refs.typeahead.blur()}.bind(this))},fetchSuggestions:function(){var r=this,t=r.getQuery();!r.state.isAdvancedPaneOpen&&t.keyword&&r.executeAction(v.fetchSuggestions,{query:t,searchId:r.getSearchId(),accounts:this.props.accounts})},fetchWebSuggestions:function(){var r=this,t=r.getQuery();P&&!r.state.isAdvancedPaneOpen&&t.keyword&&r.executeAction(v.fetchWebSuggestions,{query:t})},toggleAdvancedPane:function(){var r=this;r.state.isAdvancedPaneOpen?r.handleClose():r.showAdvancedPane()},showAdvancedPane:function(){this.setState({isAdvancedPaneOpen:!0}),w.stat({name:"search_sugg_adv_search_open"})},doNonMailSearch:function(){var r=this.state.query.keyword||"",t={query:{keyword:r}};switch(this.state.appType){case A.NOTEPAD_APP:this.executeAction(v.doNotepadSearch,t);break;case A.CALENDAR_APP:this.executeAction(v.doCalendarSearch,t);break;case A.CONTACTS_APP:this.executeAction(v.doContactsSearch,t)}},handleSmartViews:function(r,t){var e,a=t&&t.categoryName||"";e=i.filter(this.state.smartViews,function(r){return r.displayName===t.displayName||r.displayName===t.view}),e.length&&this.executeSearch(new E({smartviews:e[0].query.smartviews,folders:f.getValue(t,"folders",[]),typeTag:t.typeTag||"smartview_"+a}))},handleStormSearch:function(r){this.executeSearch(new E(r))},handleFireBootcampSearch:function(r){"msglist_search_from"!==r.typeTag&&"hovercard_search_email"!==r.typeTag||this.executeSearch(new E({keyword:"",suggestion:{intent:"PEOPLE",displayStr:r.name||r.email,emailAddresses:[r.email]},typeTag:r.typeTag}))},isMailApp:function(){return this.state.appType===A.MAIL_APP},_yuiEvents:[],_triggerUHEvent:function(r){var t=new yui.EventTarget,e=r?"ucs:mailSearchSugg":"ucs:mailSearch";t.publish(e,{broadcast:2,emitFacade:!0}),t.fire(e)},getSearchId:function(){return this.state.searchId}}),t.exports=n},{"../../../../artifacts/lang":2,"../../stores/PersonSuggestion":14,"../../stores/SearchSuggestion":15,"../dropdown/FolderDropdownV3.jsx":10,"./AdvancedSearch.jsx":3,"./SearchButton.jsx":7,"./Suggestion.jsx":8,ActionStore:"ActionStore",Context:"Context",DOMUtils:"DOMUtils",FolderStore:"FolderStore",GlobalConstants:"GlobalConstants",ObjectUtils:"ObjectUtils",Onboarding:"Onboarding",SearchActions:"SearchActions",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",SearchUtils:"SearchUtils",StatService:"StatService",StringUtils:"StringUtils",Token:"Token",TokenizedTypeahead:"TokenizedTypeahead",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],7:[function(r,t,e){"use strict";var a,n=r("react/addons");a=n.createClass({displayName:"SearchButton",getDefaultProps:function(){return{className:"",handleSearch:function(){},searchLabel:"",id:"mail-search-btn"}},render:function(){var r,t=this,e={};return e[t.props.className]=!0,r=n.addons.classSet(e),n.createElement("button",{type:"button",className:r,id:t.props.id,onClick:t.props.handleSearch.bind(null,"search_box_click")},t.props.searchLabel)}}),t.exports=a},{"react/addons":"react/addons"}],8:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash"),i=r("DOMUtils"),y=r("StringUtils"),c=r("Context"),p=r("../../../../artifacts/lang"),A=r("SearchActions"),v=r("GlobalConstants"),f=r("TokenUtils");a=n.createClass({displayName:"Suggestion",mixins:[c],render:function(){var r=this,t=n.addons.classSet({"menu-active-item":r.props.isSelected});return n.createElement("div",{className:t},r.renderMap[r.props.data.intent].call(r))},boldify:function(r,t){var e=y.indexOfIgnoreCase(r,t),a=r.substr(0,e),o=r.substr(e+t.length),i=r.substr(e,t.length),c=y.addRTLJoiners([a,i,o]);return e>=0?n.createElement("span",null,c[0],n.createElement("b",{className:"Fw-b"},c[1]),c[2]):n.createElement("span",{className:"Va-m"},r)},renderMap:{PEOPLE:function(){var r=this,t=r.props.data,e=r.props.inputValue,a=t.imageUrl?y.addUrlParameters(t.imageUrl,{spsize:"72X72",badge:!0,fallback_url:v.FALLBACK_XOBNI_IMG_URL}):v.FALLBACK_XOBNI_IMG_URL,o={backgroundImage:"url("+a+")"},i={backgroundColor:r.getRandomPersonColor(t.displayStr)};return n.createElement("div",{className:"Mx-4 Py-2 W-100 Bxz-bb Pos-r Cur-p Bfc","data-id":t.displayStr,ref:"suggestion",onClick:r.handlePersonClick},n.createElement("div",{className:"D-ib wpx-40 hpx-40 Pend-10 Va-m Fl-start"},n.createElement("span",{style:o,className:"bgr-nr wpx-40 hpx-40 Bgz-cv Pos-a Z-1 Bdrs"}),n.createElement("span",{style:i,className:"fz-ms wpx-40 lh-40 c-w Pos-a Z-0 Start-0 Ta-c Bdrs"},t.getInitials())),n.createElement("div",{className:"mt-3"},n.createElement("div",{className:"fz-ms Ell",ref:"name"},r.boldify(t.displayStr,e)),n.createElement("div",{"aria-label":"contact suggestion",className:"c-g Fz-s Ell",ref:"email"},r.boldify(f.getTokenText(r.props.data.emailAddresses,e),e))))},RECENT_SEARCH:function(){var r=this,t=yui.common.Utils.features.enabled("isMetaDataMigrated")||NeoConfig.forceToV3UserSetting;return n.createElement("div",{className:"Mx-4 Py-2 Pos-r Cur-p Bfc fz-ms"},n.createElement("div",{className:"Ta-c wpx-40 lh-40 Pend-10 Fl-start icon icon-recent"}),t?null:n.createElement("div",{className:"Mend-1 Fl-end"},n.createElement("span",{className:"icon icon-small-close icon-light D-n lh-40",onClick:r.handleRemoveRecentSearch})),n.createElement("div",{"aria-label":"recent search",className:"lh-40 Ell","data-action":"search-recent"},r.boldify(r.props.data.displayStr,r.props.inputValue)))},WEB_SEARCH:function(){var r=this;return n.createElement("div",{className:"Mx-4 Py-2 Pos-r Cur-p Bfc fz-ms"},n.createElement("div",{className:"Ta-c wpx-40 lh-40 Pend-10 Fl-start icon icon-search-web"}),n.createElement("div",{"aria-label":"web search",className:"lh-40 Ell","data-action":"search-web-sugg"},r.boldify(r.props.data.displayStr,r.props.inputValue)))},WEB_SEARCH_HEADER:function(){return n.createElement("div",{className:"suggestion-web-sugg-header Pstart-14 "},n.createElement("div",{"aria-label":p.str_search_web_suggestion,"data-action":"search-web-sugg-header",className:"suggestion-row-content"},n.createElement("strong",null,p.str_search_web_suggestion)))},SEARCH_WEB:function(){var r=this,t="sky"===NeoConfig.partnerType?p.str_search_sky_for:p.str_search_web_for,e=o.template(t)({keyword:r.props.data.displayStr});return n.createElement("div",{className:"suggestion-row suggestion-search-web"},n.createElement("div",{className:"suggestion-row-icon icon icon-search-web"}),n.createElement("div",{"aria-label":e,"data-action":"search-web",className:"suggestion-row-content"},y.stringReplace(t,{keyword:n.createElement("strong",null,r.props.data.displayStr)})),n.createElement("kbd",{className:"suggestion-search-web-shortcut"},p.str_web_search_shortcut))},SEARCH_MAIL:function(){return n.createElement("div",{className:"Mx-4 Py-2 Bxz-bb Pos-r Cur-p Bfc"},n.createElement("div",{className:"Ta-c wpx-40 lh-40 Pend-10 Fl-start icon icon-search"}),n.createElement("div",{"aria-label":"search mail for",className:"lh-40 Ell fz-ms","data-action":"search-mail"},this.props.data.displayStr))},ADVANCED_SEARCH:function(){return n.createElement("div",{className:"suggestion-adv-search"},n.createElement("button",{onClick:this.props.showAdvancedPane},p.str_advanced_mail_search))},SEARCH_PROMO:function(){return n.createElement("div",{className:"search-assist-header Pstart-14"},n.createElement("div",{className:"suggestion-row-content"},p.str_search_assist))}},renderShiftEnterLabel:function(){if(0===this.props.data.typeIndex)return n.createElement("span",{className:"c-g"},p.str_web_search_shortcut)},getRandomPersonColor:function(r){var t=y.hashCode(r),e=["#940050","#CC008C","#BE0067","#F80E5D","#FE4E4D","#FD6867","#FF1032","#FF8C13","#FF530E","#FA0027"];return e[function(r,t){return(r%t+t)%t}(t,e.length)]},renderWebSearchHeader:function(){if(0===this.props.data.typeIndex)return n.createElement("div",{className:"D-b Us-n c-g bgc-lg lh-30 Pstart-14 Fw-b",onClick:i.halt},p.str_web_search)},handleRemoveRecentSearch:function(r){var t=this,e=t.props.data.displayStr;t.executeAction(A.removeRecentSearch,e),r.stopPropagation()}}),t.exports=a},{"../../../../artifacts/lang":2,Context:"Context",DOMUtils:"DOMUtils",GlobalConstants:"GlobalConstants",SearchActions:"SearchActions",StringUtils:"StringUtils",TokenUtils:"TokenUtils",lodash:"lodash","react/addons":"react/addons"}],9:[function(r,t,e){"use strict";function a(){return new v(function(r,t){yui.use("tictac-simple-query","mail-persist-meta-data",function(){var e=[],a=[],n=yui.mail.persist.MetaData,o=yui.Tictac.simple,i=n.get("simpleCustomViews");if(o&&o.Query&&"function"==typeof o.Query.fetchSmartViewQuery){try{i&&p.each(JSON.parse(i.json)||[],function(r){var t=-1!==r.name.indexOf(" "),e=k.getValue(r,["query","smartviews"],[]),n={displayName:r.name,account:r.account,query:{smartviews:[{displayName:r.name,name:t?'is:"'+r.name+'"':"is:"+r.name,keyword:k.getValue(r,["query","keyword"],""),suggestion:r.email?{emailAddresses:[r.email]}:{},folders:k.getValue(r,"query.folders",[])}]}};e.length&&(n.query.smartviews=[].concat(n.query.smartviews,e)),a.push(n)})}catch(r){t("custom smartview parse error")}p.each(b.SMARTVIEW_CATEGORIES_KEYS,function(r){e.push(o.Query.fetchSmartViewQuery(r))}),v.all(e).then(function(t){var e=[];p.each(t||[],function(r){var t=r.displayName||r.view,a=-1!==t.indexOf(" "),n={displayName:t};n.query={smartviews:[{displayName:t,name:a?'is:"'+t+'"':"is:"+t,keyword:k.getValue(r,["keyword"],""),suggestion:r.email?{emailAddresses:[r.email]}:{}}]},e.push(n)}),r([].concat(e||[],a||[]))})}})})}var n,o,i,y,c=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},p=r("lodash"),A=window.React||r("react/addons"),v=r("EnhancedPromise"),f=r("../autocomplete/Container.jsx"),l=r("ActionStore"),s=r("SearchQuery"),u=r("FolderStore"),h=r("GlobalConstants"),b=r("SearchConstants"),d=r("MessageConstants"),j=r("SearchActions"),O=r("GlobalActions"),g=r("StatService"),k=r("ObjectUtils"),m=r("ExtractionUtils"),x=r("../../utils/AccountUtils"),q=r("Utils"),w=r("BootcampAPIUtilsV2"),P=yui.mail.model.DataStore.Accounts,z=yui.mail.Tabs,B=yui.common.Utils.features,C=yui.common.Utils.settings,D=B.enabled("customViewsCallout"),E=B.enabled("searchNoPVBeacon",!1),F=B.enabled("searchNoLeftRailFolderChange"),G=B.enabled("searchHeroResultsPeopleWithKeyword"),H=NeoConfig.multipleAccounts,I=C.value("imapSyncTime",20),J=r("../../../../artifacts/lang"),K=!!NeoConfig.archive,L=window.performance,M=NeoConfig.forceDS,N=NeoConfig.imapIn&&NeoConfig.accounts&&NeoConfig.accounts.imapInAccounts,Q=!!NeoConfig.isRTL,R=yui.UA&&yui.UA.ie,S=["startTime","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd"],T=C.value("searchCacheExpiredHours"),U=C.value("searchCacheStoreLimit"),V=!1;yui.use("mail-persist-meta-data"),y=A.createClass({displayName:"StormBridge",getInitialState:function(){return this.adCache={},this.permissionWindow=null,{searchTabs:[],activeSearchId:"FOLDER_TAB",cache:{},_searchTabsExtractionStatus:[]}},_getSearchTabDimension:function(){var r=yui.common.Utils.getCachedWindowSize(),t=NeoConfig.hasAds?200:0;return{width:r.width-(190+t),height:r.height-170}},_getEnabledAccounts:function(){return P.get().filter(function(r){return"DISABLED"!==r.status})},_getAccounts:function(){return this._getEnabledAccounts().reduce(function(r,t){return r[t.id]=t,r},{})},_hasNonActiveAccount:function(){return P.get().some(function(r){return"DISABLED"===r.status})},_getCurrentAccount:function(){var r=P.getCurrentAccount();return{id:r.id,description:r.description}},_getSyncingAccounts:function(r){var t,e,a,n=[];return NeoConfig.multipleAccounts&&r&&(t=p.chain(p.pluck(r.folders,"acctIds")).compact().flatten().uniq().value(),t&&t.length>0?(e=P.get(),a=p.map(t,function(r){return p.find(e,function(t){return t.id===r})})):a=P.get(),n=x.findAccountsInSyncing(a,I)),n},renderEmailHistory:function(r){var t,e=k.getValue(r,"folders.0.acctIds.0"),a=this._getAccounts(),n=p.size(a),o=!0;return B.enabled("imapInGA")&&a&&n>1&&(t=p.find(a,function(r){return r.id===e&&r.isPrimary}),o=!!t),B.enabled("emailHistory")&&o},onSearchTabClose:function(r,t){var e,a,n=Date.now()-36e5*T,o=p.clone(this.state.cache),i=t.main||{},y=0;for(a in this.state.cache)this.state.cache[a]&&this.state.cache[a].cachedTimestamp<n&&(o[a]=null);o[r.searchId]=p.assign(t,{cachedTimestamp:Date.now()},{contentType:i.contentType||t.contentType,filter:i.filter||t.filter});for(a in o)o[a]&&((!e||o[a].cachedTimestamp<o[e].cachedTimestamp)&&(e=a),y++);y>U&&(o[e]=null),this.setState({cache:o})},_isSearchExtractionsKeywordsEnabled:function(){return B.enabled("searchExtractionsKeywords")},_openSearchTab:function(t,e){var o,i,y,v,f=this,l=t.query,s=t.searchId,u=new yui.mail.ui.BaseWidget,h=t.searchId,b=k.getValue(yui.mail,["persist","MetaData"],{get:function(){}});return n||(n=q.loadTictac("tictac-searchresults")),v=p.find(this.state.searchTabs,{tabId:h}),v||(o=z.getActiveTab(),u.render=function(a){n.then(function(){var n=r("SearchTabContent"),i=r("AppDispatcher"),y=a.getDOMNode(),u=this.state.cache[s]||{},h=f._showRightRail(t,e);A.render(A.createElement(n,c({},u,{searchId:s,query:t.query,searchType:e,sortType:t.sortType,sortOrder:t.sortOrder,context:i.context,imapInEnabled:N,hasMultipleAccounts:H,showEmailHistory:b.get("showEmailHistory"),isArchive:K,snippetsEnabled:-1!==parseInt(b.get("neo.pref.general.snippets"),10),messageDensity:NeoConfig.msgListDensity,simpleEnabled:B.enabled("simple"),unsubscribrEnabled:B.enabled("unsubscribr"),searchGDocsEnabled:B.enabled("searchCloudGoogleLinks"),bootcampV3Enabled:B.enabled("searchBootcampV3"),searchHeroResultsEnabled:B.enabled("searchHeroResults"),searchHeroResultsDuplicatesEnabled:B.enabled("searchHeroResultsDuplicates"),searchHeroResultsPeopleWithKeywordEnabled:G,searchAdFaviconHoverEnabled:B.enabled("searchAdHoverFavicon"),searchAdFlipLabelAndRatingEnabled:B.enabled("searchAdSponsoredRating"),searchAdHoverHighlightEnabled:B.enabled("searchAdHoverHighlight"),searchAdThemeColorEnabled:B.enabled("searchAdThemeColor"),searchExtractionsEnabled:B.enabled("searchExtractions"),searchExtractionsKeywordsEnabled:this._isSearchExtractionsKeywordsEnabled(),scrollToSearchV2Enabled:B.enabled("scrollToSearchV2"),hideGDocsCallout:this.hideGDocsCallout,searchDemoLink:B.enabled("searchDemoLink"),isForceUser:M,ieVersion:R,hasRightRail:h,lmv3Enabled:B.enabled("LMV3"),isEmailHistoryEnabled:this.renderEmailHistory(l),defaultFilterAll:B.enabled("defaultFilterAll"),filterOrder:C.value("filterOrder"),cardOrder:C.value("cardOrder"),recipientNameInSRP:B.enabled("recipientNameInSRP"),searchResultsLinks:B.enabled("searchResultsLinks"),searchCacheNoFlash:B.enabled("searchCacheNoFlash"),confirmBeforeDelete:B.enabled("confirmBeforeDelete"),searchTabDimension:this._getSearchTabDimension(),syncingAccounts:this._getSyncingAccounts(l),accounts:this._getAccounts(),hasNonActiveAccount:this._hasNonActiveAccount(),currentAccount:this._getCurrentAccount(),isRTL:Q,rightRailSearchAdEnabled:this._showRightRailInTravel(t,e),searchHeroExp1Enabled:B.enabled("searchHeroExp1"),searchHeroExp2Enabled:B.enabled("searchHeroExp2"),hideHoverDeleteEnabled:B.enabled("hideHoverDelete"),changeSizeInV3Thumbnail:B.enabled("changeSizeInV3Thumbnail"),onClose:this.onSearchTabClose})),y),v.on("closeChange",function(){A.unmountComponentAtNode(y),this.setState({searchTabs:p.reject(this.state.searchTabs,{tabId:v.tabId}),_searchTabsExtractionStatus:p.reject(this.state._searchTabsExtractionStatus,{tabId:v.tabId})})}.bind(this)),o&&o.widget&&"search"===o.widget.type&&o.set("close",1),this.setState({searchTabs:this.state.searchTabs.concat(v)}),this.state.searchTabs.length>4&&this.state.searchTabs[3].set("close",1)}.bind(this))}.bind(this),i=p.escape(l.toHumanReadableString()),H&&!k.getValue(l,"folders.0.folderIds",null)&&(y=p.escape(l.getHumanReadableAccountsString(this._getAccounts())))&&(i=l.smartviews&&l.smartviews.length?p.template(J.str_account_folder,null)({account:y,folder:i}):[y,i].join(" ")),u.type=u.widgetType="search",u.query=l,u.searchId=s,u.set("title",i),v=yui.mail.ui.Workspace.addContentWidget({p_label:J.str_search,s_label:i,hideToolbar:!0,reuse:!0,widget:u,isRemovable:!0}),this._isSearchExtractionsKeywordsEnabled()&&this.setState({_searchTabsExtractionStatus:this.state._searchTabsExtractionStatus.concat({tabId:h,extraction:!1})}),this._toggleRightRail(e,l),
v.set("hideToolbar",!0),v.tabId=h,v.on("closeChange",function(){p.defer(function(){this.setState({activeSearchId:"FOLDER_TAB"}),this.props.context.executeAction(O.searchTabClose,{searchId:s,query:{}})}.bind(this),1)}.bind(this)),v.on("activeChange",function(r){1===r.newVal?(this.setState({activeSearchId:s}),p.defer(function(){this.props.context.executeAction(O.searchTabActive,{searchId:s,searchType:e,query:l})}.bind(this))):(this.setState({activeSearchId:"FOLDER_TAB"}),p.defer(function(){this.props.context.executeAction(O.searchTabInactive,{searchId:s,searchType:e,query:{}})}.bind(this)))}.bind(this))),p.defer(function(){this.props.context.executeAction(O.searchTabActive,{searchId:s,searchType:e,query:l})}.bind(this)),a().then(function(r){this.props.context.executeAction(O.smartviewsLoaded,{searchId:s,smartViews:r})}.bind(this)),z.switchToTab(v),v},_closeSearchTab:function(){var r=z.getActiveTab();this._isSearchExtractionsKeywordsEnabled()&&this.setState({_searchTabsExtractionStatus:p.reject(this.state._searchTabsExtractionStatus,{tabId:r.tabId})}),r&&r.widget&&"search"===r.widget.type&&r.set("close",1)},_reloadActiveSearchTab:function(){var r=z.getActiveTab();r&&r.widget&&"search"===r.widget.type&&this.props.context.executeAction(O.searchTabReload,{searchId:r.tabId})},_showRightRail:function(r,t){var e=this._showRightRailInTravel(r,t);return"people"===t||e},_showRightRailInTravel:function(r,t){var e=this._showPartnerSearch(r.query,t),a=this._showBingAdModule(r.query,t);return e||a},_showPartnerSearch:function(r,t){var e,a=B.enabled("partnersearch");if(r)return e=p.map(r.smartviews,"name")[0],"keyword"===t&&"is:travel"===e&&a},_renderPartnerSearch:function(){o.then(function(){var t,e,a,n=r("PartnerSearch"),o=z.getActiveTab();o&&o.widget&&"search"!==o.widget.type||(t=o.elContent.getDOMNode(),(e=t.getElementsByClassName("hipmunk-right-rail"))&&(a=e[0],o.on("closeChange",function(){A.unmountComponentAtNode(a),e=null,a=null}.bind(this)),A.render(A.createElement(n,{context:this.props.context,defaultTravelFilter:void 0}),a)))}.bind(this))},tabChange:function(r){var t;switch(r.type){case"notepadtab":t=h.NOTEPAD_APP;break;case"contactstab":t=h.CONTACTS_APP;break;case"calendartab":t=h.CALENDAR_APP;break;default:t=h.MAIL_APP}p.defer(function(){this.props.context.executeAction(O.appChange,{appType:t})}.bind(this))},showGDocsCallout:function(){var r=this;yui.use("mail-ui-onboarding",function(t){t.mail.ui.Onboarding.registerDefaultOnboarding({name:"showGDocsCallout",node:'.tab-content:not(.offscreen) .srp-filters-type [data-action="documents"]',pointer:"top",hdText:J.str_cloud_storage_providers_header,bdText:J.str_cloud_storage_providers_body,btnPrimaryText:J.str_connect,btnCancelText:J.str_later,offset:[-125,35],onSuccess:function(){r.openCloudStorageSetting(),r.hideGDocsCallout()},onCancel:function(){r.hideGDocsCallout()},onShow:function(){V=!0},onUnmount:function(){V=!1},classNames:["gdocs-custom-callout"]},!0)})},hideGDocsCallout:function(){B.enabled("searchCloudGoogle")&&V&&yui.mail.ui.Onboarding.closeDefaultOnboarding("showGDocsCallout")},_shouldHideAdForUnknownEntity:function(r){var t,e=!1,a=!!B.enabled("hideAdsUnknownEntities");if(r)for(t in r)"PERSON"===r[t].type&&(e=e||!r[t].knownEntity);return a&&e},_rotateDisplayAd:function(r,t){var e=z.getActiveTab();e&&e.widget&&"search"!==e.widget.type||(this._toggleRightRail(r,t),q.requestAnimationFrame(function(){yui.fire("darlaEvent",{action:"people"===r?"search_people":"search_results"})}))},_toggleRightRail:function(r,t){var e=this._showPartnerSearch(t,r),a=this._showBingAdModule(t,r);yui.fire("darlaEvent",{action:"people"===r||a||e||this._shouldDisableRightRailAd()?"disableRightRailAdForActiveTab":"enableRightRailAdForActiveTab"})},_shouldDisableRightRailAd:function(){var r=z.getActiveTab(),t=null,e=!1;return this._isSearchExtractionsKeywordsEnabled()&&(t=p.find(this.state._searchTabsExtractionStatus,{tabId:r.tabId}),e=k.getValue(t,["extraction"],!1)),e},_getAdKeyword:function(r){var t={"is:unread":"read","is:starred":"star","is:Important":"address","is:personal":"people","is:social":"social","is:travel":"travel","is:shopping":"shopping","is:financial":"finance"},e=p.pluck(r.smartviews,"name")[0],a=r.keyword&&r.keyword.trim(),n=r.suggestion;if(NeoConfig.dmEnabled||NeoConfig.ssOpt){if(n)return n.displayStr;if(a)return a;if(t[e])return t[e]}return""},_showBingAdModule:function(r,t){var e,a=B.enabled("bingads");if(r)return e=p.map(r.smartviews,"name")[0],"keyword"===t&&"is:travel"===e&&a},_attachAds:function(t){i.then(function(){var e,a,n,o=r("BingAdsRightRail"),i=z.getActiveTab();i&&i.widget&&"search"!==i.widget.type||(i.on("closeChange",function(){A.unmountComponentAtNode(e),n=null,e=null}.bind(this)),a=i.elContent.getDOMNode(),(n=a.getElementsByClassName("searchds-right-rail"))&&(e=n[0],A.render(A.createElement(o,{context:this.props.context,searchId:t.searchId,data:this.adCache[t.searchId],startIndex:B.enabled("bingads2to6")?1:0,endIndex:C.value("dm_max_listings")}),e)))}.bind(this))},renderSearchAds:function(r){p.defer(function(){this.props.context.executeAction(j.searchAdsSuccess,{searchId:r.searchId,data:this.adCache[r.searchId]})}.bind(this))},_collectSearchAdStats:function(r){g.stat({name:"srp_search_ad",unit:"ms",type:"duration",dataum:g.timerComplete("srp_search_ad"),tags:{status:r}})},_fetchSearchAds:function(r){var t=this,e=r.query,a=e.suggestion,n=a&&a._rawObj&&a._rawObj.entities;if(g.timerStart("srp_search_ad"),n&&t._shouldHideAdForUnknownEntity(n)||this.adCache[r.searchId])return void(this.adCache[r.searchId]&&this.state.cache&&this.state.cache[r.searchId]&&(t._collectSearchAdStats(!0),t.renderSearchAds(r)));yui.use("mail-ui-dmsearch-controller").then(function(a){var n=new a.mail.ui.dmsearchController({seedTerm:t._getAdKeyword(e||{}),partner:e.partner||NeoConfig.dmSrcTag,typeTag:e.typeTag||""});n.once("responseChange",function(e){e.newVal&&e.newVal.length&&(t.adCache[r.searchId]=e.newVal,t.renderSearchAds(r))}),n.process(function(r){t._collectSearchAdStats(!(!r||!r.length))})})},_loadPartnerSearch:function(){if(!o)return o=q.loadTictac("tictac-partnersearch")},_loadBingAds:function(){if(!i)return i=q.loadTictac("tictac-bingads")},_fireRapidSearchStart:function(r){r.typeTag&&g.logRapid("mt:click",{action:r.typeTag,append:{mSrchId:r.searchId,mSrchQry:r.query.toString()}})},_fireYamasSearchStart:function(r){r.typeTag&&g.stat({name:r.typeTag})},_fireSplunkStats:function(r){var t="keyword"===r.searchType?k.getValue(r,["data","documents","keyword","items"],""):k.getValue(r,["data","documents","all","items"],"");p.find(t,function(r){if(r.online)return r.online})&&B.enabled("searchCloudGoogleLinks")&&g.mailLog({m:"srp_gdocs_rendered",searchType:r.searchType},!1,"srp_gdocs_rendered")},onMessageChange:function(){this.props.context.executeAction(O.setTabDirty,{})},_initSettings:function(){yui.use("mail-persist-meta-data",function(){var r=yui.mail.persist.MetaData;this.props.context.executeAction(O.changeSettings,{messageDensity:NeoConfig.msgListDensity,hasShownFolderSearchOnboarding:this._folderSearchOnboardingShown(),snippetsEnabled:-1!==parseInt(r.get("neo.pref.general.snippets"),10),showEmailHistory:"false"!==r.get("showEmailHistory")})}.bind(this)),yui.on("messageDensityChange",function(r){this.props.context.executeAction(O.changeSettings,{messageDensity:r.density})}.bind(this)),yui.on("simple:rendered",function(){a().then(function(r){this.props.context.executeAction(O.smartviewsLoaded,{smartViews:r})}.bind(this))}.bind(this)),yui.on("simple:customViewsChanged",function(){a().then(function(r){this.props.context.executeAction(O.changeSettings,{smartViews:r})}.bind(this))}.bind(this)),yui.on("imapin:currentAccountSet",this.setQueryAccountScope),B.enabled("searchMsgStatusSync")&&(yui.on("ds:conv:change",this.onMessageChange),yui.on("ds:msg:change",this.onMessageChange)),yui.on("ui:currentFolder",this.setQueryFolderScope),yui.on("tabChange",this.tabChange),yui.on("initCallout:folderSearchOnboarding",function(){this.props.context.executeAction(O.showOnboarding,{hasShownFolderSearchOnboarding:0}),yui.fire("callout:action",{name:"folderSearchOnboarding",action:"shown",keyValue:"1"})}.bind(this)),yui.on("closeCallout:folderSearchOnboarding",function(){this.props.context.executeAction(O.dismissOnboarding,{hasShownFolderSearchOnboarding:1})}.bind(this)),yui.on("xobni:contactChanged",function(){this._reloadActiveSearchTab()}.bind(this)),this.props.context.executeAction(j.loadRecentSearches,{}),window.addEventListener("resize",function(){p.defer(function(){this.props.context.executeAction(O.searchWindowResize,this._getSearchTabDimension)}.bind(this))}.bind(this),!0)},getSearchId:function(){return this.state.activeSearchId},setQuery:function(r){p.defer(function(){this.props.context.executeAction(j.setQuery,{searchId:this.getSearchId(),query:r})}.bind(this))},shouldShowFolderToken:function(r){var t=this.props.context.getStore(u),e=t.findByFID(r),a=N?k.getValue(e,"types.0",r):r;return!a||-1===b.SYSTEM_FOLDERS_NO_FILTER.indexOf(a.toUpperCase())},setQueryAccountScope:function(){var r,t,e=this;N?(t=[],r=this._getCurrentAccount(),t.push({displayName:r.description,acctIds:[r.id]})):t=null,e.setQuery(new s({folders:t}))},setQueryFolderScope:function(r){var t,e,a,n,o,i=this,y=i.props.context,c=y.getStore(u),A=this._getAccounts();return r&&r.fid&&i.shouldShowFolderToken(r.fid)?F?void i.setQueryAccountScope():void((n=c.findByFID(r.fid))&&(e=n.id||n.folderInfo.index.toString(),o=c.getLocalizedFolderNameById(e),t=A[n.acctId],N&&t&&(o=p.template(J.str_account_folder,null)({account:t.description,folder:o})),a=[{displayName:o,acctIds:N?[n.acctId]:null,folderIds:[e]}],i.setQuery(new s({folders:a})))):void i.setQueryAccountScope()},_folderSearchOnboardingShown:function(){var r=k.getValue(yui.mail,["persist","MetaData"],{get:function(){}});return this.props.folderSearchTutorial?0:B.enabled("folderSearchOnboarding")?B.enabled("scout")||r.get("hasShownFolderSearchOnboarding"):1},_showNotfication:function(r){yui.use("common-ui-notification-v2",function(t){t.common.ui.NotificationV2.notify(A.renderToString(r.component),{type:r.failure?"error":"info",duration:r.duration||4e3,speed:"show-fast",close:r.close,cbkOnDestroy:!0,cbk:function(t,e){"undo"===e&&r.undoHandler&&r.undoHandler()}})})},_collectResourceTimingStats:function(r,t){var e,a,n,o="";k.getValue(r,"apiJSDuration",!1)&&g.featureLatency("bootcamp_api_js_"+t,r.apiJSDuration),k.getValue(r,"url")&&L&&L.getEntriesByName&&(e=L.getEntriesByName(r.url,"resource"),(n=k.getValue(e,[0],!1))&&n.duration&&(a=Math.round(n.duration),g.featureLatency("bootcamp_api_perf_"+t,a),S.forEach(function(r){o+=r+"="+n[r]+" ; "}),r.xTiming&&(o+=r.xTiming),g.apiLatency("bootcamp_metrics_"+t+" "+o,a,{api:"bootcamp"}))),r.error?g.stat({name:"search",tags:{result:"failure"}}):g.stat({name:"search",tags:{result:"success"}})},_statMainDuration:function(r,t){var e,a;r.isMain&&(e=g.getTimerStart("doSearch"),a=r.duration-e,g.featureLatency("srp_bootcamp_api_list_"+t,a))},_statFailure:function(r,t){var e="failure";r&&800===r.status&&(e="abort"),g.featureInvoke("srp_search_"+e+"_"+t),g.stat({name:"search",tags:{result:e}})},_collectStats:function(r){var t,e,a=k.getValue(r,["searchId"]),n=k.getValue(r,["searchType"]),o=k.getValue(r,["metaData","ymreqid"]),i=k.getValue(r,["metaData","duration"]),y=k.getValue(r,["metaData","main","contentType"],"messages"),c=k.getValue(r,["metaData","main","filter"]),A=k.getValue(r,["metaData","status"]),v=k.getValue(r,["data",y,c],[]),f=k.getValue(r,["data","contacts","keyword","items"]),l=k.getValue(r,"error"),s=w.CONTENT_TYPES,u=k.getValue(r,["error",y,c]),h=k.getValue(r,["error",y,c,"status"]),b=h&&200!==h;A&&200!==A||!0!==k.getValue(r,["metaData","hasMain"])||b?800===A?g.featureInvoke("srp_search_abort_"+n):(g.featureInvoke("srp_search_failure_"+n),g.statTAE({message:"search_failed_tae20_"+n,method:b?"bootcamp_srp_chunk":"bootcamp_srp",ymreqid:o},{status:b?h||"":A,error:{code:"SearchProgramFailed"}}),k.getValue(r,["metaData","hasMain"],!1)&&!b||(g.featureInvoke("srp_search_failure_"+n+"_nomain"),g.mailLog({m:"srp_search_main_chunk_error",status:h||"",body:u&&u.message||"",searchType:n,contentType:y,filter:c,ymreqid:o,apiLatency:i},!1,"srp_search_mailog")),A&&g.featureInvoke("srp_search_failure_"+n+"_"+A),c&&g.featureInvoke("srp_search_errorfilter_"+c+"_"+n),l&&l.status&&g.mailLog({m:"srp_search_failed",status:l.status,body:l.text,searchType:n,contentType:y,searchFilter:c,ymreqid:o,apiLatency:i},!1,"srp_search_mailog")):(k.getValue(r,["metaData","main","isEmpty"])&&(g.featureInvoke("srp_search_empty_"+n),c&&g.featureInvoke("srp_search_emptyfilter_"+c+"_"+n)),g.featureInvoke("srp_search_success_"+n)),A&&200===A&&(l&&p.size(l)>0&&p.each(s,function(r){l[r]&&p.each(l[r],function(t,e){t&&(g.mailLog({m:"srp_search_chunk_failed",status:t.status,body:t.message,searchType:n,contentType:r,filter:e,ymreqid:o},!1,"srp_search_mailog"),g.featureInvoke("srp_search_chunk_failed_"+n),g.featureInvoke("srp_search_chunk_failmeta_"+t.status+"_"+r+"_"+e))})}),g.logRapid("mt:view",{action:"srp_msg_list_display",append:{mSrchId:a,mSrchQry:r.query,mSrtTyp:k.getValue(r,["sortInfo","sortType"]),mSrtOrd:k.getValue(r,["sortInfo","sortType"]),mSrchSpl:k.getValue(v,"spellCorrection")?1:0,mSrchTtl:v.totalHits||0,mSrchRes:y,mSrchMid:v.items&&v.items.slice(0,50).map(function(r){return r.mid})}}),B.enabled("searchExtractions")&&this._collectExtractionsStats(r),B.enabled("emailHistory")&&f&&k.getValue(f,"0.relationshipHistory")&&g.logRapid("mt:view",{action:"srp_emailhistory"}),"people"===n&&(t=B.enabled("searchBootcampV3")?k.getValue(r,"data.people.keyword.items.0.payload.is_known_entity"):k.getValue(r,"data.contacts.keyword.items.0.payload.is_known_entity"),e=t?"entity":"human",g.featureInvoke("srp_search_entity_"+e),g.stat({name:"srp_search_entity",tags:{type:e}})))},_collectExtractionsStats:function(r){var t,e=k.getValue(r,["searchType"]),a=k.getValue(r,"data.people.keyword.items.0.payload.name.source");a&&(t=(m.getValidExtractions(r,e)||[]).length,t>0?g.stat({name:"srp_extractions_success",tags:{count:t,provider:a,type:e}}):g.stat({name:"srp_extractions_failure",tags:{provider:a,type:e}}))},_collectSuggestionStats:function(r){if(r.fromCache)return void g.featureComplete("search_sugg_fetch_bootcamp_cache");g.featureInvoke("search_sugg_fetch_bootcamp"),200===r.status?(g.featureLatency("bootcamp_fetch",r.duration),g.featureComplete("search_sugg_fetch_bootcamp")):(800===r.status?g.featureInvoke("bootcamp_fetch_err_abort"):g.featureLatency("bootcamp_fetch_err",r.duration),g.featureFail("search_sugg_fetch_bootcamp"))},_reAuthenticate:function(r){yui.once("net:reloginSuccessful",function(){this.props.context.executeAction(j.executeSearch,{query:r.query})}.bind(this)),yui.common.net.Error.simpleRelogin()},_getPhoto:function(r){var t=this,e=r&&r.data,a=e&&e.contacts,n=a&&a[0],o=function(r){!1!==r&&["facebook","twitter","linkedin","flickr","corpdir"].indexOf(r)>-1&&t.props.context.executeAction(j.photoSource,{contact:n,phtotoSource:r})};yui.use("xobni-contacts-search-api",function(r){r.xobniContacts&&n&&r.xobniContacts.searchAPI.photo({id:n.id.slice(2),updated:n.payload.updated},o)})},_setUserData:function(r){yui.use("mail-persist-meta-data",function(){var t=yui.mail.persist.MetaData;Object.keys(r).forEach(function(e){t.set(e,r[e])})})},componentDidMount:function(){var r=document.getElementById("yucs-search"),t=document.createElement("div"),e="StencilRoot search-container Mt-10 Mx-0 W-45 Whs-nw mwpx-860";B.enabled("searchresults")&&this.props.context.getStore(l).on("changed",this.handleAction),r||(r=document.getElementById("UHSearch"),e="StencilRoot search-container M-0 Whs-nw mwpx-860"),r&&(t.className=e,r.parentNode.insertBefore(t,r),A.render(A.createElement(f,{context:this.props.context,accounts:this._getAccounts(),currentAccount:this._getCurrentAccount(),isImapinEnabled:N,xobniContactsStore:this.props.xobniContactsStore,searchKeywordPlaceholderEnabled:B.enabled("searchKeywordPlaceholder"),searchCacheContacts:B.enabled("searchCacheContacts"),scrollToSearchV2Enabled:B.enabled("scrollToSearchV2"),isRTL:Q,hasShownFolderSearchOnboarding:this._folderSearchOnboardingShown()}),t)),this._initSettings()},saveCustomView:function(r){r.autoSaved?p.defer(function(){this.props.context.executeAction(O.saveSmartView,r)}.bind(this)):this.props.context.executeAction(O.saveSmartView,r)},showAskToSaveCallout:function(r,t,e){var a=this;yui.use("mail-ui-onboarding","common-utils",function(n){var o,i=n.mail.ui.Onboarding;i.showDefaultOnboarding({name:"showCustomViewsCallout",node:".srp-save-smartview",pointer:"top",bdText:n.common.Utils.ezSub(J.str_custom_view_callout_text,{query:n.Escape.html(t),count:n.Escape.html(e)}),btnPrimaryText:J.str_save,btnCancelText:J.str_not_now,offset:[-155,30],onSuccess:a.saveCustomView.bind(null,r),onShow:function(){o=n.one(document).on("click",function(r){!r.target||r.target.hasClass("callout-default")||r.target.ancestor("callout-default")||(o.detach(),i.closeDefaultOnboarding("showCustomViewsCallout"))})},onClose:function(){o&&o.detach()},onUnmount:function(){o&&o.detach()},classNames:["customview-callout"]},!0)})},showCustomViewsCallout:function(r){var t,e,a,n=r.query,o=k.getValue(n,["keyword"],""),i=k.getValue(n,["folders",0,"displayName"],""),y=this._getCurrentAccount(),c=yui.mail.persist.MetaData.get("neo.pref.savedSearch"),A=yui.mail.persist.MetaData.get("simpleCustomViews"),v=B.enabled("customViewsAutoSave"),f=C.value("customViewsAutoSaveCount",10),l=this;try{t=p.find(JSON.parse(c)||[],function(r){var t=r.count&&parseInt(r.count,10);return r.query&&r.query===o&&(v&&t===f||3===t||10===t)})}catch(r){}if(t){if(A)try{e=p.find(JSON.parse(A.json)||[],function(t){return t.account&&t.account===y.id&&t.searchId&&p.isEqual(t.searchId,r.searchId)})}catch(r){}e||document.getElementsByClassName("onboardtip").length||(a={name:((i||"")+" "+o).trim()||J.str_saved_search,query:{keyword:o||"",folders:n.folders||[],smartviews:n.smartviews||[]},account:y.id,searchId:r.searchId},v&&t.count===f?(a.autoSaved=!0,l.saveCustomView(a)):l.showAskToSaveCallout(a,o,t.count))}},componentWillUnmount:function(){B.enabled("searchresults")&&this.props.context.getStore(l).removeListener("changed",this.handleAction)},shouldComponentUpdate:function(){return!1},openCloudStorageSetting:function(){yui.fire("openOptions",{view:"accounts"})},_updateSearchTabsExtractionStatus:function(r){var t,e=z.getActiveTab(),a=null,n=k.getValue(r,["searchType"]);m.hasValidExtractions(r,n)&&(t=p.clone(this.state._searchTabsExtractionStatus),a=p.find(t,{tabId:e.tabId}),null!=a&&k.setValue(a,["extraction"],!0),this.setState({_searchTabsExtractionStatus:t}))},handleAction:function(){var r=this.props.context.getStore(l).getActionInfo(),t=k.getValue(r,["data"],{}),e=k.getValue(t,["metaData"],{}),a=yui.mail.persist.MetaData,n=a.get("typeTag");switch(r.action){case h.NOTIFICATION_SHOW:this._showNotfication(r.data);break;case h.METADATA_CHANGE:this._setUserData(t),n&&g.logRapid("mt:click",{action:n});break;case h.SAVE_SEARCH:yui.use("tictac-simple",function(r){r.fire("simple:registerCustomView",t)}.bind(this));break;case d.PROGRESS_SUCCESS:case d.PROGRESS_FAILURE:yui.fire("search:bulk:complete");break;case b.FILL_PERMISSION_WINDOW:this.permissionWindow&&this.permissionWindow.location.replace(t.permissionUrl);break;case b.CLOSE_GDOC_PERMISSION:this.permissionWindow&&this.permissionWindow.close();break;case b.SEARCH_START:g.featureInvoke("srp_search_session_"+t.searchType),this._openSearchTab(t,t.searchType),this._fetchSearchAds(t),this._fireRapidSearchStart(t),this._fireYamasSearchStart(t),this._showPartnerSearch(t.query,t.searchType)&&this._loadPartnerSearch(),this._showBingAdModule(t.query,t.searchType)&&this._loadBingAds();break;case b.SEARCH_UPDATE:this._statMainDuration(e,t.searchType);break;case b.SEARCH_SUCCESS:e.reAuthenticate&&this._reAuthenticate(t),this._showPartnerSearch(t.query,t.searchType)&&this._renderPartnerSearch(),NeoConfig.hasAds&&(!this.adCache[t.searchId]||this.state.cache&&this.state.cache[t.searchId]||this.renderSearchAds(t),this._showBingAdModule(t.query,t.searchType)&&this._attachAds(t)),this._collectStats(t),this._collectResourceTimingStats(e,t.searchType),this._isSearchExtractionsKeywordsEnabled()&&this._updateSearchTabsExtractionStatus(t),E&&!this._shouldDisableRightRailAd()||this._rotateDisplayAd(t.searchType,t.query),this.showGDocsCallout(),D&&t.searchType&&"keyword"===t.searchType&&this.showCustomViewsCallout(t),this._fireSplunkStats(t);break;case b.SEARCH_FAILURE:e&&e.reAuthenticate&&this._reAuthenticate(t),this._statFailure(e,t.searchType),this._rotateDisplayAd(t.searchType,t.query);break;case h.SEARCH_TAB_ACTIVE:case b.FETCH_MORE_SUCCESS:case b.CHANGE_SEARCH_FILTER:this._rotateDisplayAd(t.searchType,t.query);break;case b.CHANGE_SEARCH_VIEW:this._rotateDisplayAd(t.searchType,t.query),this.adCache&&this.adCache[t.searchId]&&this.renderSearchAds(t);break;case b.BOOTCAMP_SUGGESTIONS_RECEIVED:case b.BOOTCAMP_SUGGESTIONS_FAILURE:this._collectSuggestionStats(e);break;case b.CLOSE_CURRENT_TAB:this._closeSearchTab(r.data);break;case b.CONTACT_ADD:yui.fire("addContact",r.data.name,r.data.email);break;case b.GET_CONTACT_PHOTO_SOURCE:this._getPhoto(r.data);break;case d.PRINT:yui.use("mail-ui-print",function(t){var e=r.data;t.mail.ui.print({fid:e.fid,msg:e})});break;case d.UNSUBSCRIBE:yui.use("mail-ui-unsubscribe",function(r){r.mail.ui.Unsubscribe.handle(t)});break;case d.QUICK_FILTER:yui.use("mail-ui-messagesview-quickfilter",function(t){var e=r.data;t.mail.ui.QuickFilter.createDialog({msgHeader:e})});break;case d.SET_ENCODING:yui.use("mail-ui-message-encodings",function(t){var e=r.data;t.mail.ui.MessageEncodings.setMessageEncoding(e.messages,e.messages[0].fid)});break;case d.REDIRECT_MESSAGE:yui.use("mail-ui-messageevents",function(t){t.mail.ui.MessageEvents.redirectMsgFromSearch({fid:r.data.fid,selectedItems:r.data.selectedItems})});break;case h.ONBOARDING_DISMISSED:t.hasShownFolderSearchOnboarding&&yui.fire("callout:action",{name:"folderSearchOnboarding",action:"close"})}},render:function(){return A.createElement("span",{key:"bridgeComponent"})}}),t.exports=y},{"../../../../artifacts/lang":2,"../../utils/AccountUtils":16,"../autocomplete/Container.jsx":6,ActionStore:"ActionStore",AppDispatcher:"AppDispatcher",BingAdsRightRail:"BingAdsRightRail",BootcampAPIUtilsV2:"BootcampAPIUtilsV2",EnhancedPromise:"EnhancedPromise",ExtractionUtils:"ExtractionUtils",FolderStore:"FolderStore",GlobalActions:"GlobalActions",GlobalConstants:"GlobalConstants",MessageConstants:"MessageConstants",ObjectUtils:"ObjectUtils",SearchActions:"SearchActions",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",StatService:"StatService",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],10:[function(r,t,e){"use strict";var a,n=r("react/addons"),o=r("lodash"),i=r("Context"),y=r("FolderStore"),c=r("SearchQuery"),p=r("MenuItem"),A=r("MenuButton"),v=r("MenuItemGroup"),f=r("Utils"),l=r("StringUtils"),s=r("ObjectUtils"),u=r("../../../../artifacts/lang"),h=r("StatService");a=n.createClass({displayName:"FolderDropdown",statName:"folder_dropdown",mixins:[n.addons.PureRenderMixin,i],propTypes:{query:n.PropTypes.object,onSelect:n.PropTypes.func,executeSearch:n.PropTypes.func,openAdvancedSearch:n.PropTypes.func},getDefaultProps:function(){return{query:{},isImapinEnabled:!1,onSelect:o.noop,executeSearch:o.noop,openAdvancedSearch:o.noop}},render:function(){var r=this.props,t={"right-folder-dd":!0,"search-folder-scope-dd":!0},e={"right-folder-dd":!0,"search-folder-dropdown":!0},a=o.size(r.accounts)>1?u.str_all_accounts:u.str_all_mail,i=this.getSelectionInfo();return t[r.className]=r.className,e[r.className]=r.className,t=n.addons.classSet(t),e=n.addons.classSet(e),n.createElement(A,{ref:"menu",className:t,ddClassName:e,label:this.renderMenuTokenAndChevron(i),name:this.statName,dropdownXOrigin:"left",onOpen:this.handleMenuOpen},n.createElement(v,{title:u.str_search_in,overflow:!0,togglable:!0,className:"search-in-title"},n.createElement(p,{value:"search_in_all_account",title:a,selected:"all"===i.type,className:"all-account-menu-item",onClick:this.handleUserSelection.bind(this,"all",this.props.accounts)},n.createElement("span",null,n.createElement("span",null,a))),this.renderAccounts(i)),n.createElement(v,null,n.createElement(p,{className:"search-folder-scope-adv",title:u.str_advanced_mail_search,onClick:this.handleAdvSearchClick},n.createElement("span",{className:"search-folder-name"},u.str_advanced_search))))},renderMenuTokenAndChevron:function(r){var t=f.detectDirection(r.name||"",this.props.isRTL?"rtl":"ltr"),e=r.name,a=e.substring(e.lastIndexOf("/")+1,e.length);return n.createElement("span",null,n.createElement("span",{className:"icon icon-small-search"}),n.createElement("span",{className:"token-folder-account"},n.createElement("span",{title:e,"data-value":a,dir:t,className:"token-folder-account-text"},a)),n.createElement("span",{className:"icon icon-chevron"}))},renderAccounts:function(r){var t=this.getStore(y),e=o.size(this.props.accounts);return o.map(this.props.accounts,function(a){var i=o.chain(t.getSearchableSystemFoldersByAccount(a.id)).sort(t.sortSystemFolderComparator).value(),y=o.chain(t.getSearchableUserFoldersByAccount(a.id)).sort(t.sortByFolderNameComparator).value(),c=this.props.smartViews,p=[];return e>1&&p.push(this.renderAccountTitle(a,r)),p=o.compact(p.concat([this.renderFolders(a,i,r,e>1?2:1),this.renderSmartViewsGroup(this.renderSmartViews(a,c,r,e>1?3:2)),this.renderUserFoldersGroup(this.renderFolders(a,y,r,e>1?3:2))])),n.createElement(v,null,p)}.bind(this))},renderAccountTitle:function(r,t){return n.createElement(p,{value:r.description,title:r.description,selected:"account"===t.type&&t.id===r.id,className:"account-menu-item",onClick:this.handleUserSelection.bind(this,"account",r)},n.createElement("span",null,r.description))},renderUserFoldersGroup:function(r){return o.size(r)<=0?null:n.createElement(v,{value:u.str_folders,title:u.str_folders,className:"dropdown-menu-title"},r)},renderFolders:function(r,t,e,a){var i=this.getStore(y),c=this.props.isRTL?"padding-right":"padding-left";return o.map(t,function(r){var t=i.getLocalizedFolderNameById(r.id||r.folderInfo.index.toString()),o=t,y=t.substring(t.lastIndexOf("/")+1,t.length),A=(t.match(/\//g)||[]).length+a,v=A?12*A+"px":"",f={};return f[c]=v,n.createElement(p,{value:y,title:o,selected:"folder"===e.type&&e.id===r.id,highlighted:this.shouldHighlightFolder(r,e),onClick:this.handleUserSelection.bind(this,"folder",r)},n.createElement("span",{className:"search-folder-name",style:f,dir:l.getTextDirection(y)},y))}.bind(this))},shouldHighlightFolder:function(r,t){return this.props.currentFolder===r.id&&(!t.type||"account"===t.type||"all"===t.type)},renderSmartViewsGroup:function(r){if(r&&r.length)return n.createElement(v,{value:u.str_folders,title:u.str_smartviews,className:"dropdown-menu-title"},r)},renderSmartViews:function(r,t,e,a){var i={},y=this.props.isRTL?"padding-right":"padding-left",c=t,A=r.id;return i[y]=12*a+"px",o.size(this.props.accounts)>1&&(c=o.filter(c,function(r){return void 0===r.account||r.account===A})),o.map(c,function(r){var t=u["str_"+r.displayName]||r.displayName,a=void 0===r.account?o.merge({},{acctId:A},r):r;return n.createElement(p,{value:t,title:t,selected:e.id===r.displayName&&(!e.acctId||e.acctId===A),onClick:this.handleUserSelection.bind(this,"smartview",a)},n.createElement("span",{className:"search-folder-name",style:i},t))}.bind(this))},getSmartView:function(){var r=s.getValue(this.props.query,["smartviews"],[]),t=this.props.smartViews||[];return o.filter(t,function(t){return JSON.stringify(t.query.smartviews)===JSON.stringify(r)})},getSelectionInfo:function(){var r,t,e=this.getSmartView(),a=this.getStore(y),n=s.getValue(this.props.query,["folders"],[]).filter(function(r){return r.folderIds&&r.folderIds.length}),i=s.getValue(this.props.query,["folders"],[]).filter(function(r){return r.acctIds&&r.acctIds.length}),c={type:"all",id:u.str_all,name:u.str_all};return e.length>0?(r=u["str_"+e[0].displayName]||e[0].displayName,c={type:"smartview",id:e[0].displayName,name:r,acctId:s.getValue(i,"0.acctIds.0")}):n.length>0?(r=a.getLocalizedFolderNameById(n[0].folderIds),t=o.find(this.props.accounts,function(r){return r.id===s.getValue(n,"0.acctIds.0")}),o.size(this.props.accounts)>1&&(r=t.description+"/"+r),c={type:"folder",id:s.getValue(n,"0.folderIds.0",""),name:r}):i.length>0&&o.size(this.props.accounts)>1&&(c={type:"account",id:s.getValue(i,"0.acctIds.0",null),name:i[0].displayName}),c},handleUserSelection:function(r,t){var e,a,n,i=this.props.query,p=this.getStore(y),A=!(!(i.keyword||"").trim()&&!i.suggestion);switch(r){case"all":e=new c({keyword:i.keyword,refinements:i.refinements,suggestion:i.suggestion}),h.mailLog({m:"search_"+this.statName+"_allMail_click",yid:NeoConfig.loginId});break;case"account":e=new c({keyword:i.keyword,refinements:i.refinements,suggestion:i.suggestion,folders:[{displayName:t.description,acctIds:[t.id],folderIds:null}]});break;case"folder":a=p.getLocalizedFolderNameById(t.id),n=this.props.accounts&&this.props.accounts[t.acctId],this.props.isImapinEnabled&&n&&(a=o.template(u.str_account_folder,null)({account:n.description,folder:a})),e=new c({keyword:i.keyword,refinements:i.refinements,suggestion:i.suggestion,folders:[{displayName:a,acctIds:[t.acctId],folderIds:t.id}]}),t.isSystem&&h.mailLog({m:"search_"+this.statName+"_folder_click",folder:t.folderInfo.name,yid:NeoConfig.loginId});break;case"smartview":e=new c({keyword:i.keyword,refinements:i.refinements||t.refinements,suggestion:i.suggestion||t.suggestion,smartviews:t.query.smartviews,folders:t.acctId?[{acctIds:[t.acctId],folderIds:null}]:[]})}this.props.onSelect(e),A&&this.props.executeSearch(e),this.refs.menu.closeMenu(),h.mailLog({action:"search_box_filter_select",append:{mSrchQry:i.toString()}})},handleAdvSearchClick:function(){var r=this;r.props.openAdvancedSearch(),h.logRapid("mt:click",{action:"search_box_adv_search_fld_dd"}),h.mailLog({m:"react_search_"+r.statName+"_advSearch_click",yid:NeoConfig.loginId})},handleMenuOpen:function(){h.mailLog({m:"react_search_menu_"+this.statName+"_open",yid:NeoConfig.loginId}),h.stat("search_box_folder_dd_open"),h.logRapid("mt:click",{action:"search_box_filter_dd"})}}),t.exports=a},{"../../../../artifacts/lang":2,Context:"Context",FolderStore:"FolderStore",MenuButton:"MenuButton",MenuItem:"MenuItem",MenuItemGroup:"MenuItemGroup",ObjectUtils:"ObjectUtils",SearchQuery:"SearchQuery",StatService:"StatService",StringUtils:"StringUtils",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],11:[function(r,t,e){"use strict";var a={componentDidMount:function(){window.addEventListener("mousedown",this.DropdownMixin_handleWindowClick,!0)},componentWillUnmount:function(){window.removeEventListener("mousedown",this.DropdownMixin_handleWindowClick,!0)},DropdownMixin_handleWindowClick:function(r){var t,e=this.props.parentNode||this.getDOMNode();for(t=r.target;t;t=t.parentNode){if(t&&(t.hasAttribute&&t.hasAttribute("data-preventclose")||t.className&&-1!==t.className.split(" ").indexOf("advanced-search-folder-menu")))return;if(t===e)break}t||this.props.setClosed()}};t.exports=a},{}],12:[function(r,t,e){"use strict";YUI.add("tictac-search",function(t){function e(){window.React=window.React||r("react/addons");var e=r("AppDispatcher"),a=r("ActionStore"),n=r("./components/bridge/StormBridge.jsx"),o=r("./stores/ProgressStore"),i=document.createElement("div"),y=yui.common.Utils,c=y.settings,p=y.features,A={};[a,o].forEach(e.registerStore),i.id="storm-bridge",document.body.appendChild(i),window.React.render(window.React.createElement(n,{context:e.context,xobniContactsStore:A,folderSearchTutorial:-1!==window.location.search.indexOf("folderSearchTutorial")&&NeoConfig.isInternal}),i),p.enabled("searchCacheContacts")&&t.use("tictac-base-prefetch-store",function(r){
A.cache=r.Tictac.base.PrefetchStoreManager.getStore({endPoint:yui.xobniContacts.Utils.getXobniBaseURL().url+"/v4/endpoints/important",count:c.value("autosuggestPrefetchSize")||150})}),yui.fire("search:loaded")}t.namespace("Tictac").search={loader:function(){var t=r("lodash");r("../../artifacts/css/main.css"),t.defer(e,5),yui.detach("search:input")},isSearchResultsReallyEnabled:function(r){r(!0)}}},"1.0.0",{requires:["common-utils","mail-persist-meta-data","tictac-base","tictac-lib","xobni-utilities"]})},{"../../artifacts/css/main.css":1,"./components/bridge/StormBridge.jsx":9,"./stores/ProgressStore":"ProgressStore",ActionStore:"ActionStore",AppDispatcher:"AppDispatcher",lodash:"lodash","react/addons":"react/addons"}],13:[function(r,t,e){"use strict";function a(r,t){return o.findIndex(r||[],function(r){return"string"==typeof r&&r===t||r.query&&r.query===t})}var n,o=r("lodash"),i=r("StatService");n={get:function(){return yui.use("mail-persist-meta-data").then(function(r){var t=r.mail.persist.MetaData.get("neo.pref.savedSearch"),e=[];i.stat({name:"search_sugg_fetch_recent"});try{e=JSON.parse(t)}catch(r){}return e})},add:function(r){return!yui.common.Utils.features.enabled("searchresults")||"string"==typeof r&&!r.trim()?this.get():yui.use("mail-persist-meta-data").then(function(t){var e,n=t.mail.persist.MetaData.get("neo.pref.savedSearch"),y=n?JSON.parse(n):[],c=a(y,r);return c>-1?(e=o.pullAt(y,c)[0],e.count?e.count=parseInt(e.count,10)+1:e=yui.common.Utils.features.enabled("customViewsCallout")?{query:r,count:2}:r,y.unshift(e)):y.unshift(r),y=o.uniq(y).slice(0,NeoConfig.maxSearchHistory),r&&(t.mail.persist.MetaData.set("neo.pref.savedSearch",JSON.stringify(y)),i.stat({name:"search_sugg_add_recent"})),y})},remove:function(r){return yui.use("mail-persist-meta-data").then(function(t){var e=o.uniq(JSON.parse(t.mail.persist.MetaData.get("neo.pref.savedSearch"))).slice(0,NeoConfig.maxSearchHistory),n=a(e,r);return n>-1&&(e.splice(n,1),t.mail.persist.MetaData.set("neo.pref.savedSearch",JSON.stringify(e))),i.stat({name:"search_sugg_remove_recent"}),e})}},t.exports=n},{StatService:"StatService",lodash:"lodash"}],14:[function(r,t,e){"use strict";function a(r){o.call(this,r)}var n=r("lodash"),o=r("./SearchSuggestion");a.prototype=n.extend(Object.create(o.prototype),{constructor:a,getMatchAndRemainder:function(r){var t=[this.displayStr].concat(this.emailAddresses),e=n.find(t,function(t){return this.getRemainingPart(t,r)},this);return this.getRemainingPart(e||"",r)},getInitials:function(){var r=this.displayStr.split(" ");return[].concat(r.shift()||[]).concat(r.pop()||[]).map(function(r){return(r.charAt(0)||"").toUpperCase()}).join("")},getAdvancedSearchQuery:function(){return this.displayStr.indexOf(" ")>-1?'from:"'+this.displayStr+'" ':"from:"+this.displayStr+" "}}),t.exports=a},{"./SearchSuggestion":15,lodash:"lodash"}],15:[function(r,t,e){"use strict";function a(r){n.merge(this,r)}var n=r("lodash"),o=r("StringUtils");a.prototype={getOverrideText:function(){return"SEARCH_WEB"===this.intent?"":this.overrrideWithEmail?this.emailAddresses[0]:this.displayStr},getRemainingPart:function(r,t){var e,a,n;return e=o.escapeRegExp(t),a=new RegExp("(^|\\s)"+e+"(.*)","i"),n=a.exec(r),n?t+n[2]:""},getMatchAndRemainder:function(){return""}},t.exports=a},{StringUtils:"StringUtils",lodash:"lodash"}],16:[function(r,t,e){"use strict";var a=r("lodash"),n={};n.findAccountsInSyncing=function(r,t){var e=this,n=[];return a.each(r,function(r){e.isAccountSyncing(r,t)&&n.push(r)}),n},n.isAccountSyncing=function(r,t){return!!(r&&"ENABLED"===r.status&&"IMAPIN"===r.type&&r.createTime&&(a.now()/1e3-r.createTime)/60<=t)},t.exports=n},{lodash:"lodash"}],17:[function(r,t,e){function a(r,t,e){var a=r.getElementById(t);if(a)e(a);else{var n=r.getElementsByTagName("head")[0];a=r.createElement("style"),a.id=t,e(a),n.appendChild(a)}return a}t.exports=function(r,t,e){var n=t||document;if(n.createStyleSheet){var o=n.createStyleSheet();return o.cssText=r,o.ownerNode}return a(n,e,function(t){t.styleSheet?t.styleSheet.cssText=r:t.innerHTML=r})},t.exports.byUrl=function(r){if(document.createStyleSheet)return document.createStyleSheet(r).ownerNode;var t=document.getElementsByTagName("head")[0],e=document.createElement("link");return e.rel="stylesheet",e.href=r,t.appendChild(e),e}},{}],ActionStore:[function(r,t,e){"use strict";function a(r){this.dispatcher=r,this.payload={},this.setMaxListeners(256)}var n=r("lodash"),o=r("events").EventEmitter,i=r("GlobalConstants"),y={};a.prototype=n.merge({constructor:a,getActionInfo:function(){return this.payload},_onAction:function(r,t){this.payload={action:t,data:r},this.emit("changed")}},o.prototype),y[i.DEFAULT]="_onAction",a.storeName="ActionStore",a.handlers=y,t.exports=a},{GlobalConstants:"GlobalConstants",events:"events",lodash:"lodash"}],ProgressStore:[function(r,t,e){"use strict";function a(r){this.dispatcher=r,this._clearBulkProgress(),this.setMaxListeners(4)}var n=r("lodash"),o=r("events").EventEmitter,i=r("MessageConstants"),y={},c={from:0,size:0,total:0,title:"",progressing:!1,success:!1,errorMsgsInfo:"",promise:null};a.prototype=n.merge({constructor:a,getData:function(){return this.data},_clearBulkProgress:function(){this.data=n.clone(c)},_processUpdate:function(r){this.data=n.assign({},this.data,r)},_progressStart:function(r){this._clearBulkProgress(),this._processUpdate({progressing:!0,success:!1,promise:r.promise,title:r.title}),this.emit("changed")},_progressSuccess:function(r){this._processUpdate({progressing:!1,success:!0,total:r.total}),this.emit("changed")},_progressFailure:function(r){this._processUpdate({progressing:!1,success:!1,total:r.total,errorMsgsInfo:r.errorMsgsInfo}),this.emit("changed")},_progressUpdate:function(r){this._processUpdate({progressing:!0,success:!1,from:r.from,size:r.size,total:r.total,progress:r.progress,promise:r.promise||this.data.promise}),this.emit("changed")}},o.prototype),y[i.PROGRESS_START]="_progressStart",y[i.PROGRESS_SUCCESS]="_progressSuccess",y[i.PROGRESS_FAILURE]="_progressFailure",y[i.PROGRESS_UPDATE]="_progressUpdate",a.storeName="ProgressStore",a.handlers=y,t.exports=a},{MessageConstants:"MessageConstants",events:"events",lodash:"lodash"}],SearchActions:[function(r,t,e){"use strict";function a(){return new d({bucketId:NeoConfig.expBucketId,wssid:NeoConfig.wssid,mailboxId:NeoConfig.V3MailboxId,isForceUser:NeoConfig.forceDS,imapInEnabled:NeoConfig.imapIn,hasMultipleAccounts:q,searchGDocsEnabled:yui.common.Utils.features.enabled("searchCloudGoogleLinks"),searchInTrashEnabled:yui.common.Utils.features.enabled("searchInTrash"),searchResultsLinksEnabled:yui.common.Utils.features.enabled("searchResultsLinks"),searchExtractionsEnabled:yui.common.Utils.features.enabled("searchExtractions"),lmv3Enabled:yui.common.Utils.features.enabled("LMV3"),bcHost:P})}function n(){return p=p||new j({bucketId:NeoConfig.expBucketId,wssid:NeoConfig.wssid,mailboxId:NeoConfig.V3MailboxId,isForceUser:NeoConfig.forceDS,imapInEnabled:NeoConfig.imapIn,hasMultipleAccounts:q,bcHost:P,searchInTrashEnabled:yui.common.Utils.features.enabled("searchInTrash")})}function o(r,t){var e,a=r.split("&"),n={};return v.size(t)>0&&(v.each(a,function(r,o){e=r.split("="),e[0]&&!v.isUndefined(t[e[0]])&&(a[o]=e[0]+"="+t[e[0]],n[e[0]]=!0)}),v.each(t,function(r,t){n[t]||a.push(t+"="+r)})),a.join("&")}function i(r,t,e){(w?n():a()).searchItems({url:e.url}).then(function(a){r.dispatch(t.SUCCESS,{data:a.data,metaData:a.metaData,error:a.error,searchId:e.searchId,filter:e.filter||e.currentFilter,type:e.type||e.currentView,contentType:e.contentType,searchType:e.searchType}),e.callback&&e.callback(a.data)},function(a){800!==a.metaData.status&&r.dispatch(t.FAILURE,{data:a.data,metaData:a.metaData,error:a.error,searchId:e.searchId,filter:e.currentFilter,type:e.type||e.currentView,contentType:e.contentType,searchType:e.searchType})})}function y(r){var t={};return v.each(r,function(r,e){v.each(r,function(a,n){a.items.length>0&&(t[e]||(t[e]={}),t[e][n]=r[n])})}),t}function c(r){var t=v.chain(v.pluck(r,"acctIds")).compact().flatten().uniq().value(),e=!1;return q&&!t.length&&(t=v.map((f.get()||[]).filter(function(r){return"ENABLED"!==r.status&&(e=!0),"ENABLED"===r.status}),"id"),e||(t=null)),t}var p,A,v=r("lodash"),f=yui.mail.model.DataStore.Accounts,l=r("StatService"),s=r("SearchConstants"),u=r("UserSettingsConstants"),h=r("Utils"),b=r("ObjectUtils"),d=r("BootcampAPIUtilsV2"),j=r("BootcampAPIUtilsV3"),O=yui.common.Utils.features,g=yui.mail.persist.MetaData,k=r("SearchUtils"),m=r("../services/RecentSearchService"),x={},q=NeoConfig.multipleAccounts,w=O.enabled("searchBootcampV3"),P=yui.common.Utils.getBootcampURL(),z=r("StringUtils"),B=r("IO");A={setQuery:function(r,t){r.dispatch(s.SET_QUERY,{query:t.query,searchId:t.searchId})},changeSearchView:function(r,t){var e,a,o,c,p=b.getValue(t,["resultCount","count"],0),A={searchId:t.searchId,searchType:t.searchType,contentType:t.contentType,filter:t.filter,url:t.url},f={SUCCESS:s.CHANGE_VIEW_FETCH_SUCCESS,FAILURE:s.CHANGE_VIEW_FETCH_FAILURE};r.dispatch(s.CHANGE_SEARCH_VIEW,A),(!p||p<=0)&&t.url?(r.dispatch(s.CHANGE_VIEW_FETCH_START,A),i(r,f,A)):t.hasContent||"keyword"!==t.searchType||(r.dispatch(s.CHANGE_VIEW_FETCH_START,A),c=t.query,o={sortOrder:t.sortOrder,sortType:t.sortType},e=t.filter?t.filter:t.newFilter,a=n(),a.search({reqId:yui.common.net.Session.genReqID(),query:c.keyword,serviceId:b.getValue(c,"suggestion.serviceId"),emailAddresses:b.getValue(c,"suggestion.emailAddresses"),defaultFilter:e,sortInfo:o,refinements:c.refinements,folders:v.chain(v.pluck(c.folders,"folderIds")).compact().flatten().uniq().value(),accountIds:v.chain(v.pluck(c.folders,"acctIds")).compact().flatten().uniq().value(),limit:50,view:t.newView}).then(function(a){var n=y(a.data);r.dispatch(s.SEARCH_UPDATE,{data:n,metaData:a.metaData,error:a.error,searchId:t.searchId,filter:e,contentType:t.contentType,searchType:t.searchType}),r.dispatch(s.CHANGE_VIEW_FETCH_SUCCESS,{data:n,metaData:a.metaData,error:a.error,searchId:t.searchId,filter:e,contentType:t.contentType,searchType:t.searchType})},function(a){r.dispatch(s.CHANGE_VIEW_FETCH_FAILURE,{data:a.data,metaData:a.metaData,error:a.error,searchId:t.searchId,filter:e,contentType:t.contentType,searchType:t.searchType})},function(a){var n=y(a.data);r.dispatch(s.SEARCH_UPDATE,{data:n,metaData:a.metaData,error:a.error,searchId:t.searchId,filter:e,contentType:t.contentType,searchType:t.searchType})}))},changeSearchFilter:function(r,t){var e,o=b.getValue(t,["resultCount","count"],0),i=t.query,c={sortOrder:t.sortOrder,sortType:t.sortType},p=t.filter?t.filter:t.newFilter;r.dispatch(s.CHANGE_SEARCH_FILTER,t),t.isForceUser||o&&!(o<=0)||(r.dispatch(s.CHANGE_FILTER_FETCH_START,t),e=w?n():a(),e.search({reqId:yui.common.net.Session.genReqID(),query:i.keyword,serviceId:b.getValue(i,"suggestion.serviceId"),emailAddresses:b.getValue(i,"suggestion.emailAddresses"),defaultFilter:p,sortInfo:c,refinements:i.refinements,folders:v.chain(v.pluck(i.folders,"folderIds")).compact().flatten().uniq().value(),accountIds:v.chain(v.pluck(i.folders,"acctIds")).compact().flatten().uniq().value(),limit:50}).then(function(e){var a=y(e.data);r.dispatch(s.SEARCH_UPDATE,{data:a,metaData:e.metaData,error:e.error,searchId:t.searchId,filter:p,contentType:t.contentType,searchType:t.searchType}),r.dispatch(s.CHANGE_FILTER_FETCH_SUCCESS,{data:a,metaData:e.metaData,error:e.error,searchId:t.searchId,filter:p,contentType:t.contentType,searchType:t.searchType})},function(e){r.dispatch(s.CHANGE_FILTER_FETCH_FAILURE,{data:e.data,metaData:e.metaData,error:e.error,searchId:t.searchId,filter:p,contentType:t.contentType,searchType:t.searchType})},function(e){var a=y(e.data);r.dispatch(s.SEARCH_UPDATE,{data:a,metaData:e.metaData,error:e.error,searchId:t.searchId,filter:p,contentType:t.contentType,searchType:t.searchType})}))},executeSearch:function(t,e){var o,i,y,p,f=e.query,j=f.refinements,m=u.MSG_SORT_TYPE_DATE,x=e.sortType,q=r("FolderStore"),P=yui.common.Utils.settings.value("defaultFilter"),z=v.find(f.folders,function(r){var t=q.prototype.findByIndex(b.getValue(r,"folderIds.0","")),e=b.getValue(t,"types.0","")||b.getValue(t,"folderInfo.fid","");return"DRAFT"===(e=e.toUpperCase())||"SENT"===e}),B={sortOrder:e.sortOrder||u.MSG_SORT_ORDER_DOWN},C={query:f,sortOrder:e.sortOrder||u.MSG_SORT_ORDER_DOWN},D=g.get("neo.pref.searchSortBy"),E=f.suggestion,F=b.getValue(e,"query.typeTag",""),G="srp_msglist_search_by_subject"===F||f.keyword&&/subject:/.test(f.keyword),H=/smartview_/.test(F),I=b.getValue(f,["smartviews"],[]),J=e.query.keyword,K=f.folders||[],L=k.getCurrentAccountEmail(f);v.map(I,function(r){J=[].concat(J,r.keyword).join(" "),E=v.merge({},r.suggestion,E),K=K.concat(r.folders)}),x||(x=m,O.enabled("stickySearchSort")&&D&&D===u.MSG_SORT_TYPE_RELEVANCE&&(x=D)),B.sortType=C.sortType=x,o=k.generateSearchID(e.query,x,e.sortOrder||u.MSG_SORT_ORDER_DOWN),i=d.getSearchType(E),C.searchId=o,C.searchType=i,C.typeTag=F,l.timerStart("doSearch"),l.timerStart("doSearchRender"),p=w?n():a(),p.search({reqId:yui.common.net.Session.genReqID(),query:J,serviceId:b.getValue(E,"serviceId"),emailAddresses:b.getValue(E,"emailAddresses"),name:b.getValue(E,"name"),defaultFilter:z?"to":P,sortInfo:B,refinements:e.query.refinements,folders:v.chain(v.pluck(K,"folderIds")).compact().flatten().uniq().value(),accountIds:c(K),limit:A.customLimit||50,isSubjectSearch:G,isSmartSearch:H,currentEmail:L}).then(function(r){t.dispatch(s.SEARCH_UPDATE,{data:r.data,metaData:r.metaData,error:r.error,searchId:o,sortInfo:B,searchType:i,query:f}),t.dispatch(s.SEARCH_SUCCESS,{data:r.data,metaData:r.metaData,error:r.error,searchId:o,searchType:i,sortInfo:B,query:f})},function(r){return t.dispatch(s.SEARCH_FAILURE,{data:r.data,metaData:r.metaData,error:r.error,searchId:o,searchType:i,sortInfo:B,query:f}),r.data},function(r){return t.dispatch(s.SEARCH_UPDATE,{data:r.data,metaData:r.metaData,error:r.error,searchId:o,searchType:i,sortInfo:B,query:f}),r.data}),O.enabled("stickySearchSort")&&x!==D&&g.set("neo.pref.searchSortBy",x),y=!!h.loadPromisesMap["tictac-searchresults"],y||l.timerStart("loadSearchResultsTictac"),h.loadTictac("tictac-searchresults").then(function(){y||(l.stat({name:"search_results_tictac_notloaded"}),l.featureLatency("srp_load_tictac",l.timerComplete("loadSearchResultsTictac"))),t.dispatch(s.SEARCH_START,C)}),f.isKeywordOnly()&&!f.view&&A.addRecentSearch(t,f.keyword),f.suggestion?l.stat("do_search_with_people_token"):f.refinements&&f.refinements.length>0?j.filter(function(r){return 0===r.lastIndexOf("in:",0)}).length&&l.stat({name:"do_search_with_folder_token"}):l.stat({name:"do_search_with_keywords",tags:{count:f.keyword.length}})},fetchSuggestions:function(){var r=0,t=-1;return function(e,o){var i,y,c,p,A,f=o.query,u=o.searchId,b=r++,d=f.keyword&&f.keyword.trim(),j="";!f.suggestion&&f.keyword&&(y=v.chain(v.pluck(f.folders,"acctIds")).compact().flatten().uniq().value(),y&&y.length>0&&(i=o.accounts[y[0]])&&(j=i.email),p=w?n():a(),A=p.getSuggestions({reqId:yui.common.net.Session.genReqID(),query:d,accountemail:j,fechnpsy:o.fechnpsy,suggestionsCache:x}),c=!!h.loadPromisesMap["tictac-searchresults"],c||l.timerStart("loadSearchResultsTictac"),h.loadTictac("tictac-searchresults").then(function(){c||l.featureLatency("srp_load_tictac",l.timerComplete("loadSearchResultsTictac"))}),A&&A.then(function(r){b>t&&(e.dispatch(s.BOOTCAMP_SUGGESTIONS_RECEIVED,{data:r.data,metaData:r.metaData,error:r.error,searchId:u,query:f}),t=b)},function(r){b>t&&e.dispatch(s.BOOTCAMP_SUGGESTIONS_FAILURE,{data:r.data,metaData:r.metaData,error:r.error,searchId:u,query:f})}))}}(),fetchWebSuggestions:function(){var r=0,t=-1;return function(e,a){var n,o=a.query,i=z.addUrlParameters(yui.common.Utils.settings.value("searchWebSuggestionsUrl"),{command:o.keyword,nresults:3,output:"sd1",appid:"YahooMailNeo"}),y=r++,c=B.get(i);c&&c.then(function(r){if(y>t){if(200===r.status)try{n=JSON.parse(r.text)}catch(r){}e.dispatch(s.WEB_SUGGESTIONS_RECEIVED,{data:n,query:o}),t=y}},function(r){y>t&&(e.dispatch(s.WEB_SUGGESTIONS_FAILURE,{data:r.text,query:o}),l.stat({name:"search_web_suggestion_api_failure",tags:{code:r&&r.status}}))})}}(),setSelectedItems:function(r,t){r.dispatch(s.SET_SELECTED_ITEMS,t)},fetchMoreSearchResults:function(r,t){var e={},a={SUCCESS:s.FETCH_MORE_SUCCESS,FAILURE:s.FETCH_MORE_FAILURE};r.dispatch(s.FETCH_MORE,{searchId:t.searchId,filter:t.filter,contentType:t.contentType,searchType:t.searchType}),t.limit&&(e.limit=t.limit),yui.common.Utils.features.enabled("useTripodIndex")&&(e.useTripod=!0),w?(e.cursor=t.offset?t.offset:50,A.customLimit=+e.cursor+(e.limit||50)):(e.offset=t.offset?t.offset:50,A.customLimit=+e.offset+(e.limit||50)),t.url=o(t.url,e),i(r,a,t)},fillPageWithResults:function(r,t){var e={},a={SUCCESS:s.FILL_SCREEN_SUCCESS,FAILURE:s.FILL_SCREEN_FAILURE};r.dispatch(s.FILL_SCREEN,{searchId:t.searchId,filter:t.filter,contentType:t.contentType,searchType:t.searchType}),t.limit&&(e.limit=t.limit),w?e.cursor=t.offset?t.offset:50:e.offset=t.offset?t.offset:50,t.url=o(t.url,e),i(r,a,t)},doCalendarSearch:function(r,t){yui.fire("fireSearch",t.query.keyword),l.stat({name:"search_sugg_search_cal"})},doContactsSearch:function(r,t){yui.fire("fireSearch",t.query.keyword),l.stat({name:"search_sugg_search_contacts"})},doNotepadSearch:function(r,t){yui.fire("fireSearch",t.query.keyword),l.stat({name:"search_sugg_search_notepad"})},loadRecentSearches:function(r){var t;if(!yui.common.Utils.features.enabled("isMetaDataMigrated")&&!NeoConfig.forceToV3UserSetting)return void m.get().then(function(t){r.dispatch(s.LOAD_RECENT_SEARCHES,{data:t})});t=n(),t.getRecentSearches().then(function(t){r.dispatch(s.LOAD_RECENT_SEARCHES,{data:t})}),l.stat({name:"search_sugg_fetch_recent"})},addRecentSearch:function(r,t){if(!yui.common.Utils.features.enabled("isMetaDataMigrated")&&!NeoConfig.forceToV3UserSetting)return void m.add(t).then(function(t){r.dispatch(s.ADD_RECENT_SEARCH,{data:t})});r.dispatch(s.ADD_RECENT_SEARCH,{data:t})},removeRecentSearch:function(r,t){m.remove(t).then(function(t){r.dispatch(s.REMOVE_RECENT_SEARCH,{data:t})})},searchAdsSuccess:function(r,t){r.dispatch(s.SEARCH_ADS_SUCCESS,{searchId:t.searchId,data:t.data})},cleanUpSearchResults:function(r,t){r.dispatch(s.CLEAN_UP_SEARCH_RESULTS,{searchId:t.searchId})},closeCurrentTab:function(r,t){r.dispatch(s.CLOSE_CURRENT_TAB,{searchId:t.searchId,query:{}})},addContact:function(r,t){r.dispatch(s.CONTACT_ADD,t)},photoSource:function(r,t){r.dispatch(s.CONTACT_PHOTO_SOURCE,t)},getPhotoSource:function(r,t){r.dispatch(s.GET_CONTACT_PHOTO_SOURCE,t)}},t.exports=A},{"../services/RecentSearchService":13,BootcampAPIUtilsV2:"BootcampAPIUtilsV2",BootcampAPIUtilsV3:"BootcampAPIUtilsV3",FolderStore:"FolderStore",IO:"IO",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",SearchUtils:"SearchUtils",StatService:"StatService",StringUtils:"StringUtils",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash"}],SearchQuery:[function(r,t,e){"use strict";function a(){return f.enabled("attachmentQueryTokens")}function n(r){var t,e;for(t=0;t<u.SMARTVIEW_CATEGORIES.length;t++)if((e=u.SMARTVIEW_CATEGORIES[t])===r.toLowerCase()||v["str_"+e]===r)return e;return""}function o(r,t){var e,a,n,o,i,y,c,A=[];for(r=r.replace(new RegExp("^(['\"])(.*?)\\1$","g"),"$2"),r=r.trim(),e=0;e<t.length;e++)a=t[e],n=a.folderInfo.fid,o=a.id||a.folderInfo.index.toString(),i=l.normalizeFid(n),y=v["str_folder_"+a.folderInfo.name.toLowerCase()]||"",a.isSystem?i!==r.toLowerCase()&&a.folderInfo.name.toLowerCase()!==r.toLowerCase()&&y.toLowerCase()!==r.toLowerCase()||(A.push(o),c=c||y||r):a.folderInfo.name===r&&(A.push(o),c=c||r);return p.isEmpty(A)?null:{folderIds:A,displayName:c}}function i(r,t){var e,a=[];return r=r.replace(new RegExp("^(['\"])(.*?)\\1$","g"),"$2"),p.forEach(t,function(t){r.toLowerCase()===t.description.toLowerCase()&&(a.push(t.id),e=e||t.description)}),!p.isEmpty(a)&&{acctIds:a,displayName:e}}function y(r,t,e){var y,c=r.keyword,p=r.refinements||[],A=r.folders||[],v=r.typeTag||"";return h.test(c)?{keyword:c.trim(),refinements:p,folders:A,typeTag:v}:(y=c.match(u.REGEX_HAS_IS_IN_ACCOUNT),y&&y.forEach(function(r){var y,v,f,l,s=r.trim(),u=s.split(":"),h=!1;"in"===u[0]?(y=o(u[1],t))&&(A.push(y),h=!0):"account"===u[0]?(v=i(u[1],e))&&(A.push(v),h=!0):"is"===u[0]?(f=n(u[1]),l="is:"+f,h=!0,p.indexOf(l)<0&&f&&p.push(l)):"has"===u[0]&&a()&&(p.push(s),h=!0),h&&(c=c.replace(r,""))}),{keyword:c.trim(),refinements:p,folders:A,typeTag:v})}function c(r,t,e){r=r||{},this.suggestion=r.suggestion,this.displayName=r.displayName,this.isSavedSearch=r.isSavedSearch,r.shouldParseKeyword?p.assign(this,y(r,t||[],e||[])):(this.keyword=r.keyword||"",this.refinements=r.refinements||[],this.folders=r.folders||[],this.smartviews=r.smartviews||[],this.typeTag=r.typeTag||"")}var p=r("lodash"),A=r("ObjectUtils"),v=r("../../../artifacts/lang"),f=yui.common.Utils.features,l=r("FolderStore"),s=r("AppDispatcher"),u=r("SearchConstants"),h=/\bOR\b|\bAND\b|\([^()]+\b[^()]+\)|\s\-|^\-|\s\+|^\+/i;c.prototype={getSuggestionQueryFragment:function(){var r,t=this;return t.suggestion?(r=t.suggestion.displayStr,r.indexOf(" ")>-1&&(r='"'+r+'"'),"(from:"+r+" recipient:"+r+")"):""},getRefinementsQueryFragments:function(){return this.refinements.map(function(r){var t=r.split(":");return t[1].indexOf(" ")>-1&&!/^\".*\"$/.test(t[1])&&(t[1]='"'+t[1].replace(/\"/g,'\\"')+'"'),t.join(":")})},getHumanReadableSuggestionString:function(){var r=this.suggestion;return r&&r.displayStr?r.displayStr:""},isEmpty:function(){var r=this;return!r.keyword&&!r.suggestion&&r.folders&&0===r.folders.length&&r.smartviews&&0===r.smartviews.length&&r.refinements&&0===r.refinements.length},isKeywordOnly:function(){var r=this;return!r.suggestion&&r.folders&&0===r.folders.length&&r.refinements&&0===r.refinements.length},toString:function(){var r=this,t=[],e=this.getFolderScope();return t.push(r.getHumanReadableSuggestionString()),t=t.concat(r.getRefinementsQueryFragments()),t.push(r.keyword),t.push(e),this.smartviews&&this.smartviews.length&&t.push(this.smartviews[0].displayName),t.join(" ").trim()||v.str_all},toQueryString:function(){var r=this,t=[],e=this.getFolderScope();return t.push(r.getSuggestionQueryFragment()),t.push.apply(t,r.getRefinementsQueryFragments()),t.push(r.keyword),t.push(e),t.join(" ").trim()},toHumanReadableString:function(){var r=this,t=[];return r.displayName?r.displayName:(t.push(r.getHumanReadableFoldersString()),t.push(r.getHumanReadableSmartViewString()),t.push(r.getHumanReadableRefinementsString()),t.push(r.getHumanReadableSuggestionString()),t.push(r.keyword),p.compact(t).join(" ").trim()||r.toString())},getHumanReadableAccountsString:function(r){var t=this,e=[],a=p.filter(t.folders,function(r){return r.acctIds&&r.acctIds.length});return a.length&&(e=p.map(r,function(r){return r.id===A.getValue(a,"0.acctIds.0")?r.description:""})||[]),p.compact(e).join(" ")},getHumanReadableFoldersString:function(){var r=this,t=[];return t=p.filter(r.folders,function(r){return r.folderIds}).map(function(r){return r.displayName})||[],t.join(" ")},getHumanReadableSmartViewString:function(){var r=this,t=[];return t=r.smartviews.map(function(r){return v["str_"+p.escape(r.displayName)]||r.displayName})||[],t.join(" ")},getHumanReadableRefinementsString:function(){var r,t=this,e=t.getRefinementsQueryFragments(),a=[];return a=p.chain(e).map(function(t){if(t)return r=t.split(":"),v["str_"+r[1].toLowerCase()]||r[1]}).value(),a.join(" ")},getFolderScope:function(){var r=s.context.getStore(l);return p.chain(this.folders).map(function(r){return r.folderIds}).compact().flatten().map(function(t){var e=r.findByIndex(t),a=e&&(e.isSystem?l.normalizeFid(e.folderInfo.fid):e.folderInfo.name);return a?"in:"+(a.indexOf(" ")>-1?'"'+a+'"':a):""}).join(" ").value()}},t.exports=c},{"../../../artifacts/lang":2,AppDispatcher:"AppDispatcher",FolderStore:"FolderStore",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",lodash:"lodash"}],SearchUtils:[function(r,t,e){"use strict";var a,n=r("ObjectUtils"),o=r("lodash");a={generateSmartViewId:function(r){var t=n.getValue;return JSON.stringify({keyword:t(r,"keyword",""),refinements:t(r,"refinements",[]),folders:t(r,"folders",[]),smartviews:t(r,"smartviews",[]),emailAddresses:t(r,["suggestion","emailAddresses",0])})},generateSearchID:function(r,t,e){var a=n.getValue;return JSON.stringify({keyword:a(r,"keyword"),refinements:a(r,"refinements"),folders:a(r,"folders"),smartviews:a(r,"smartviews"),serviceId:a(r,"suggestion.serviceId"),emailAddresses:a(r,"suggestion.emailAddresses"),sortType:t,sortOrder:e})},getCurrentAccountEmail:function(r){var t,e,a,n;return r.folders&&r.folders.length&&(t=o.chain(o.pluck(r.folders,"acctIds")).compact().flatten().uniq().value(),e=t[0],a=NeoConfig.accounts.ALL,n=o.find(a,function(r){return r.id===e})),n||(n=yui.mail.model.DataStore.Accounts.getCurrentAccount()),n&&n.email||NeoConfig.emailAddress}},t.exports=a},{ObjectUtils:"ObjectUtils",lodash:"lodash"}]},{},[12]);